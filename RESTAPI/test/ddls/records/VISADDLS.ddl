**FIX2.28  03/05/13  VISADDLS6056 DDL    SW60VISA SW0H070  &                 ***
**FIX2.28  03/05/13  VISADDLS6055 DDL    SW60VISA SW0H041  %                 ***
**FIX2.28  03/05/13  VISADDLS6054 DDL    SW60VISA SW0G238  $                 ***
**FIX2.28  03/16/12  VISADDLS6053 DDL    SW60VISA SW0G102  #                 ***
**FIX2.28  02/16/12  VISADDLS6052 DDL    SW60VISA SW0G063  z                 ***
**FIX2.28  01/21/12  VISADDLS6051 DDL    SW60VISA SW0G019  y                 ***
**FIX2.28  08/11/11  VISADDLS6050 DDL    SW60VISA SW0F181  x                 ***
**FIX2.28  02/25/11  VISADDLS6049 DDL    SW60VISA SW0F028  w                 ***
**FIX2.28  08/20/10  VISADDLS6048 DDL    SW60VISA SW0E258  v                 ***
**FIX2.28  08/06/09  VISADDLS6047 DDL    SW60VISA SW0D385  u                 ***
**FIX2.28  02/13/09  VISADDLS6046 DDL    SW60VISA SW0D088  t                 ***
**FIX2.28  08/18/08  VISADDLS6045 DDL    SW60VISA SW0C522  s                 ***
**FIX2.28  02/09/08  VISADDLS6044 DDL    SW60VISA SW0C155  r                 ***
**FIX2.28  02/09/08  VISADDLS6043 DDL    SW60VISA SW0C135  q                 ***
**FIX2.28  08/23/07  VISADDLS6042 DDL    SW60VISA SW0B486  p                 ***
**FIX2.28  08/23/07  VISADDLS6041 DDL    SW60VISA SW0B478  o                 ***
**FIX2.28  05/17/07  VISADDLS6040 DDL    SW60VISA SW0B309  n                 ***
**FIX2.28  02/16/07  VISADDLS6039 DDL    SW60VISA SW0B109  m                 ***
**FIX2.26  08/23/06  VISADDLS6038 DDL    SW60VISA SW0A529  l                 ***
**FIX2.26  07/06/06  VISADDLS6037 DDL    SW60VISA SW0A461  k                 ***
**FIX2.26  03/30/06  VISADDLS6036 DDL    SW60VISA SW0A289  j                 ***
**FIX2.26  02/22/06  VISADDLS6035 DDL    SW60VISA SW0A196  i                 ***
**FIX2.26  12/15/05  VISADDLS6034 DDL    SW60VISA SW0A041  h                 ***
**FIX2.24  10/13/05  VISADDLS6033 DDL    SW60VISA SW09603  g                 ***
**FIX2.24  09/08/05  VISADDLS6032 DDL    SW60VISA SW09525  f                 ***
**FIX2.24  08/15/05  VISADDLS6031 DDL    SW60VISA SW09478  e                 ***
**FIX2.24  06/02/05  VISADDLS6030 DDL    SW60VISA SW09407  d                 ***
**FIX2.24  04/29/05  VISADDLS6029 DDL    SW60VISA SW09310  c                 ***
**FIX2.24  02/21/05  VISADDLS6028 DDL    SW60VISA SW09215  b                 ***
**FIX2.24  02/17/05  VISADDLS6027 DDL    SW60VISA SW09200  a                 ***
**FIX2.24  08/19/04  VISADDLS6026 DDL    SW60VISA SW08481  Z                 ***
**FIX2.23  02/20/04  VISADDLS6025 DDL    SW60VISA SW08186  Y                 ***
**FIX2.23  08/12/03  VISADDLS6024 DDL    SW60VISA SW07322  X                 ***
**FIX2.23  02/26/03  VISADDLS6023 DDL    SW60VISA SW06360  W                 ***
**FIX2.23  02/20/03  VISADDLS6022 DDL    SW60VISA SW06339  V                 ***
**FIX2.23  01/09/03  VISADDLS6021 DDL    SW60VISA SW06223  U                 ***
**FIX2.22  10/07/02  VISADDLS6020 DDL    SW60VISA SW06076  T                 ***
**FIX2.22  08/26/02  VISADDLS6019 DDL    SW60VISA SW06038  S                 ***
**FIX2.22  06/20/02  VISADDLS6018 DDL    SW60VISA SW05330  R                 ***
**FIX2.22  02/13/02  VISADDLS6017 DDL    SW60VISA SW05171  Q                 ***
**FIX2.19  01/12/02  VISADDLS6016 DDL    SW60VISA SW05114  P                 ***
**FIX2.17  09/14/01  VISADDLS6015 DDL    SW60VISA SW05058  O                 ***
**FIX2.17  08/26/01  VISADDLS6014 DDL    SW60VISA SW05033  N                 ***
**FIX2.14  05/08/01  VISADDLS6013 DDL    SW60VISA SW04402  M                 ***
**FIX2.14  03/29/01  VISADDLS6012 DDL    SW60VISA SW04348  L                 ***
**FIX2.11  01/18/01  VISADDLS6011 DDL    SW60VISA SW04212  K                 ***
**SEQ0.04  11/01/00  VISADDLS6010 DDL    SW60VISA SW04000  J                 ***
**FIX2.11  06/05/00  VISADDLS5310 DDL    SW53VISA SW04131  J                 ***
**FIX2.11  03/28/00  VISADDLS5309 DDL    SW53VISA SW04119  I                 ***
**FIX2.11  03/07/00  VISADDLS5308 DDL    SW53VISA SW04105  H                 ***
**FIX2.09  08/20/99  VISADDLS5307 DDL    SW53VISA SW04071  G                 ***
**SYNC.04  12/08/98  VISADDLS5306 DDL    SW53VISA SW04000  F                 ***
**FIX2.03  08/28/98  VISADDLS5306 DDL    SW53VISA SW03000  F                 ***
**FIX2.06  08/20/98  VISADDLS5106 DDL    SW51VISA SW03180  F                 ***
**FIX2.06  05/12/98  VISADDLS5105 DDL    SW51VISA SW03087  E                 ***
**FIX2.04  04/07/98  VISADDLS5104 DDL    SW51VISA SW03064  D                 ***
**FIX2.04  02/10/98  VISADDLS5103 DDL    SW51VISA SW03032  C                 ***
**FIX2.04  12/02/97  VISADDLS5102 DDL    SW51VISA SW03011  B                 ***
**SYNC.03  08/25/97  VISADDLS5101 DDL    SW51VISA SW03000  A                 ***
**FIX2.04  08/05/97  VISADDLS5101 DDL    SW51VISA SW51240  A                 ***
!*SEQ2.00  04/10/97  VISADDLS5100 DDL    SW51VISA                              !
                                                                       !00000W00
?page "header and modification history"
!#####################################################################!!00000W03
!#                                                                   #!!00000W04
!#                              BASE24                               #!!00000W05
!#                              ------                               #!!00000W06
!#                                                                   #!!00000W07
!#                VISANET INTERCHANGE INTERFACE DDLs                 #!!00000W08
!#                                                                   #!!00000W09
!#                   Proprietary Software Product                    #!!00000W0A
!#                                                                   #!!00000W0B
                                                                       !00000v00
!#                        ACI Worldwide, Inc.                        #!!00000v01
!#                        6060 Coventry Drive                        #!!00000v02
!#                   Elkhorn, Nebraska  68022-6482                   #!!00000v03
!#                          (402) 390-7600                           #!!00000v04
!#                                                                   #!!00000v05
!#    Copyright by ACI Worldwide, Inc. 2010                          #!!00000v06
!#                                                                   #!!00000v07
!#    All Rights Reserved.                                           #!!00000v08
!#                                                                   #!!00000v09
                                                                       !00000v0A
                                                                       !00000v0B
                                                                       !00000v0C
                                                                       !00000v0D
!#####################################################################!!00000W0L
                                                                       !00000W0M
?page
! Record of Changes:                                                  !!00000W0P
!                                                                     !!00000W0Q
! Date        Person/Emp #                                            !!00000W0R
! ---------   ------------                                            !!00000W0S
                                                                       !00000W0T
                                                                       !00000W0U
                                                                       !00000W0V
                                                                       !00000W0W
*  18SEP87     01     TUSCHEN!                                        !!00040
* SYMPTOM: None.!                                                     !!00041
* PROBLEM: Three new fields were added to the BASE formats that need! !!00042
*   to be supported.!                                                 !!00043
* FIX: Added three new fields to the SEM def, bits 40, 41, and 44.!   !!00044
* DEPENDENCIES: Re-DDL and compile all source files.!                 !!00045
* REFERENCE: Enhancement.!                                            !!00046
                                                                       !00047
*  2/8/88      02     CLARK!                                          !!00048
* SYMPTOM: None.!                                                     !!00049
* PROBLEM: None.!                                                     !!00050
* FIX: Added a "PA" (pan) key to the RLF so that it can be perused!   !!00051
*   by pan as well as by date.!                                       !!00052
* DEPENDENCIES: Re-DDL and compile all source files.!                 !!00053
* REFERENCE: RPE#871013-1!                                            !!00054
                                                                       !00055
*  16JUN88     03     TUSCHEN                                         !!00056
* SYMPTOM: None.                                                      !!00057
* PROBLEM: (E) The switch has added a new field to its DEBIT format   !!00058
*      messages, which the Interface cannot presently accept.  This   !!00059
*      field is used only when processing ENTREE transactions through !!00060
*      VisaNet.                                                       !!00061
* FIX: Add the new field Previous Transaction Data (bit 125) to the   !!00062
*      the dispute definition, which is now created to define a hold  !!00063
*      storage area for chargebacks, representations, fee collections !!00064
*      and fund disbursements, as well as the ENTREE 06xx admin mes-  !!00065
*      sages.  The size of the ILF record written to disk will not be !!00066
*      changed, and ENTREE specific fields will not be filled in on   !!00067
*      the ILF unless the user is processing ENTREE transactions      !!00068
*      through VisaNet.                                               !!00069
* IMPLEMENTATION DEPENDENCIES:  Apply the fix to this file and re-    !!00070
*      compile the DDLs and then apply the corresponding fixes to     !!00071
*      the VISAS and VISALIBS files and recompile those files.        !!00072
*      The reports RP01VISS and RP09VISS must also be recompiled.     !!00073
* REFERENCE: ACI-Generated.                                           !!00074
                                                                       !00075
*  16JUN88     03     TUSCHEN                                         !!00076
* SYMPTOM: None.                                                      !!00077
* PROBLEM: (E) The switch has added two new field to its copy request !!00078
*      and confirmation advice messages to comply with Release 4 of   !!00079
*      BASE II.                                                       !!00080
* FIX: Add the new fields to the Pathway request definition and       !!00081
*      admin definition for copy request and copy confirmation        !!00082
*      processing.                                                    !!00083
* IMPLEMENTATION DEPENDENCIES:  Apply the fix to this file and re-    !!00084
*   compile the DDLs and then apply the corresponding fixes to the    !!00085
*   RQVCRCS, VISAS and VISALIBS files and recompile those files.      !!00086
*   Also must recompile RQRLFS and RQVNMCS.                           !!00087
* REFERENCE: RPE #880203-2.                                           !!00088
                                                                       !00089
*  12NOV88     04     WHITET                                          !!00090
* SYMPTOM: NONE.                                                      !!00091
* PROBLEM: (E) NONE.                                                  !!00092
* FIX: Added the fstm definition to the suspense record.              !!00093
* IMPLEMENT: Apply the fix to this file and re-ddl and recompile      !!00094
*            visas and visalibs.                                      !!00095
* REFERENCE: ACI GENERATED.                                           !!00096
                                                                       !00097
*  05DEC88     05     WHITET                                          !!00098
* SYMPTOM: The B40 ddl compiler was running out of symbols space.     !!00099
* PROBLEM: (V) Adding a redefine to the suspvisa caused the           !!00100
*          compiler to use to much symbol space.                      !!00101
* FIX:     Removed the fstm definition to the suspense record.        !!00102
* IMPLEMENT: Apply the fix to this file and re-ddl and recompile      !!00103
*            visas, visalibs and fviss.                               !!00104
* REFERENCE RPC #114135.                                              !!00105
                                                                       !00106
*  21DEC88     06     KORT                                            !!00107
* SYMPTOM: None.                                                      !!00108
* PROBLEM: The interface does not currently check the exact networks  !!00109
*          for which a terminal may accept cards to send to VISA.     !!00110
*          Therefore it cannot indicate where the card should or can  !!00111
*          be routed for authorization.                               !!00112
* FIX:     Add new fields to PCT and VisaNet specific ICF data        !!00113
*          definitions to hold Base24 network sharing group values    !!00114
*          for networks supported by VisaNet.                         !!00115
* IMPLEMENT: Apply fix to this file and recompile.  Apply             !!00116
*            corresponding fix to VISAS and VISCRNS.  Run aciaid on   !!00117
*            VISCRNS.  Recompile requesters and servers, as well as   !!00118
*            VISAS and VISALIBS.                                      !!00119
* REFERENCE: ACI generated.                                           !!00120
                                                                       !00121
*  12MAR89     07     WHITET                                          !!00122
* SYMPTOM: The EftPos VisaNet interface was sending spaces in field   !!00123
*          95 (replacement amount).                                   !!00124
* PROBLEM: (C)Field 95 should be zero filled.  It was defined as      !!00125
*          filler and could not be modified.                          !!00126
* FIX:     Changed filler to filler1 so it could be modified.         !!00127
* IMPLEMENT: Apply the fix to the ddl's and recompile VISAS,          !!00128
*            VISALIBS, and FVISS.                                     !!00129
* REFERENCE: RPC #116477.                                             !!00130
                                                                       !00131
*  12MAR89     07     WHITET                                          !!00132
* SYMPTOM: No SAF template was created when doing a FUP on ddlfup.    !!00133
* PROBLEM: (C)The ddl's were not set up to write to ddlfup.           !!00134
* FIX:     Modified the ddl's to write to ddlfup.                     !!00135
* IMPLEMENT: Apply the fix and do a FUP.                              !!00136
* REFERENCE: ACI Generated.                                           !!00137
                                                                       !00138
* 21APR89      08     WHITET                                          !!00139
* SYMPTOM: None.                                                      !!00140
* PROBLEM: (E) None.                                                  !!00141
* FIX:     Added functionality to log the mcas reason code.           !!00142
* IMPLEMENT: Apply fix and recompile.                                 !!00143
* REFERENCE: RPE #E890222-1.                                          !!00144
                                                                       !00145
* 11SEP89      09     T.Hathhorn                                      !!00146
* SYMPTOM: None.                                                      !!00147
* PROBLEM: (P) A new field is necessary in the ICF switch dpnt data.  !!00148
* FIX:     Added new field to the ICF switch dependent data to support!!00149
*          new PROTOCOL field on screen 12 of the ICF.                !!00150
* IMPLEMENT: Apply fix and recompile.                                 !!00151
* REFERENCE: RPC #120965.                                             !!00152
                                                                       !00153
* 27SEP89      10     J.Hathhorn                                      !!00154
* SYMPTOM: None.                                                      !!00155
* PROBLEM: (C) Format of suspense key was incorrect.                  !!00156
* FIX:     Modified the suspense prikey to  look like the ILF prikey. !!00157
* IMPLEMENT: Apply fix, re-ddl and recompile VISAS and VISALIBS.      !!00158
* REFERENCE: ACI generated.                                           !!00159
                                                                       !00160
**********************************************************************!!00161
* 26FEB90  JMC                                                        !!00162
* SYMPTOM: VISANET POS Address Verification Enhancements              !!00163
*          VISANET has mandated issuer compliance of Address          !!00164
*          Verification by April 30, 1990.  Address Verification is   !!00165
*          designed to reduce chargeback losses, chargeback processing!!00166
*          expenses and fraud for mail/phone order transactions in the!!00167
*          direct marketing retailer segment.                         !!00168
* PROBLEM (E) : None.                                                 !!00169
* FIX:     Defined fields ADDR-VRFY-STAT (Sem Bit 44),                !!00170
*                         ADDR (Sem Bit 123),                         !!00171
*                         PURGE-DATE (Frqt Bit 73),                   !!00172
*                     and FILE-REC-2 (Frqt Bit 127).                  !!00173
*          Added zip-cde and avv fields to path-rqst.                 !!00174
* IMPLEMENT: Apply fix to DDL and compile.  Apply fix to VISAS and    !!00175
*            compile.                                                 !!00176
* REFERENCE: RPE #E890525-1.                                          !!00177
                                                                       !00178
! 29Jan91   Atkinson                                                  !!00179
! SYMPTOM:  It has been determined that the current prikey used for   !!00180
!           ATM transactions may not be a unique key.                 !!00181
! PROBLEM:  (E) None.                                                 !!00182
! FIX:      Added the pan to the suspense ATM prikey.                 !!00183
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00184
!             Implementation of this enhancement will require the     !!00185
!             customer to run the ILF conversion program found on     !!00186
!             this subvolume.  The VISAUPDT file will provide         !!00187
!             further instructions.                                   !!00188
! REFERENCE:  ACI generated enhancement.                              !!00189
!                                                                     !!00190
! SYMPTOM:  SEM.BILL^AMT (bit 6) and SEM.CARD^CRNCY^CDE (bit 51) have !!00191
!           been added to the external message.                       !!00192
! PROBLEM:  (E) None.                                                 !!00193
! FIX:      Added fields to the SEM DDL.                              !!00194
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00195
! REFERENCE:  ACI generated enhancement.                              !!00196
!                                                                     !!00197
! SYMPTOM:  MCAS^RSN and MRCH^GRP^ID have been added to the external  !!00198
!           message.                                                  !!00199
! PROBLEM:  (E) None.                                                 !!00200
! FIX:      Added new fields under SEM.POS^ENTRY.  Removed            !!00201
!           MCAS-RSN-CDE field that had previously been added to SEM  !!00202
!           definition.                                               !!00203
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00204
! REFERENCE:  ACI generated enhancement.                              !!00205
!                                                                     !!00206
! SYMPTOM:  VISA has defined two subfields under OTHER^AMT for        !!00207
!           BASE I 010x, 0120, 040x, and 0420 messages.               !!00208
! PROBLEM:  (E) None.                                                 !!00209
! FIX:      Added SEM.OTHER^AMT.BILL^AMT and SEM.OTHER^AMT.REPL^AMT to!!00210
!           the SEM DDL.                                              !!00211
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00212
! REFERENCE:  ACI generated enhancement.                              !!00213
!                                                                     !!00214
! SYMPTOM:  VISA defined the use of field 121 (Issuing Institution ID !!00215
!           Code).                                                    !!00216
! PROBLEM:  (E) None.                                                 !!00217
! FIX:      Added ISS-INST-ID to FRQT, SEM, and FRLF DDLs.            !!00218
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind the       !!00219
!             interface.                                              !!00220
! REFERENCE:  ACI generated enhancement.                              !!00221
!                                                                     !!00222
! SYMPTOM:  VISA defined the use of field 122 (Remaining Open-To-Use).!!00223
! PROBLEM:  (E) None.                                                 !!00224
! FIX:      Added OPEN-TO-USE-AMT to the SEM DDL.                     !!00225
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00226
! REFERENCE:  ACI generated enhancement.                              !!00227
!                                                                     !!00228
! SYMPTOM:  VISA has defined two new subfields under field 63.        !!00229
! PROBLEM:  (E) None.                                                 !!00230
! FIX:      Added PMC^ID and CHGBK^BII^FLAGS to VDCS^PRIVATE in SEM   !!00231
!           and ADMIN definitions.                                    !!00232
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00233
! REFERENCE:  ACI generated enhancement.                              !!00234
!                                                                     !!00235
! SYMPTOM:  New message type "0322" has been defined by VISA.         !!00236
! PROBLEM:  (E) None.                                                 !!00237
! FIX:      FRLF.PAN-CNTRY-CDE added and FRLF.PAN increased in length !!00238
!           from 23 to 28 bytes to support new fields in file request !!00239
!           message.                                                  !!00240
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00241
! REFERENCE:  ACI generated enhancement.                              !!00242
                                                                       !00243
! 16Oct91  J.Hathhorn, DAS/1116                                       !!00244
! SYMPTOM: Totals command being rejected.                             !!00245
! PROBLEM: (P) The VISA assigned setlement id was not sent to the     !!00246
!          interface for the TOTALS command.                          !!00247
! FIX:     Modified the vnmc-rqst to have the setl-inst-id to be sent !!00248
!          to the interface.                                          !!00249
! IMPLEMENT: Apply fix, re-ddl and recompile VISAS and VISALIBS.      !!00250
! REFERENCE: RPC #133783  [SW4D300]                                   !!00251
                                                                       !00252
! 29Oct91   KSB/1259, DAS/1116                                        !!00253
! SYMPTOM:  None                                                      !!00254
! PROBLEM:  (P) There are no flags for ATM processing or POS          !!00255
!           processing                                                !!00256
! FIX:      Added the fields atm-proc and pos-proc to icf-visa.       !!00257
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00258
! REFERENCE:  RPC # 133730  [SW4D310]                                 !!00259
                                                                       !00260
!           KSB/1259/WHITET                                           !!00261
! SYMPTOM:  Bit 48 is not included on 0100/0101 and 0400/0401         !!00262
!           messages.                                                 !!00263
! PROBLEM:  (C) Field 48 was never formatted and sent if we are       !!00264
!           processing BASE and the interface sends a 0100/0101 or    !!00265
!           a 0400/0401 message.                                      !!00266
! FIX:      For field 48, redefined the rpt-info with required fields !!00267
!           for VISA.                                                 !!00268
! IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00269
! REFERENCE:  RPC #140726.                                            !!00270
                                                                       !00271
*  4/1/92          DAS/1116, TLT                                      !!00272
*  SYMPTOM:        BASE24-base Release 5.0 Enhancements.              !!00273
*                  BASE24-sec  Release 5.0 Enhancements.              !!00274
*  PROBLEM:        (E) None.                                          !!00275
*  FIX:            1.  Added support for Message Tokenization.        !!00276
*                  2.  Added support for CVV                          !!00277
*  DEPENDENCIES:   1.  Re-ddl DDLVISA and recompile VISA.             !!00278
*                  2.  Re-ddl DDLVISA and recompile VISA.             !!00279
*                                                                     !!00280
*                  See the release 5.0 installation documentation     !!00281
*                  for further information.                           !!00282
*  REFERENCE:      BASE24-base Release 5.0 External Specification     !!00283
*                    - Message Tokenization Enhancements              !!00284
*                  BASE24-sec  Release 5.0 External Specification     !!00285
*                    - Authorization Security Enhancements            !!00286
                                                                       !00287
*  4/1/92          TLT                                                !!00288
* SYMPTOM:  VISA has defined four new subfields under field 63.       !!00289
* PROBLEM:  (E) None.                                                 !!00290
* FIX:      Added NTWK^PART^FLAGS, ACQ^BUS^ID, FRAUD^REPT^DATA, and   !!00291
*           SPECIAL^PROGRAM^FLAGS to VDCS^PRIVATE in SEM and ADMIN    !!00292
*           definitions.                                              !!00293
* IMPLEMENT:  Apply fix, re-DDL DDLVISA, and recompile/bind.          !!00294
* REFERENCE:  ACI generated enhancement.                              !!00295
                                                                       !00296
*  4/1/92          TLT                                                !!00297
* SYMPTOM:  Acquirer business ID required for debit purchases in US.  !!00298
* PROBLEM:  (E) None.                                                 !!00299
* FIX:      Added acquirer business ID to VIIF definition.            !!00300
*           Added acquirer business ID to PATH-RQST definition.       !!00301
* IMPLEMENT:  Apply fix, re-DDL DDLVISA.  Apply fix to RQVIIFS,       !!00302
*             RQVCRCS, VISAS, VISALIBS and recompile/bind.  Convert   !!00303
*             VIIF file.                                              !!00304
* REFERENCE:  ACI generated enhancement.                              !!00305
                                                                       !00306
*  4/1/92          TLT                                                !!00307
* SYMPTOM:  None.                                                     !!00308
* PROBLEM:  (E) None.                                                 !!00309
* FIX:      Added VISF definition for Interlink Gateway.              !!00310
* IMPLEMENT:  Apply fix.                                              !!00311
* REFERENCE:  ACI generated enhancement.                              !!00312
                                                                       !00313
* 12/29/92         whitet                                             !!00314
* SYMPTOM:  Additions and modifications of fields in the xsem-def     !!00315
*           have caused the ILF record to break 2K.                   !!00316
* PROBLEM:  (C) This will cause the ILF to double in size.            !!00317
* FIX:      Reorganized the xsem-def to place all mandatory fields to !!00318
*           at the beginning of the definition, then optional fields, !!00319
*           and then non-mandatory fields.  Will log all mandatory    !!00320
*           fields and optional fields in certain instances.          !!00321
* IMPLEMENT:  Apply fix, recompile VISAS, VISALIBS, VISIS, VISPS and  !!00322
*             bind.  Recompile reports.                               !!00323
* REFERENCE:  ACI generated.                                          !!00324
                                                                       !00325
* 09/24/93  KSB/1259                                                  !!00326
* SYMPTOM:  0302 messages were not being formatted correctly.         !!00327
* PROBLEM:  (C) The interface was not turning on bit 37 and 63.2 and  !!00328
*           also not formatting these fields.                         !!00329
* FIX:      Changed the file^rec^2 and file^rec definitions to only   !!00330
*           be the file^rec definition and turn on bit 37 and 63.2.   !!00331
*           Format the fields correctly.                              !!00332
* IMPLEMENT:  Apply fix, recompile DDLVISA, VISAS, VISALIBS, VISCRNS  !!00333
*             RQRLFS and rebind.                                      !!00334
* REFERENCE:  RPC #004937.                                            !!00335
                                                                       !00336
* 09/30/93  KSB/1259                                                  !!00337
* SYMPTOM:  0600 messages were not being formatted correctly          !!00338
*           because the path-rqst definition increased by 4 bytes.    !!00339
* PROBLEM:  (F) The network-id that was added for the previous fix    !!00340
*           was added at the beginning of the path-rqst def when      !!00341
*           it should have been added within the except redefinition. !!00342
* FIX:      Changed the path-rqst def to include the network-id in    !!00343
*           the except redefinition of the admin def.                 !!00344
* IMPLEMENT:  Apply fix, recompile DDLVISA, VISAS, VISALIBS, VISCRNS  !!00345
*             RQRLFS and any other modules useing the path-rqst def.  !!00346
* REFERENCE:  RPC #200157.                                            !!00347
                                                                       !00348
* 10/05/93  SLA                                                       !!00349
* SYMPTOM:  None.                                                     !!00350
* PROBLEM:  (E) None.                                                 !!00351
* FIX:      Added support for Visa's August Requirements for          !!00352
*           Payment Service 2000 (PS2000).                            !!00353
* IMPLEMENT: Apply all related fixes.  Recompile modules and bind.    !!00354
* REFERENCE: ACI generated enhancement. (WO #SW930317-02)             !!00355
                                                                       !00356
* 12/05/93  DAMANI/1146                                               !!00357
* SYMPTOM:  None.                                                     !!00358
* PROBLEM:  (E) None.                                                 !!00359
* FIX:      Added support for VISA's Multicurrency system for         !!00360
*           Debit message format.                                     !!00361
*           Added field 5, 9, 16, 50 to xsem in the ddls.  These      !!00362
*           fields will not be loged to ILF.                          !!00363
* IMPLEMENT: Apply all related fixes.  Recompile modules and bind.    !!00364
* REFERENCE: ACI generated enhancement. (WO #SW930328-01)             !!00365
                                                                       !00366
* 12/28/93  DAMANI/1146                                               !!00367
* SYMPTOM:  None.                                                     !!00368
* PROBLEM:  (E) None.                                                 !!00369
* FIX:      Added support for VISA's Dynamic Key Management           !!00370
*           Added field 33, 48, 53, 96 to nmm. (network management    !!00371
*           message. )                                                !!00372
* DEPENDENCIES: Apply fix to ddl's, visag, visalibs and visas,        !!00373
*               genfwd, recompile and bind.                           !!00374
* REFERENCE: ACI generated enhancement. (WO #W921013-03).             !!00375
                                                                       !00376
* 01/03/94  DAMANI/1146                                               !!00377
* SYMPTOM:  None.                                                     !!00378
* PROBLEM:  (E) None.                                                 !!00379
* FIX:      Modified code to configure for automatic advice signon    !!00380
*           and automatic signon separately.  Added field             !!00381
*           auto-advice-signon to PCT and ICFVISA.                    !!00382
* DEPENDENCIES: Apply fix to ddl's, VISCRNS, RQVISAS, VISAS           !!00383
*               recompile and bind.                                   !!00384
* REFERENCE: (RPE #R930310-10).                                       !!00385
                                                                       !00386
*  02/15/94        kjw                                                !!00387
*  SYMPTOM:        0322 ATS advices were not logged accurately to     !!00388
*                  the FRLF.                                          !!00389
*  PROBLEM:        (V) The VISA interface was only checking for       !!00390
*                  field 101 to be equal to "E2" or "E4". The ATS     !!00391
*                  advices use a value of "E1",causing some of the    !!00392
*                  FRLF fields to be logged uninitialized. Also       !!00393
*                  changed the interface to log field 32 in the FRLF  !!00394
*                  iss^inst^id.                                       !!00395
*  FIX:            Modified the proc sem^file^update^advice to use    !!00396
*                  the first character of field 101 to determine      !!00397
*                  exception file messages. Also modified             !!00398
*                  util^expand^sem to expand field 32 for 0322 msgs.  !!00399
*  DEPENDENCIES:   Apply fix to VISAS, VISALIBS, DDLVISA  recompile   !!00400
*                  and bind.                                          !!00401
*  REFERENCE:      RPC #200101.                                       !!00402
                                                                       !00403
* 03/24/94  DAMANI/1146                                               !!00404
* SYMPTOM:  Visa responds with a 06 response for a new key request    !!00405
* PROBLEM:  (P) The interface should not send a newkey request        !!00406
*           for an active index first.                                !!00407
* FIX:      Added a field to pct called in-key-index in the subfield  !!00408
*           secure.                                                   !!00409
* DEPENDENCIES: Apply fix to ddl's, VISAS, recompile VISAS, VISALIBS  !!00410
*               recompile and bind.                                   !!00411
* REFERENCE: (RPC #206434).                                           !!00412
                                                                       !00413
* 06/01/94        t.white/730                                         !!00414
* SYMPTOM:        None.                                               !!00415
* PROBLEM:        (V) Enhanced the VisaNet ISO Interface to support   !!00416
*                 PaymentService 2000 for 1994.                       !!00417
* FIX:            Modified field 62 in the following definitions:     !!00418
*                      xsem                                           !!00419
*                      admin                                          !!00420
*                 Added fields in the following definitions:          !!00421
*                      path-rqst                                      !!00422
* DEPENDENCIES:   Apply fix to visas, visalibs, visag, ddlvisa, and   !!00423
*                 ddlpstkn, ddlsdf and recompile and bind.            !!00424
* REFERENCE:      RPW #931129-001.                                    !!00425
                                                                       !00426
* 06/28/94        DAMANI/1146                                         !!00427
* SYMPTOM:        None.                                               !!00428
* PROBLEM:        None.                                               !!00429
* FIX:            Enhanced VisaNet Interface to support Mastercard    !!00430
*                 Interchange compliance.  Added fields 62.17 and     !!00431
*                 redefined valid-cde (bit 62.3).                     !!00432
* DEPENDENCIES:   Apply fix to DDL's, VISAS, VISALIBS and VISAG,      !!00433
*                 recompile and bind.                                 !!00434
* REFERENCE:      RPW #940413-4                                       !!00435
                                                                       !00436
*  01/25/95        DAMANI/1146                                        !!00437
*  SYMPTOM:        None.                                              !!00438
*  PROBLEM:        (E) (Multiple Line Support enhancement)            !!00439
*  FIX:            VisaNet Interface has been modified to support     !!00440
*                  Multiple Lines.  The interface can now support     !!00441
*                  upto sixteen pairs of station.  The ddl's for PCT  !!00442
*                  are modified to use send and recieve pairs.        !!00443
*  DEPENDENCIES:   Fix ddl's, VISAG, VISAS, VISALIBS, VISCRNS,        !!00444
*                  RQVISAS, recompile and bind.                       !!00445
*  REFERENCES:     RPE #930607-006.                                   !!00446
                                                                       !00447
*  10/23/95        jah                                                !!00448
*  SYMPTOM:        Interface is not sending bit 41 back to the switch !!00449
*                  on a 0630 response for a PLUS transaction.         !!00450
*  PROBLEM:        Bit 41 is getting turned off on the 0630 ackn.     !!00451
*  FIX:            Modified the admin definition to include bit 41.   !!00452
*                  to test for a plus tran before turning bit 41 off. !!00453
*  DEPENDENCIES:   Apply fix to ddl's, VISALIBS recompile and bind.   !!00454
*  REFERENCE:      RPC #225431.                                       !!00455
                                                                       !00456
*  01/30/96        NIEMAN/728                                         !!00457
*  SYMPTOM:        March 1996 V.I.P. System Business Enhancements     !!00458
*  PROBLEM:        (E) None.                                          !!00459
*  FIX:            Visanet interface has been modified to support the !!00460
*                  delivery of CRIS alerts, SMS fraud transaction     !!00461
*                  notification, and new definitions for the          !!00462
*                  additional POS data fields (Field 60), bits 3 and  !!00463
*                  4.  As a result of these changes, many fields were !!00464
*                  added to the admin and path request definitions.   !!00465
*  DEPENDENCIES:   Apply fixes to ddl's, VISAG, VISAS, VISALIBS,      !!00466
*                  VISCRNS, RQVCRCS, RQSDFS, and RP09VISS, recompile  !!00467
*                  and rebind.                                        !!00468
*  REFERENCES:     RPW #951128-1                                      !!00469
*  CUSTOMER:       Mandatory                                          !!00470
                                                                       !00471
*  03/07/96        TCW/730                                            !!00472
*  SYMPTOM:        March 1996 V.I.P. System Business Update           !!00473
*  PROBLEM:        (E)                                                !!00474
*  FIX:            Visa has modified the CRIS alert format.  Modified !!00475
*                  the admin layout to contain the new fields.        !!00476
*  DEPENDENCIES:   Apply fixes to ddl's and VISAS, recompile          !!00477
*                  and rebind.                                        !!00478
*  REFERENCES:     RPW #960304-1                                      !!00479
*  CUSTOMER:       Mandatory                                          !!00480
                                                                       !00481
*  07/31/96        CAL/1553                                           !!00482
*  SYMPTOM:        September 1996 V.I.P. System Business Update       !!00483
*  PROBLEM:        (E)                                                !!00484
*  FIX:            Visa has added new subfields to field 63 for the   !!00485
*                  currency conversion service.  New definitions added!!00486
*                  for field 48 in the admin message for the VCRF     !!00487
*                  service.  VNMC^RQST definition name changed to     !!00488
*                  VPATH^RQST, changes also made in the path^rqst     !!00489
*                  section.                                           !!00490
*  DEPENDENCIES:   Apply fixes to ddl's, add corresponding fixes to   !!00491
*                  VISAS, VISALIBS, RQRLFS, RQVNMCS, RQVCRCS,         !!00492
*                  recompile and rebind the VISA modules.             !!00493
*  REFERENCES:     RPW #960401-7                                      !!00494
*  CUSTOMER:       Mandatory                                          !!00495
                                                                       !00496
*  09/19/96        rkk/1641          cal/1553                         !!00497
*  SYMPTOM:        Surcharging enhancement.                           !!00498
*  PROBLEM:        (E)                                                !!00499
*  FIX:            Added position 28 - tran-fee                       !!00500
*  DEPENDENCIES:   Apply fixes to DDLVISA, VISAD, VISAG, VISALIBS,    !!00501
*                  VISAS and VISASURS.  Recompile and bind.           !!00502
*  REFERENCE:      WO #960314-01                                      !!00503
                                                                       !00504
*  12/30/96        cal/1553                                           !!00505
*  PROBLEM:        (E)                                                !!00506
*  FIX:            Added fields avlog^iss and avlog^acq to the pct    !!00507
*                  definition.  These fields will be used for the     !!00508
*                  SMS advice retrieval option.                       !!00509
*  DEPENDENCIES:   Apply fixes to ddl's, apply corresponding fixes to !!00510
*                  VISAS, VISALIBS, recompile and rebind the VISA     !!00511
*                  modules.                                           !!00512
*  REFERENCE:      WO #961201-01                                      !!00513
*                                                                     !!00514
********************************************************************* !!00515
*            RELEASE 5.1                                              !!00516
********************************************************************* !!00517
*  09/01/96        CHH/1811                                           !!00518
*  SYMPTOM:        BASE24 Switch Release 5.1 Enhancements             !!00519
*  PROBLEM:        (E) None.                                          !!00520
*  FIX:            Renamed the following DDL names:                   !!00521
*                  DDLTAL -> VISATAL                                  !!00522
*                  DDLFUP -> VISAFUP                                  !!00523
*                  DDLCOB -> VISACOB                                  !!00524
*                  Removed all compiler directives and placed         !!00525
*                  in VISADDLM.                                       !!00526
*  IMPLEMENT:      Apply fix to VISADDLS and remake.                  !!00527
*  REFERENCE:      Switch 5.1 Upgrade Guide                           !!00528
                                                                       !00529
*  09/01/96        CHH/1811                                           !!00530
*  SYMPTOM:        Currently there is no efficient means of           !!00531
*                  controlling the size of RLF file.                  !!00532
*  PROBLEM:        The RLF is a relative file type.                   !!00533
*  FIX:            The RLF was changed to a key-sequenced file with   !!00534
*                  the HDR field as the primary key.                  !!00535
*  IMPLEMENT:      Apply fix to SVRLFS, VISADDLS, and VISAS and       !!00536
*                  remake.                                            !!00537
*  REFERENCE:      RPC #500062                                        !!00538
                                                                       !00538A00
*  06/11/97        rkk/1641                                            !00538A01
*  SYMPTOM:        September 1997 Visa Mandates Enhancement            !00538A02
*  PROBLEM:        (E) None.                                           !00538A03
*  IMPLEMENT:      Apply fixes to ddl's, add corresponding fixes to    !00538A04
*                  VISAG, VISAS, VISALIBS, RQVCRCS. Remake the VISA    !00538A05
*                  subvolume.                                          !00538A06
*  REFERENCES:     WO #970422-1                                        !00538A07
                                                                       !00538A08
                                                                       !00538B00
* 01OCT1997   BJH/1727    VBR/453                                      !00538B01
* Symptom:    Noncurrency Dispense Enhancement.                        !00538B02
* Problem:    None.                                                    !00538B03
* Fix:        Added fields to support NCD in pct-visa.atm.             !00538B04
* Dependency: Apply fix and remake.                                    !00538B05
* Reference:  WO 960311-5.                                             !00538B06
                                                                       !00538C00
* 30JAN1998   CHH/174                                                  !00538C01
* Symptom:    VisaNet V.I.P. Support Enhancement.                      !00538C02
* Problem:    None.                                                    !00538C03
* Fix:        Added fields to support V.I.P. in Admin, Path-rqst,      !00538C04
*             and Visf.  Removed acq-typ field from Pct-visa.          !00538C05
* Dependency: Apply fix VISADDLS, VISALIBS, VISAS, VISAG , RQVISFS,    !00538C06
*             VISPS, VISIS, SVVISFS and SCRNVISF and remake.           !00538C07
* Reference:  WO #970825-2.                                            !00538C08
                                                                       !00538D00
! 19MAR1998   chh/174 rkk/299 gg/724                                 ! !00538D01
! Symptom:    VisaNet March 1998 Mandates                            ! !00538D02
! Problem:    None                                                   ! !00538D03
! Fix:        Added history section for a previous fix which added   ! !00538D04
!             proc-cde to admin and path-request, used 167 bytes of  ! !00538D05
!             addl-cris-data for CRIS specific data, and cris-data to! !00538D06
!             redefine supp-info in admin definition.                ! !00538D07
! Dependency: Apply changes to VISADDLS, VISAS, VISALIBS, VISPS,     ! !00538D08
!             VISAD, SCRNVCRC, RQVCRCS, SCRNVSDF, and RQVSDFS and    ! !00538D09
!             remake.                                                ! !00538D0A
! Reference:  WO #971028-1                                           ! !00538D0B
!                                                                    ! !00538D0C
! 19MAR1998   gg/724                                                 ! !00538D0D
! Symptom:    VisaNet March 1998 Mandates                            ! !00538D0E
! Problem:    None                                                   ! !00538D0F
! Fix:        Added adnl-data-ind and addl-visaflt-data to xsem.     ! !00538D0G
! Dependency: Apply changes to VISADDLS, VISAS, VISALIBS, VISPS,     ! !00538D0H
!             VISAD, SCRNVCRC, RQVCRCS, SCRNVSDF, and RQVSDFS and    ! !00538D0I
!             remake.                                                ! !00538D0J
! Reference:  WO #971028-1                                           ! !00538D0K
                                                                       !00538E00
! 30APR1998   gg/724                                                 ! !00538E01
! Symptom:    VisaNet IIF Changes (BUG list)                         ! !00538E02
! Problem:    None.                                                  ! !00538E03
! Fix:        Modified the VIIF requester/server to allow users to   ! !00538E04
!             accept and display IIF information on multiple         ! !00538E05
!             screens, allowing up to 60 prefixes.                   ! !00538E06
! Dependency: Apply fix to RQVIIFS, SVVIIFS, SCRNVIIF, and VISADDLS  ! !00538E07
!             and remake the VisaNet subvol.  Convert VIIF file      ! !00538E08
!             using conversion program VII0598.                      ! !00538E09
! Reference:  WO #980316-4.                                          ! !00538E0A
                                                                       !00538F00
! 13AUG1998   gg/724                                                 ! !00538F01
! Symptom:    VisaNet Switch Token Enhancement                       ! !00538F02
! Problem:    None                                                   ! !00538F03
! Fix:        Fill the Visa switch token buffer with data from the   ! !00538F04
!             external message, move the buffer to the VISA Switch   ! !00538F05
!             Token, and add or update the token as needed.          ! !00538F06
!             Section added:                                         ! !00538F07
!                      visa-swi-tkn-data.                            ! !00538F08
! Dependency: Apply fix to VISADDLS and VISALIBS and remake.         ! !00538F09
! Reference:  WO #980508-1 (VISA), #980514-3 (VISI), #980514-4 (VISP)! !00538F0A
!                                                                    ! !00538F0B
! 13AUG1998   gg/724                                                 ! !00538F0C
! Symptom:    VisaNet September 1998 Mandates                        ! !00538F0D
! Problem:    None                                                   ! !00538F0E
! Fix:        Added support for Card Verification Value 2 (CVV2),    ! !00538F0F
!             Cardholder Serial Number, Merchant Serial Number, and  ! !00538F0G
!             Trans-Stain XID information for Visa Secure            ! !00538F0H
!             Electronic Commerce.  Modified interface to recognize  ! !00538F0I
!             additional enhanced data for fleet-related             ! !00538F0J
!             transactions.  Added US volume-tiered interchange      ! !00538F0K
!             support to inbound messages.  Chargeback messages now  ! !00538F0L
!             require a minimum transaction amount in some           ! !00538F0M
!             circumstances.                                         ! !00538F0N
!             Section modified:                                      ! !00538F0O
!                              xsem                                  ! !00538F0P
! Dependency: Apply changes to RQVSDFS, VISAG, VISADDLS, VISADDLM,   ! !00538F0Q
!             and VISALIBS on the SW51VISA subvolume; COBNAMES and   ! !00538F0R
!             PSTKNID on the BA51SRC subvolume; and DDLPSTKN on the  ! !00538F0S
!             BA51DDL subvolume and remake.  These changes will      ! !00538F0T
!             require an ILF conversion.                             ! !00538F0U
! Reference:  WO #980331-3.                                          ! !00538F0V
!                                                                    ! !00538F0W
! 13AUG1998   gg/724                                                 ! !00538F0X
! Symptom:    Commercial Card Type Indicator Enhancement.            ! !00538F0Y
! Problem:    None.                                                  ! !00538F0Z
! Fix:        Added a redefine of field 48 for addl-cmrcl-crd-data.  ! !00538F10
!             Section modified:                                      ! !00538F11
!                                xsem.                               ! !00538F12
! Dependency: Apply changes to VISADDLS, VISALIBS and VISALOGM and   ! !00538F13
!             remake.                                                ! !00538F14
! Reference:  WO #980302-1.                                          ! !00538F15
                                                                       !00538G00
* 13AUG1999   NP/1618  gg/724                                        !!!00538G01
* Symptom:    VisaNet April 1999 Mandates                            !!!00538G02
* Problem:    None.                                                  !!!00538G03
* Fix:        Added fields to support Fraud Advice ( 9620/9630 ).    !!!00538G04
*             Added Subfield 62.18, Excluded Transaction Identifier  !!!00538G05
*             Reason in SEM and ADMIN. Expanded the Merchant Volume  !!!00538G06
*             Indicator from 1 to 2 bytes. Also added Tertiary bitmap!!!00538G07
*             field 65 and fields 130, 131, 132, 133, 134, 135, 136, !!!00538G08
*             137, 138, 139, 142, 144, 145, 146, 147, 148, 149, 192. !!!00538G09
* Dependency: Apply fixes to VISAS, VISALIBS, VISAFMTS, VISAMSGS,    !!!00538G0A
*             VISAG, VISADDLS, DDLSDF, SCRNVSDF, SCRNVCRC, RQVSDFS,  !!!00538G0B
*             RQVCRCS and re-make. Run conversion on ILF and also    !!!00538G0C
*             replace VISALOGM, VISAUPDT and VISAMAN files.          !!!00538G0D
* Reference:  (retro of SCN #SW5P023 from WO #981120-02)             !!!00538G0E
                                                                       !00538G0F
* 13AUG1999   CHH/174  gg/724                                        !!!00538G0G
* Symptom:    Visa Check Card II Enhancement                         !!!00538G0H
* Problem:    None.                                                  !!!00538G0I
* Fix:        Made modification in VISF Section for Visa Check       !!!00538G0J
*             Card II support.                                       !!!00538G0K
* Dependency: Apply fix to VISAFMTS, VISALIBS, VISADDLS, VISAG,      !!!00538G0L
*             RQVISFS, SCRNVISF, SVVISFS, RQVSDFS and re-make.       !!!00538G0M
*             Apply changes to IPF3DDLM, IPF3DDLS, RUNVISAR,         !!!00538G0N
*             VISREFRG, VISREFRS and re-make.                        !!!00538G0O
* Reference:  (retro of SCN #SW5P023 from WO# 980702-01)             !!!00538G0P
                                                                       !00538H00
* 07MAR2000   gg/724 JFP/1694                                          !00538H01
* Symptom:    Comments for CVV2 result field do not include the value  !00538H02
*             "U".                                                     !00538H03
* Problem:    The mandate that added CVV2 support indicated that the   !00538H04
*             interface would not receive this value for CVV2 result.  !00538H05
*             Subsequent documentation indicates that "U" is a valid   !00538H06
*             value for this field.                                    !00538H07
* Fix:        Add the value "U" and a description to the comments for  !00538H08
*             the CVV2 result field.  Only comments were modified.     !00538H09
*             Section modified: xsem                                   !00538H0A
* Dependency: Apply fix to VISADDLS.                                   !00538H0B
* Reference:  Retro of SW5F225 from RPC #246608.                       !00538H0C
                                                                       !00538I00
* 27MAR2000   JFP/1694 JFP/1694                                        !00538I01
* Symptom:    VisaNet June 2000 Mandates                               !00538I02
* Problem:    None.                                                    !00538I03
* Fix:        1. Added subfield 126.12, Service Developement Field,    !00538I04
*                to the Visa Private Use field of the XSEM.            !00538I05
*             2. Replaced the filler byte in the Visa Switch Token     !00538I06
*                with the Relationship Participant Indicator field.    !00538I07
*             3. Added AVS response code 'G' and updated response code !00538I08
*                'U' with new comments.                                !00538I09
*             Modified sections: xsem,                                 !00538I0A
*                                visa-swi-tkn-data.                    !00538I0B
* Dependency: Apply changes to VISADDLS, VISALIBS, VISAFMTS, DDLSDF,   !00538I0C
*             RQVSDFS, and SCRNVSDF and re-MAKE.  Replace VISALOGM,    !00538I0D
*             VISAUPDT, and VISAMAN.                                   !00538I0E
* Reference:  Retro of SW5P212 from WO #991231-01.                     !00538I0F
                                                                       !00538I0G
                                                                       !00538J00
* 01JUN2000   cal/246 NP/1618                                          !00538J01
* Symptom:    The interface did not process adjustments correctly.     !00538J02
* Problem:    The adj-amt2-grtr-amt1 field is out of position within   !00538J03
*             the POS trans-allowed structure.  When the values from   !00538J04
*             the icf are moved into this structure the last 4 fields  !00538J05
*             could contain an incorrect value.                        !00538J06
* Fix:        Move the adj-amt2-grtr-amt1 field to be between the      !00538J07
*             adj-cash-advance and sales-draft fields.                 !00538J08
*             Section modified: pct-visa                               !00538J09
* Dependency: Apply fix to VISADDLS and remake.                        !00538J0A
* Reference:  Retro of SW5F415 from Case #324000.                      !00538J0B
                                                                       !00538J0C
                                                                       !00538H0D
                                                                       !00538G0Q
                                                                       !00538F16
                                                                       !00538E0B
                                                                       !00538D0L
                                                                       !00538C09
                                                                       !00538B07
                                                                       !00539B00
                                                                       !00539B01
                                                                       !00539K00
*********************************************************************!!!00539K01
**                           Release 6.0                            *!!!00539K02
*********************************************************************!!!00539K03
* 28MAR2000   NP/1618  CAL/283                                       !!!00539K04
* Symptom:    Release 6.0 Enhancements.                              !!!00539K05
* Problem:    None.                                                  !!!00539K06
* Fix:        Added new fields in PCT-VISA:                          !!!00539K07
*               acq-txn-prfl, iss-txn-prfl in the ATM section,       !!!00539K08
*               adj-flg, chrgbck-flg, acq-txn-prfl, iss-txn-prfl in  !!!00539K09
*               the POS section.                                     !!!00539K0A
* Dependency: Restore Release 6.0 files, modify the appropriate      !!!00539K0B
*             CUSTMACS flags, and run MAKE.                          !!!00539K0C
* Reference:  WO #981118-3 (Transaction Allowed Enhancement).        !!!00539K0D
                                                                       !00539L00
* 30MAR2001   cal/283                                                  !00539L01
* Symptom:    Added 5.3 EMV Support.                                   !00539L02
* Problem:    None.                                                    !00539L03
* Fix:        Provided EMV support for Visanet Interchange Interface.  !00539L04
* Dependency: Restore release 6.0 files, modify the appropriate        !00539L05
*             CUSTMACS flags, and run MAKE.                            !00539L06
* Reference:  WO #010102-01 (EMV 5.3/6.0)                              !00539L07
                                                                       !00539M00
* 09APR2001   CHH/174       cal/283                                    !00539M01
* Symptom:    VisaNet October 2000 Mandates                            !00539M02
* Problem:    None.                                                    !00539M03
* Fix:        Added Original Response Code (field 44.11), SMS          !00539M04
*             Cardholder ID Method  Indicator (field 60.9, postion     !00539M05
*             11) and SMS Fee Program Indicator (field 63.19) to       !00539M06
*             XSEM.  Added spcl-cond-merch to PATH-RQST.  Added        !00539M07
*             crdhldr-id-mthd, xstng-dbt-ind and fee-pgm-ind to        !00539M08
*             Switch token.  Replaced srv-dvlp-fld by Exsting Debt     !00539M09
*             Indicator (field 60.4) for XSEM and ADMIN.  Added        !00539M0A
*             crdhldr-id-mthd, xstng-dbt-ind and fee-pgm-ind to        !00539M0B
*             Switch Token.                                            !00539M0C
* Dependency: Apply changes to RQVCRCS, RQVSDFS, SCRNVCRC, SCRNVSDF,   !00539M0D
*             VISADDLS, VISAFMTS, VISALIBS, VISAMSGS, and VISAS and    !00539M0E
*             reMAKE.  Replace files VISAUPDT and VISAMAN.             !00539M0F
* Reference:  Retro of scn SW5P307 from WO #000426-11                  !00539M0G
                                                                       !00539M0H
* 09APR2001   CHH/174       cal/283                                    !00539M0I
* Symptom:    TBP Electronic Follow-up Support                         !00539M0J
* Problem:    None.                                                    !00539M0K
* Fix:        Added STIP Code to the Switch Specific Token.            !00539M0L
* Dependency: Apply fixes to VISADDLS and VISALIBS and re-make.        !00539M0M
* Reference:  Retro of scn SW5P307 from Case #325455                   !00539M0N
                                                                       !00539M0O
* 09APR2001   gg/724        cal/283                                    !00539M0P
* Symptom:    VisaNet October 2000 US SMS Store-and-Forward and        !00539M0Q
*             Resubmission Enhancement.                                !00539M0R
* Problem:    None.                                                    !00539M0S
* Fix:        Added the definition for the RSAF file, and added RSAF   !00539M0T
*             data to the PCT and SUSP definitions.                    !00539M0U
* Dependency: Apply changes to VISADDLM, VISADDLS, VISAFMTS, VISAG,    !00539M0V
*             VISALIBS, VISAMSGS, and VISAS and remake.  Replace       !00539M0W
*             files VISALOGM, VISAMAN, and VISAUPDT.                   !00539M0X
* Reference:  Retro of scn SW5P317 from WO #000626-01                  !00539M0Y
                                                                       !00539M0Z
* 09APR2001   cal/283       cal/283                                    !00539M10
* Symptom:    VisaNet April 2001 Mandates                              !00539M11
* Problem:    None.                                                    !00539M12
* Fix:        Added redefine of e-com flag in field 60.  Modified      !00539M13
*             comments in field 126 to mention new bit support in the  !00539M14
*             service development field.  The new bit is 3.            !00539M15
*             Two new fields were added to the Visa switch token,      !00539M16
*             def-bill-ind and pro-cde.                                !00539M17
* Dependency: Apply changes to VISADDLS, VISAFMTS and VISALIBS.  Then  !00539M18
*             run MAKE on the VISA subvolume.                          !00539M19
* Reference:  Retro of scn SW5P447 from WO #001013-03                  !00539M1A
                                                                       !00539M1B
* 09APR2001   cal/283       cal/283                                    !00539M1C
* Symptom:    UK CNP/AVS/CSE Support.                                  !00539M1D
* Problem:    None.                                                    !00539M1E
* Fix:        Added two fields to the switch token.  New fields are:   !00539M1F
*              msg-type and reimb-attr.                                !00539M1G
* Dependency: Replace SWVISAM, VISAM and VISAMM.  Apply                !00539M1H
*             corresponding fixes to VISAFMTS, VISAG, VISALIBS and     !00539M1I
*             VISAMSGS.  Restore new files VISACSEG and VISACSES.      !00539M1J
*             Then re-make.                                            !00539M1K
* Reference:  Retro of scn SW5P447 from WO #001013-03                  !00539M1L
                                                                       !00539M1M
* 09APR2001   cal/283       cal/283                                    !00539M1N
* Symptom:    EMEA Support.                                            !00539M1O
* Problem:    None.                                                    !00539M1P
* Fix:        Added 9 bytes of filler to match field to match VISA     !00539M1Q
*             EMV specs.                                               !00539M1R
*             Affected field:                                          !00539M1S
*              visa-discr-data (bit 134).                              !00539M1T
* Dependency: Apply fix.  Apply corresponding fixes to VISAFMTS,       !00539M1U
*             VISAG, VISALIBS and VISAMSGS.  Then re-make.             !00539M1V
* Reference:  Retro of scn SW5P447 from WO #001013-03                  !00539M1W
                                                                       !00539N00
* 20AUG2001   DLH/158   jds/1802                                       !00539N01
* Symptom:    Check Authorization Support Enhancement.                 !00539N02
* Problem:    None                                                     !00539N03
* Fix:        Added the following fields:                              !00539N04
*               ECHK to SUPP-INFO of XSEM.                             !00539N05
*               CHK to SUPP-INFO of ADMIN.                             !00539N06
*               MICR-RTTN and CHK-NUM to ADMIN of PATH-RQST            !00539N07
* Dependency: Apply changes to DDLSDF, RQVCRCS, RQVSDFS, SCRNVCRC,     !00539N08
*             SCRNVSDF, VISADDLS, VISAFMTS, VISAG, VISALIBS,           !00539N09
*             VISAMSGS, and VISAS.  Replace files VISALOGM and         !00539N0A
*             VISAUPDT.                                                !00539N0B
* Reference:  Retro of SCN SW5P534 from WO #001013-05.                 !00539N0C
*                                                                      !00539N0D
* 20AUG2001   gg/724   jds/1802                                        !00539N0E
* Symptom:    Acquiring Institution Country Code, field 19, is not     !00539N0F
*             always correctly set for multinational transactions.     !00539N0G
* Problem:    The interface sets this field using the ISO Country      !00539N0H
*             Code from the ICF.  If the acquirer processes for        !00539N0I
*             multiple institutions based in more than one country, an !00539N0J
*             incorrect value can be used in field 19.                 !00539N0K
* Fix:        Added a new field, Acquiring Institution Country Code,   !00539N0L
*             to the VIIF.  This will allow field 19 to be set         !00539N0M
*             specific to an institution.                              !00539N0N
*             Section modified:                                        !00539N0O
*                         viif                                         !00539N0P
* Dependency: Replace files SCRNVIIF, VISAMAN, and VISAUPDT.  Apply    !00539N0Q
*             corresponding fixes to RQVIIFS, SVVIIFS, VISADDLS,       !00539N0R
*             VISAG, VISAFMTS, VISALIBS, and VISAS.  Run Make.         !00539N0S
*             Convert the VIIF to its new format using conversion      !00539N0T
*             program VII1001.                                         !00539N0U
* Reference:  Retro of SCN SW5P585 from Case #334741.                  !00539N0V
*                                                                      !00539N0W
* 20AUG2001   gg/724   jds/1802                                        !00539N0X
* Symptom:    VisaNet October 2001 Mandates                            !00539N0Y
* Problem:    None.                                                    !00539N0Z
* Fix:        Added support for the Electronic Commerce Goods          !00539N10
*             Indicator and CAVV Results Code.  Sections modified:     !00539N11
*                         xsem,                                        !00539N12
*                         visa-swi-tkn-data                            !00539N13
* Dependency: Replace files SCRNVCRC, VISALOGM, VISAM, VISAMAN,        !00539N14
*             VISAMM, AND VISAUPDT.  Restore new file VISAEGIS.  Apply !00539N15
*             corresponding fixes to RQVCRCS, RQVSDFS, VISADDLS,       !00539N16
*             VISAFMTS, VISAG, VISALIBS, VISAMSGS, and VISAS.  VisaNet !00539N17
*             Interlink Gateway users apply fix to VISIS.  Run Make.   !00539N18
* Reference:  Retro of SCN SW5P585 from WO #001013-02.                 !00539N19
                                                                       !00539O00
* 06SEP2001   gg/724                                                   !00539O01
* Symptom:    Some subfields of field 60 are sent out as blanks when   !00539O02
*             they should be zeroes.                                   !00539O03
* Problem:    Visa documentation indicates these fields should default !00539O04
*             to zeroes.  There is also an extra subfield,             !00539O05
*             srv-dvlp-fld, that was replaced by xstng-dbt-ind with    !00539O06
*             October 2000 mandates.  The new field was added, but the !00539O07
*             old field was not removed when the mandates were retro'd !00539O08
*             to the 6.0 code.                                         !00539O09
* Fix:        Removed the srv-dvlp-fld from the field 60 definition    !00539O0A
*             in the xsem structure.  A user field was inserted at the !00539O0B
*             end of field 60 so the overall length would not change.  !00539O0C
*             Section modified:  xsem                                  !00539O0D
* Dependency: Apply fix to VISADDLS and VISAFMTS and run MAKE.         !00539O0E
* Reference:  Case #337492                                             !00539O0F
                                                                       !00539P00
* 08JAN2002   gg/724                                                   !00539P01
* Symptom:    Triple/Single DES Enhancement.                           !00539P02
* Problem:    None.                                                    !00539P03
* Fix:        Added field 105, extnd-encrypt-key, to the nmm           !00539P04
*             definition.  Expanded key fields in the pct.secure to    !00539P05
*             handle double length keys.  Removed unused fields        !00539P06
*             old-awk1 and old-awk2 from the pct.secure.               !00539P07
* Dependency: Apply fixes to VISADDLS, VISAG, VISALIBS, VISAM,         !00539P08
*             VISAMSGS, and VISAS.  Replace files VISALOGM, VISAMAN,   !00539P09
*             and VISAUPDT.  Apply corresponding fixes to HISWUTLS     !00539P0A
*             and SECUTILS.  Run MAKE.                                 !00539P0B
* Reference:  WO #000211-01.                                           !00539P0C
*                                                                      !00539P0D
* 08JAN2002   gg/724                                                   !00539P0E
* Symptom:    Release 6.0 Format 2 File Support                        !00539P0F
* Problem:    None                                                     !00539P0G
* Fix:        Added file-open-frmt to the PCT.                         !00539P0H
* Dependency: Apply fixes to RP09VISS, VISADDLS, VISAG, VISALIBS,      !00539P0I
*             VISAM, and VISAS.  Replace files VISALOGM, VISAMAN, and  !00539P0J
*             VISAUPDT.  Apply corresponding fixes to BAUTILS,         !00539P0K
*             HISWUTLS, and OKLIBTS.  Run MAKE.                        !00539P0L
* Reference:  WO #000202-01                                            !00539P0M
*                                                                      !00539P0N
* 08JAN2002   sjl/306                                                  !00539P0O
* Symptom:    Updated comments for Mail/Telephone or Electronic        !00539P0P
*             Commerce Flag in the POS Entry Capability Code bit 60.   !00539P0Q
* Problem:    None.                                                    !00539P0R
* Fix:        Added additional values, 8 and 9 to the indicator.       !00539P0S
* Dependency: Apply the fix and Make the DDLS.                         !00539P0T
* Reference:  WO #000101-1 (General Release 6.0)                       !00539P0U
                                                                       !00539Q00
* 06FEB2002   gg/724   gg/724                                          !00539Q01
* Symptom:    VisaNet April 2002 Mandates                              !00539Q02
* Problem:    None                                                     !00539Q03
* Fix:        Modified field 120 in the xsem definition to             !00539Q04
*             accommodate IAVS data.                                   !00539Q05
*             Section modified:  xsem                                  !00539Q06
* Dependency: Replace files VISALOGM, VISAMAN, and VISAUPDT.  Apply    !00539Q07
*             fixes to base files BACOUTLS, COBNAMS, DDLPSTKN,         !00539Q08
*             PSTKNCVS, and PSTKNID.  Apply fixes to RQVCRCS,          !00539Q09
*             RQVSDFS, VISADDLS, VISAFMTS, VISAG, and VISALIBS and     !00539Q0A
*             run MAKE.                                                !00539Q0B
* Reference:  ( retro of SCN SW5P671 from WO #011112-01 and            !00539Q0C
*             #011112-04 )                                             !00539Q0D
                                                                       !00539R00
* 07JUN2002   ahs/3152                                                 !00539R01
* Symptom:    Since both VISA and Interlink use the same FRLF file for !00539R02
*             maintenance, there is no way to determine which network  !00539R03
*             rejected a hot card update when there is a problem.      !00539R04
* Problem:    The Network ID was not included in the FRLF screen.      !00539R05
* Fix:        Modified the FRLF definition, adding the network id.     !00539R06
* Dependency: Apply fixes to VISADDLS, VISAMSGS and SVRLFS and         !00539R07
*             re-MAKE.  Replace VISAMAN.                               !00539R08
*             The FRLF structure changed, and must be recreated from   !00539R09
*             the new VISAFUP file after the MAKE stream is run.       !00539R0A
* Reference:  Case #347471.                                            !00539R0B
                                                                       !00539S00
* 19AUG2002   ahs/3152  cal/283                                        !00539S01
* Symptom:    VISA rejects 0630 Fund transfer reply messages with      !00539S02
*             reject code 0454 (field 69 missing).                     !00539S03
* Problem:    The interface was not supporting S-69 (Settlement        !00539S04
*             Institution Country ID).  The field should be echoed     !00539S05
*             back in the fund transfer administrative reply           !00539S06
*             messages.                                                !00539S07
* Fix:        Added S-69 to the administrative and settlement          !00539S08
*             message definitions.                                     !00539S09
* Dependency: Apply fixes to VISADDDLS and VISALIBS and re-MAKE.       !00539S0A
* Reference:  (retro of SCN SW5P728 for Case #346265)                  !00539S0B
                                                                       !00539S0C
* 19AUG2002   cal/283                                                  !00539S0D
* Symptom:    October 2002 Mandates                                    !00539S0E
* Problem:    None                                                     !00539S0F
* Fix:        Modified code to support Visa October 2002 mandates.     !00539S0G
*             Added mrch-vrfcn-val to bit 62 and recur-pmnt-ind,       !00539S0H
*             ucaf-ind and ucaf-fld to bit 126.  Added mrch-vrfcn-val  !00539S0I
*             to switch token.                                         !00539S0J
* Dependency: Apply fix to VISADDLS.  Apply corresponding fixes to     !00539S0K
*             DDLSDF, RQVSDFS, RQVCRCS, SCRNVSDF, VISAFMTS, VISAG,     !00539S0L
*             VISALIBS, VISAMSGS, VISAMM, VISAS, VISAEMVS and VISIS.   !00539S0M
*             Replace VISALOGM, VISAMAN and VISAUPDT.  Run MAKE.       !00539S0N
* Reference:  WO #020424-01                                            !00539S0O
                                                                       !00539T00
* 26SEP2002   gg/724                                                   !00539T01
* Symptom:    CAVV result code is in position 14 of field 44.  It is   !00539T02
*             expected in position 15.                                 !00539T03
* Problem:    Subfield check settlement code, positioned immediately   !00539T04
*             before CAVV result code, is missing from the field 44    !00539T05
*             definition.                                              !00539T06
* Fix:        Add chk-setl-cde to field 44 definition.                 !00539T07
*             Section modified:  xsem                                  !00539T08
* Dependency: Apply fix to VISADDLS and run MAKE.                      !00539T09
* Reference:  Case #352930                                             !00539T0A
                                                                       !00539T0B
                                                                       !00539U00
* 30DEC2002   RAF/100                                                  !00539U01
* Symptom:    External field 11, trace number, and field 37, retrieval !00539U02
*             reference number, are not being logged to the PTLF.      !00539U03
* Problem:    The interface is not using field 11 or field 37 in a     !00539U04
*             way that they would get logged to the PTLF.              !00539U05
* Fix:        Modified the interface to place fields 11 and 37 in the  !00539U06
*             switch token (Token ID of B0/B1).  The Switch token can  !00539U07
*             be configured to be logged to the PTLF.                  !00539U08
*             Section Modified:  visa-swi-tkn-data.                    !00539U09
* Dependency: Apply fix to VISADDLS and VISALIBS, then re-MAKE.        !00539U0A
* Reference:  Case #355922.                                            !00539U0B
                                                                       !00539U0C
                                                                       !00539V00
* 19FEB2003   DOO/1693                                                 !00539V01
* Symptom:    Visa April 2003 Mandates.                                !00539V02
* Problem:    None.                                                    !00539V03
* Fix:        Modified code to support Visa April 2003 mandates.       !00539V04
*             Modified sections: FRLF                                  !00539V05
*                                FRQT                                  !00539V06
*                                PATH-RQST                             !00539V07
*                                XSEM                                  !00539V08
*                                VISA-SWI-TKN-DATA                     !00539V09
* Dependency: Apply fixes to VISADDLS, VISAFMTS, VISAG, VISAMSGS,      !00539V0A
*             VISALIBS, VISAS, DDLSDF, SCRNRLF, SCRNVSDF, RQRLFS,      !00539V0B
*             RQVCRCS, RQVSDFS, and SVRLFS and re-MAKE.  Replace       !00539V0C
*             VISALOGM, VISAMAN and VISAUPDT.                          !00539V0D
* Reference:  WO #021115-01                                            !00539V0E
                                                                       !00539W00
* 19FEB2002   gg/724                                                   !00539W01
* Symptom:    Offline PIN Management enhancement                       !00539W02
* Problem:    None                                                     !00539W03
* Fix:        Added new subfield resp-src-rsn-cde in field 44, and     !00539W04
*             new fields 143 and 152 to the xsem definition.           !00539W05
* Dependency: Apply changes to VISAD, VISADDLS, VISAEMVS, VISAFMTS,    !00539W06
*             VISAG, and VISAMSGS.  Apply fixes to DDLGILF and         !00539W07
*             HISWUTLS.  Run MAKE.  Replace VISALOGM, VISAMNWD, and    !00539W08
*             VISAUPDT.                                                !00539W09
* Reference:  WO #020818-01                                            !00539W0A
                                                                       !00539X00
* 08AUG2003   cal/283                                                  !00539X01
* Symptom:    None.                                                    !00539X02
* Problem:    Values for DE 70 are not complete.                       !00539X03
* Fix:        Updated the comments for DE 70 to include all values     !00539X04
*             supported by each particular message type.  Deleted      !00539X05
*             DE 70 from the XSEM definition as it is not used.        !00539X06
*             Modified sections: XSEM, ADMIN, SETL and NMM.            !00539X07
* Dependency: Apply fix to VISADDLS, run MAKE.                         !00539X08
* Reference:  Case 354433                                              !00539X09
                                                                       !00539X0A
* 08AUG2003   cal/283                                                  !00539X0B
* Symptom:    Visa October 2003 Mandates                               !00539X0C
* Problem:    None.                                                    !00539X0D
* Fix:        Added DE 62.21, 62.22, 63.12 and 63.13 in the XSEM       !00539X0E
*             definition.  Added fields to the switch token definition !00539X0F
*             to support risk score, condition code and decimal        !00539X0G
*             position data from the new fields.                       !00539X0H
* Dependency: Apply fix to DDLPSTKN, PSTKNCVS, RQVBBFS, RQVCRCS,       !00539X0I
*             RQVNMCS, RQVSDFS, VISADDLS, VISAG, VISAFMTS, VISALIBS,   !00539X0J
*             VISAS and VISIS.  Replace files VISAMNWD, VISALOGM and   !00539X0K
*             VISAUPDT.  New files ILV1003M, ILV1003S and ILV1003R.    !00539X0L
*             Run MAKE.                                                !00539X0M
* Reference:  WO #030504-04                                            !00539X0N
                                                                       !00539Y00
* 18FEB2004   sanderj                                                  !00539Y01
* Symptom:    Added support for the Visa Settlement System 0620        !00539Y02
*             transaction.                                             !00539Y03
* Problem:    None.                                                    !00539Y04
* Fix:        Added a redefine for addl-vss-data for field 48.         !00539Y05
*             Section modified:  admin definition                      !00539Y06
* Dependency: Apply fix to RP09VISS, VISADDLS, VISAG and VISAMSGS.     !00539Y07
*             Run MAKE.                                                !00539Y08
* Reference:  Case #366468.                                            !00539Y09
                                                                       !00539Z00
* 16AUG2004   sanderj                                                  !00539Z01
* Symptom:    VisaNet October 2004 Mandates.                           !00539Z02
* Problem:    None.                                                    !00539Z03
* Fix:        Added two new values '07' and '91' to DE 22.  Added      !00539Z04
*             a new value (T = No CPS program available) to the        !00539Z05
*             definitions of DE 62.1. Added a new subfield 14          !00539Z06
*             (resp-rsn-cde) to DE 44 to support MasterCard            !00539Z07
*             transactions.                                            !00539Z08
* Dependency: Apply fix to DDLATTKN, DDLPSTKN, DDLSDF, PSCOUTLS,       !00539Z09
*             RQRLFS, RQVCRCS, RQVSDFS, RQPTLS, SCRNPTL, SCRNVSDF,     !00539Z0A
*             SVPTLS, VISADDLS, VISAEMVS, VISAFMTS, VISAG, VISAMSGS,   !00539Z0B
*             VISAS and VISPS.  Replace files VISALOGM, VISAMNWD and   !00539Z0C
*             VISAUPDT.  Run MAKE.                                     !00539Z0D
* Reference:  WO #040515-02.                                           !00539Z0E
                                                                       !00539a00
* 10FEB2005   sanderj                                                  !00539a01
* Symptom:    VisaNet RSAF and Miscellaneous Enhancements.             !00539a02
* Problem:    None.                                                    !00539a03
* Fix:        1. Modified the timestamp field in the VRSAF definition  !00539a04
*                to be (type binary 64).                               !00539a05
*             2. Added a new field (rvsl-prikey) to the definition of  !00539a06
*                VRSAF.                                                !00539a07
*             3. Added two new definitions sd-msg (shutdown) and       !00539a08
*                hb-msg (heartbeat).                                   !00539a09
* Dependency: Apply fix to VISADDLM, VISADDLS, VISAFMTS, VISAG,        !00539a0A
*             VISALIBS, VISAMSGS and VISAS.  Replace files VISALOGM,   !00539a0B
*             VISAMNWD and VISAUPDT.  Restore new files RSV0105M,      !00539a0C
*             RSV0105R and RSV0105S to the sw60visa subvol.  Run MAKE. !00539a0D
*             Run RSAF conversion program RSV0105.                     !00539a0E
* Reference:  WO #040824-03, Case #378466, #379448 and #386906.        !00539a0F
                                                                       !00539a0G
* 10FEB2005   linkec                                                   !00539a0H
* Symptom:    VisaNet April 2005 Mandates.                             !00539a0I
* Problem:    None.                                                    !00539a0J
* Fix:        Added fields 46, 55 and 140 to XSEM definition.  Added   !00539a0K
*             subfields to DE 62 and 63 in XSEM definition.  Added     !00539a0L
*             new fields in switch token definition.  Increased        !00539a0M
*             size of external message savearea in suspended           !00539a0N
*             memory definition.                                       !00539a0O
* Dependency: Apply fix to RQVCRCS, RQVSDFS, SCRNVCRC, SCRNVSDF,       !00539a0P
*             VISADDLS, VISAG, VISAS, VISAFMTS, VISALIBS, VISIS,       !00539a0Q
*             VISPS and VISAEMVS.  Replace VISALOGM, VISAMNWD          !00539a0R
*             and VISAUPDT.  Restore new files ILV0405M, ILV0405R      !00539a0S
*             and ILV0405S to the sw60visa subvol.  Run MAKE.  Obey    !00539a0T
*             conversion run file ILV0405R.                            !00539a0U
* Reference:  WO #041103-04                                            !00539a0V
                                                                       !00539b00
* 20FEB2005   linkec                                                   !00539b01
* Symptom:    RP09VISS fails during MAKE.                              !00539b02
* Problem:    New field added for EMV data in DE 55 causes             !00539b03
*             ambiguous reference error during MAKE of RP09VISS.       !00539b04
* Fix:        Change tran-crncy-cde for DE 55 to trn-crncy-cde.        !00539b05
* Dependency: Apply fix to VISADDLS and VISAEMVS.  Run MAKE.           !00539b06
* Reference:  Case #391674.                                            !00539b07
                                                                       !00539b08
                                                                       !00539c00
* 26APR2005   owallad                                                  !00539c01
* Symptom:    Visa Greek/South Africa Installment Transaction          !00539c02
*             Mandate.                                                 !00539c03
* Problem:    None.                                                    !00539c04
* Fix:        1. Added support for DE 118 which will enable support    !00539c05
*             for installment transaction data.                        !00539c06
*             2. Increased the size of the suspense buffer by 258      !00539c07
*             bytes to account for new DE 118.                         !00539c08
*             Modified section:  SUSPVISA                              !00539c09
*                                XSEM                                  !00539c0A
* Dependency: Apply fixes to DDLPSTKN, PSTKNCVS, VISADDLS, VISAFMTS,   !00539c0B
*             VISAG, VISALIBS, VISAMSGS, and VISAS and run MAKE.       !00539c0C
*             Replace VISALOGM, VISAMNWD, and VISAUPDT.                !00539c0D
* Reference:  WO #041130-02                                            !00539c0E
                                                                       !00539d00
* 02JUN2005   linkec                                                   !00539d01
* Symptom:    VisaNet April 2005 Mandates - DE55 enhancement.          !00539d02
* Problem:    None.                                                    !00539d03
* Fix:        Added dataset ID and dataset length subfields to the     !00539d04
*             definition for DE 55 emv data.                           !00539d05
* Dependency: Apply fix to VISADDLS, VISALIBS and VISAEMVS.            !00539d06
*             Run MAKE.  Replace VISALOGM.                             !00539d07
* Reference:  WO #041103-05                                            !00539d08
                                                                       !00539e00
* 12AUG2005   linkec                                                   !00539e01
* Symptom:    VisaNet October 2005 Mandates and Miscellaneous          !00539e02
*             Enhancements                                             !00539e03
* Problem:    None.                                                    !00539e04
* Fix:        1. Made the following changes to the XSEM definition:    !00539e05
*                - Added value of "39" to DE 3 comments                !00539e06
*                - Added new usage to DE 48 for Visa commercial data   !00539e07
*                - Added value of "8" for terminal entry capability in !00539e08
*                  DE 60                                               !00539e09
*                - Added "M" and "T" for market specific data in DE 62 !00539e0A
*                - Added subfield 24 to DE 62 and decreased the filler !00539e0B
*                - Added the values of "3S", "4S" and "4T" for amount  !00539e0C
*                  type in DE 54                                       !00539e0D
*                - Added bal5 and bal6 and corresponding subfields to  !00539e0E
*                  DE 54                                               !00539e0F
*                - Added DE 104, transaction specific data             !00539e0G
*             2. Made the following changes to the SETL definition:    !00539e0H
*                - Added value of 288 to DE 70 comments                !00539e0I
*             3. Increased the external message savearea in the        !00539e0J
*                suspense definition.                                  !00539e0K
*             4. Made the following changes to the Visa switch token   !00539e0L
*                - Added ccdr-ind and appropriate comments.            !00539e0M
*                - Deleted xstng-dbt-ind and user field redefine.      !00539e0N
* Dependency: Apply fix to BAUTILS, COBTKN, OKLIBTS, PSTKNID, RQVCRCS, !00539e0O
*             PSTKNCVS, DDLPSTKN, SUBTPTBL, VISADDLS, VISAG, VISAFMTS, !00539e0P
*             VISALIBS, VISAMSGS and VISAS.  Run MAKE.  Replace        !00539e0Q
*             VISALOGM, VISAMNWD and VISAUPDT.                         !00539e0R
* Reference:  WO #050426-04                                            !00539e0S
                                                                       !00539e0T
                                                                       !00539f00
* 02SEP2005   engelk                                                   !00539f01
* Symptom:    Reversals to merchant stand-in force posts do not        !00539f02
*             correctly adjust customer balances.                      !00539f03
* Problem:    Timers for In-flight submittals/resubmittals were not    !00539f04
*             sought using a sufficient amount of data to ensure that  !00539f05
*             the correct transaction was found.  The suspense record  !00539f06
*             was modified to include the RSAF timestamp as a          !00539f07
*             redefine to the preauth sequence number.  This           !00539f08
*             suspense record RSAF timestamp was not, however,         !00539f09
*             defined correctly, nor was it filled in correctly in     !00539f0A
*             the code.  More importantly it was not used anywhere     !00539f0B
*             in the code to retrieve the suspended RSAF transaction.  !00539f0C
* Fix:        Removed the RSAF timestamp from the suspense record      !00539f0D
*             DDL.  This way the other data in the suspense record     !00539f0E
*             definition can be correctly loaded into the timer        !00539f0F
*             userbuf of the suspended RSAF transaction.               !00539f0G
*             Modified suspvisa DDL.                                   !00539f0H
* Dependency: Apply fixes to VISADDLS, VISAMSGS, and VISALIBS.         !00539f0I
*             Run MAKE.                                                !00539f0J
* Reference:  Case #399772                                             !00539f0K
                                                                       !00539g00
* 11OCT2005   linkec                                                   !00539g01
* Symptom:    Intra country data field (DE 118) unable to send more    !00539g02
*             than 99 bytes of data.                                   !00539g03
* Problem:    Length subfield is declared as pic 99.                   !00539g04
* Fix:        Changed length subfield for DE 118 to pic 999.  Also     !00539g05
*             increased country code subfield to pic x(4).             !00539g06
* Dependency: Apply fix to VISADDLS, VISAFMTS and VISALIBS.  Run       !00539g07
*             MAKE.                                                    !00539g08
* Reference:  Case #399304                                             !00539g09
                                                                       !00539g0A
                                                                       !00539h00
* 12DEC2005   frederr                                                  !00539h01
* Symptom:    VISA EMV transactions are being failed at the interface  !00539h02
*             due to an invalid length in DE-134 (visa discretionary   !00539h03
*             data).                                                   !00539h04
* Problem:    DE-134 is defined with a 1 byte length and 31 bytes of   !00539h05
*             data.  The emv request token's (B2) iss-appl-data is     !00539h06
*             used to populate DE-134.  It can contain 32 bytes of     !00539h07
*             data.  VISA external specs define DE-134 with a 1 byte   !00539h08
*             length and up to 32 bytes of data.  If the emv request   !00539h09
*             data token has a full 32 bytes of data (as it will with  !00539h0A
*             VISA CCD trans), then the interface fails the message as !00539h0B
*             the DDL for DE-134 is only set up for 31 bytes of data.  !00539h0C
* Fix:        Modified DE-134 to hold up to 32 bytes of data.          !00539h0D
*             Increased size of external message savearea in suspended !00539h0E
*             memory definition.                                       !00539h0F
* Dependency: Apply fix to VISADDLS.  Run MAKE.                        !00539h0G
* Reference:  Case #402434.                                            !00539h0H
                                                                       !00539h0I
                                                                       !00539i00
* 17FEB2006   gruberg                                                  !00539i01
* Symptom:    Logon not sent after a station is brought up following   !00539i02
*             a shutdown sequence.                                     !00539i03
* Problem:    Stations are logged off when a shutdown message is       !00539i04
*             processed.  When a 9511 message is received on the       !00539i05
*             station indicating connectivity has been restored, a     !00539i06
*             logon message should be sent to log the station back     !00539i07
*             on.                                                      !00539i08
* Fix:        Add down-by-shutdown to the pct.station to track if a    !00539i09
*             station was marked down following a shutdown message     !00539i0A
*             Section modified:  pct-visa                              !00539i0B
* Dependency: Apply fixes to VISADDLS, VISAMSGS and VISAS.  Run MAKE.  !00539i0C
* Reference:  Case #393910.                                            !00539i0D
                                                                       !00539i0E
* 17FEB2006   gruberg                                                  !00539i0F
* Symptom:    VisaNet April 2006 Mandates                              !00539i0G
* Problem:    None.                                                    !00539i0H
* Fix:        Renamed field 62.17 to gateway transaction identifier,   !00539i0I
*             and added a redefine for AMEX CAPN acquirer reference    !00539i0J
*             data to its definition.  Added a redefine of field 104   !00539i0K
*             for promotion data.  Added support for field 60.6 chip   !00539i0L
*             transaction identifier in the switch token.              !00539i0M
* Dependency: Apply fixes to COBTKN, PSTKNCVS, PSTKNID, DDLBATKN and   !00539i0N
*             DDLPSTKN.  Apply fixes to RP09VISS, RQVDSFS, VISADDLS,   !00539i0O
*             VISAFMTS, VISAG, VISALIBS and VISIS.  Replace VISALOGM,  !00539i0P
*             VISAMNWD and VISAUPDT.  Run MAKE.                        !00539i0Q
* Reference:  WO #051109-02                                            !00539i0R
                                                                       !00539i0S
                                                                       !00539j00
* 23MAR2006   bracewm                                                  !00539j01
* Symptom:    The secondary PIN Block (tag C0) is not supported in     !00539j02
*             field 55. This is mandatory for PIN Change transactions. !00539j03
* Problem:    Not catered for in the code at present.                  !00539j04
* Fix:        Added the secondary PIN block structure to the list of   !00539j05
*             supported tag types in field 55. Also increased the      !00539j06
*             length of the savearea in extrn-msg by 10 bytes to 3714  !00539j07
*             to cater for the extra 10 bytes in tag C0.               !00539j08
* Dependency: Apply fixes to VISADDLS and VISAEMVS. Run MAKE.          !00539j09
* Reference:  Case #407964.                                            !00539j0A
                                                                       !00539j0B
                                                                       !00539f0L
                                                                       !00539d09
                                                                       !00539c0F
                                                                       !00539a0W
                                                                       !00539Z0F
                                                                       !00539Y0A
                                                                       !00539X0O
                                                                       !00539W0B
                                                                       !00539V0F
                                                                       !00539S0P
                                                                       !00539R0C
                                                                       !00539Q0E
                                                                       !00539P0V
                                                                       !00539P0W
                                                                       !00539P0X
                                                                       !00539P0Y
                                                                       !00539P0Z
                                                                       !00539M1X
                                                                       !00539L08
                                                                       !00539K0E
                                                                       !00539k00
* 30JUN2006   SharanA                                                  !00539k01
* Symptom:    When the VISA interface receives a request message with  !00539k02
*             AID (tag 4F) in field 55, the interface is not able to   !00539k03
*             process the tag. Event message 5195 (Unrecognized tag    !00539k04
*             data received) logged to EMS.                            !00539k05
* Problem:    VisaNet interface not coded to recognise Application     !00539k06
*             Identifier (AID) tag 4F in DE 55 on request messages.    !00539k07
* Fix:        Added the application identifier structure to the list   !00539k08
*             of supported tag types in field 55. Also increased the   !00539k09
*             length of the savearea in extrn-msg by 9 bytes to 3723   !00539k0A
*             to cater for the extra 9 bytes in tag 4F.                !00539k0B
*             Procs modified:util_de55_trace                           !00539k0C
*                            util_expand_de55_emv                      !00539k0D
* Dependency: Apply fix to VISAEMVS, VISAG and VISADDLS. Run MAKE.     !00539k0E
* Reference:  Case #412721                                             !00539k0F
                                                                       !00539k0G
                                                                       !00539l00
* 23AUG2006   gruberg                                                  !00539l01
* Symptom:    VisaNet October 2006 Mandates and VisaNet April 2006     !00539l02
*             Last Minute Updates.                                     !00539l03
* Problem:    None                                                     !00539l04
* Fix:        Modified definitions as follows:                         !00539l05
*             1. Added MERCH-TYP to the FRQT definition.               !00539l06
*             2. Added a CNTCT-INFO redefine of MSG-TXT in             !00539l07
*                ADDL-EXCPT-DATA in DE 48 in the SEM definition.       !00539l08
*             3. Added comments for new values in CHRGBCK-RGHTS-IND    !00539l09
*                in DE 62 in the SEM definition.                       !00539l0A
*             4. Added a Japan specific redefinition of the INFO       !00539l0B
*                field of DE 118 in the SEM definition.                !00539l0C
*             5. Added DE 124 FREE-FORM-TXT to the SEM definition.     !00539l0D
*             6. Add MERCH-TYP to the STOP-RECUR-PMNT redefine of      !00539l0E
*                ADMIN in the PATH-RQST definition.                    !00539l0F
*             7. Increased the SAVEAREA by 138 bytes to 3861 in the    !00539l0G
*                EXTRN-MSG of the SUSPVISA defintion to accommodate    !00539l0H
*                new DE 124.                                           !00539l0I
*             8. Add RESP-SRC-RSN-CDE and CHRGBCK-RGHTS-IND to the     !00539l0J
*                VISA-SWI-TKN-DATA definition.                         !00539l0K
* Dependency: Replace VISALOGM, VISAMNWD and VISAUPDT.  Apply fixes    !00539l0L
*             to IPF3DDLS, VISREFRS, BATKNCVS, BAUTILS, OKLIBTS,       !00539l0M
*             BATKNID, DDLBATKN, COBTKN, DDLSDF, RQRLFS, RQVCRCS,      !00539l0N
*             RQVSDFS, SCRNRLF, SCRNVSDF, VISADDLS, VISAFMTS,          !00539l0O
*             VISAG, VISALIBS and VISAS.  Run MAKE.                    !00539l0P
* Reference:  WO #060521-01 and WO #060325-02                          !00539l0Q
                                                                       !00539l0R
                                                                       !00539m00
* 15FEB2007   HUAC                                                     !00539m01
* Symptom:    VisaNet April 2007 Mandates and VisaNet October 2006     !00539m02
*             Optional Enhancements.                                   !00539m03
* Problem:    None                                                     !00539m04
* Fix:        Added interface support for the mandates:                !00539m05
*             1. New Payment Transactions                              !00539m06
*             2. Changes to U.S. Advanced Authorization Service        !00539m07
* Dependency: Replace VISALOGM, VISAMNWD and VISAUPDT.                 !00539m08
*             Apply fixes to DDLPSTKN, DDLSDF, RQVSDFS, SCRNVSDF,      !00539m09
*             SVVSDFS, VISADDLS, VISAFMTS, VISAG, VISALIBS, VISAMSGS   !00539m0A
*             and VISPS.  Run Make.                                    !00539m0B
* Reference:  WO #061027-01 and WO #060531-01.                         !00539m0C
                                                                       !00539m0D
                                                                       !00539n00
* 10MAY2007   bracewm                                                  !00539n01
* Symptom:    Length prefix on DE 54 cannot cater for a value greater  !00539n02
*             than 99. It needs to be able to cater for a value of     !00539n03
*             120.                                                     !00539n04
* Problem:    The length field is a two byte ASCII numeric field, its  !00539n05
*             upper limit is 99.                                       !00539n06
* Fix:        Increase the length field to 3 ASCII bytes to allow it   !00539n07
*             to cater for a value of 120.                             !00539n08
* Dependency: Apply fixes to VISADDLS and VISALIBS. Run Make.          !00539n09
* Reference:  Case #432667.                                            !00539n0A
                                                                       !00539n0B
                                                                       !00539o00
* 17AUG2007   frederr                                                  !00539o01
* Symptom:    VISA is rejecting partial approved POS transactions from !00539o02
*             this interface.                                          !00539o03
* Problem:    The interface is to put the original amount in DE-54     !00539o04
*             (additional amounts) on partial approved response        !00539o05
*             messages.  It does this, but if the POS Balance Token    !00539o06
*             (Token CB) is present in the response, the balance       !00539o07
*             amount will also be put in DE-54.  Since the balance     !00539o08
*             is done after the original amount on a partial approval, !00539o09
*             the balance amount writes over the original amount.      !00539o0A
*             DE-54 can contain up to 6 amounts, but the interface     !00539o0B
*             only attempts to use the first amount.                   !00539o0C
* Fix:        Modified the DDLS to redefine DE-54 from a structure to  !00539o0D
*             an array.  This will make it easier to locate the        !00539o0E
*             correct balance amount to use when more than one DE-54   !00539o0F
*             amount needs to be used.                                 !00539o0G
* Dependency: Apply fixes to VISADDLS and VISAFMTS.  Run Make.         !00539o0H
* Reference:  Case #440308                                             !00539o0I
                                                                       !00539o0J
                                                                       !00539p00
* 22AUG2007   gruberg                                                  !00539p01
* Symptom:    VisaNet October 2007 Mandates and Track Elimination      !00539p02
*             Enhancement                                              !00539p03
* Problem:    None                                                     !00539p04
* Fix:        1. Removed support for obsolete bits 40, 64, 120, 128    !00539p05
*                and 192.                                              !00539p06
*             2. Added comments for new healthcare amount types in DE  !00539p07
*                54. Added a new form factor indicator subfield        !00539p08
*                (tag 9F6E) to DE 55.                                  !00539p09
*             3. Added new DE 116 (Card Issuer Reference Data) to the  !00539p0A
*                SEM in the section that will not be logged to the     !00539p0B
*                ILF.                                                  !00539p0C
*             4. Added a new field (MIS-CAS-CDE) for DE 63.3 to the    !00539p0D
*                Visa Switch token definition.                         !00539p0E
*             5. Increased the SAVEAREA in the EXTRN-MSG of the        !00539p0F
*                SUSPVISA defintion by 263 bytes to 4124 to            !00539p0G
*                accommodate form factor tag data in DE 55 and new DE  !00539p0H
*                116.                                                  !00539p0I
* Dependency: Apply fixes to BATKNCVS, BATKNID, COBTKN, DDLBATKN,      !00539p0J
*             DDLPSTKN, PSTKNCVS, PSTKNID, RQVSDFS, SCRNVSDF,          !00539p0K
*             VISADDLS, VISAEMVS, VISAFMTS, VISAG, VISALIBS,           !00539p0L
*             VISAMSGS, VISAS and VISIS. Run Make. Replace VISALOGM,   !00539p0M
*             VISAMNWD and VISAUPDT.                                   !00539p0N
* Reference:  WO #070430-01                                            !00539p0O
                                                                       !00539p0P
                                                                       !00539q00
* 08FEB2007   gruberg                                                  !00539q01
* Symptom:    VisaNet October 2007 Mandates Phase II                   !00539q02
* Problem:    None                                                     !00539q03
* Fix:        Added field 117 to the SEM definition.  Deleted fields   !00539q04
*             122 and 124 from the SEM definition.  Deleted field 93   !00539q05
*             from the NMM definition.  Modified comments for          !00539q06
*             field 39 in the NMM definition to reflect current        !00539q07
*             valid values.  Increased the SAVEAREA in the EXTRN-MSG   !00539q08
*             of the SUSPVISA defintion by 106 bytes to 4230 to        !00539q09
*             accommodate the field changes in the SEM.                !00539q0A
* Dependency: Apply fixes to VISAD, VISADDLS, VISAEMVS, VISAFMTS,      !00539q0B
*             VISAG, VISALIBS, VISAMSGS, VISAS and VISIS.  Run Make.   !00539q0C
*             Replace VISALOGM.                                        !00539q0D
* Reference:  WO #070906-01                                            !00539q0E
                                                                       !00539q0F
                                                                       !00539r00
* 08FEB2008   RasalV                                                   !00539r01
* Symptom:    VisaNet Support E3 File for Neg File Updates             !00539r02
*             Enhancement.                                             !00539r03
* Problem:    None.                                                    !00539r04
* Fix:        Added support to E3 file for NEG file updates            !00539r05
*             enhancements.                                            !00539r06
* Dependency: Apply fix to RQRLFS, VISADDLS, VISALIBS, VISAS and       !00539r07
*             VISAMSGS.  Replace VISALOGM, VISAMNWD and VISAUPDT.      !00539r08
*             Run Make.                                                !00539r09
* Reference:  WO #070702-03                                            !00539r0A
*                                                                      !00539r0B
* 08FEB2008   SaderC                                                   !00539r0C
* Symptom:    VisaNet April 2008 Mandates                              !00539r0D
* Problem:    None.                                                    !00539r0E
* Fix:        1. Replace the existing field used for PMC-ID with       !00539r0F
*                USER-FLD in DE 63 (VDCS Private) of XSEM.             !00539r0G
*             2. Deleted the line that defines PMC-ID in DE 63 (VDCS   !00539r0H
*                Private) of ADMIN.                                    !00539r0I
*             3. Replace the existing field used for PMC-ID with       !00539r0J
*                USER-FLD in the VIIF record of VIIF.                  !00539r0K
*             4. Replace the existing field used for PMC-ID with       !00539r0L
*                USER-FLD in VISA-SWI-TKN-DATA.                        !00539r0M
*             5. Removed support for the Terminal Serial Number in DE  !00539r0N
*                55 (Tag 9F1E) and DE 133 of XSEM.                     !00539r0O
*             6. Added support for field 60.10 (Partial Authorization  !00539r0P
*                Indicator) in VISA-SWI-TKN-DATA.                      !00539r0Q
*             7. Modified the field 104 definition to use a less       !00539r0R
*                structured format.                                    !00539r0S
*             8. Added new value "C" (Single Currency ISA Accessed)    !00539r0T
*                to comments for field 63.21 (International Service    !00539r0U
*                Assessment - ISA).                                    !00539r0V
* Dependency: Apply fixes to DDLBATKN, DDLPSTKN, DDLSDF, PSTKNCVS,     !00539r0W
*             RP09VISS, RQVCRCS, RQVIIFS, RQVSDFS, SCRNVCRC,           !00539r0X
*             SCRNVIIF, SCRNVSDF, SVVSDFS, SUBTPTBL, VISAD, VISADDLS,  !00539r0Y
*             VISAEMVS, VISAFMTS, VISAG, VISALIBS, VISAMSGS, VISAS,    !00539r0Z
*             VISIS and VISPS. Run Make.  Replace VISALOGM, VISAMNWD   !00539r0a
*             and VISAUPDT.                                            !00539r0b
* Reference:  WO #071025-01                                            !00539r0c
                                                                       !00539r0d
                                                                       !00539s00
* 18AUG2008   bensone                                                  !00539s01
* Symptom:    VisaNet October 2008 Mandates                            !00539s02
*             MSD/CVN 17 Support                                       !00539s03
* Problem:    None                                                     !00539s04
* Fix:        Add DE 55 subfield term-txn-qual for tag = 9F66.         !00539s05
*             Add DE 55 subfield cust-exclsv-data for tag = 9F7C.      !00539s06
*             For Visa collection-only transactions, added coll-only   !00539s07
*             redefine of admin in path-rqst and updated comments for  !00539s08
*             tran-cde.                                                !00539s09
* Dependency: Apply fixes to the following files:                      !00539s0A
*             BA60AFT subvolume:  COBTKN                               !00539s0B
*             BA60DDL subvolume:  DDLBATKN, DDLFSTF and DDLPSTKN       !00539s0C
*             BA60SRC subvolume:  BATKNCVS, BATKNID and PSTKNCVS       !00539s0D
*             SW60IPF3 subvolume: IPF3DDLS                             !00539s0E
*             SW60STF subvolume:  SCRNSTF                              !00539s0F
*             SW60IVIS subvolume: VISAEMVS                             !00539s0G
*             SW60VISA subvolume: RQVCRCS, RQVISAS, SCRNVISA,          !00539s0H
*                                 SCRNVCRC, SVVSDFS, SWVISAM,          !00539s0I
*                                 VISADDLS, VISAFMTS, VISAG, VISALIBS, !00539s0J
*                                 VISAMM, VISAMSGS and VISAS.  Restore !00539s0K
*                                 new files RQVCOTM, RQVCOTS and       !00539s0L
*                                 SCRNVCOT.  Replace existing files    !00539s0M
*                                 VISALOGM, VISAMNWD and VISAUPDT.     !00539s0N
*             SW60VISI subvolume: VISIS                                !00539s0O
*             Run Make.                                                !00539s0P
* Reference:  WO #080521-01, WO #070803-01                             !00539s0Q
                                                                       !00539s0R
                                                                       !00539t00
* 13FEB2009   SaderC                                                   !00539t01
* Symptom:    VisaNet April 2009 Mandates                              !00539t02
* Problem:    None.                                                    !00539t03
* Fix:        1. Added a redefine POS-ENVMT to RECUR-PMNT-IND (DE 126  !00539t04
*                SE 13) of XSEM.                                       !00539t05
*             2. Added a new field ORIG-MSG-TYP to the COLL-ONLY       !00539t06
*                definition in PATH-RQST.  Also, decreased the length  !00539t07
*                of USER-FLD-ACI by 4 bytes.                           !00539t08
*             3. Added the new value "42" (Access Fee Amount in        !00539t09
*                Cardholder Billing Currency) to the AMT-TYP field     !00539t0A
*                in DE 54 (Additional Amounts).                        !00539t0B
*             4. Removed the VISA-PRV redefine of field 48 for usage   !00539t0C
*                15.                                                   !00539t0D
*             5. Added TRAN-FEE and TRAN-CRNCY-CDE fields to Visa      !00539t0E
*                Switch token definition.                              !00539t0F
* Dependency: Apply fixes to BAUTILS, DDLFSTF, DDLPSTKN, OKLIBTS,      !00539t0G
*             RQSTFS, RQVCOTS, SCRNVCOT, SCRNSTF, SVSTFS, VISADDLS,    !00539t0H
*             VISAEMVS, VISAFMTS, VISAG, VISALIBS, VISAMSGS, VISAS     !00539t0I
*             and VISIS. Run Make. BA10SC04 subvolume.  New files:     !00539t0J
*             STF0409M, STF0409R and STF0409S. Make the STF conversion !00539t0K
*             using STF0409M.  Run the STF conversion using STF0409R.  !00539t0L
*             Replace VISALOGM, VISAMNWD and VISAUPDT.                 !00539t0M
* Reference:  WO #081007-02                                            !00539t0N
                                                                       !00539t0O
                                                                       !00539u00
* 05AUG2009   PrasadS                                                  !00539u01
* Symptom:    Visa October 2009 Business Enhancements                  !00539u02
* Problem:    None.                                                    !00539u03
* Fix:        Added a redefine PIN-VRFY, ADDR-VRFY to EXCEPT (DE 127)  !00539u04
*             of FRQT.                                                 !00539u05
* Dependency: Apply fixes to DDLBATKN, RQRLFS, SVVSDFS, VISADDLS,      !00539u06
*             VISAEMVS, VISALIBS, VISAMSGS, VISAFMTS, VISAS and VISAG. !00539u07
*             Replace existing files VISALOGM, VISAMNWD and            !00539u08
*             VISAUPDT.  Run Make.                                     !00539u09
* Reference:  WO #090331-02                                            !00539u0A
                                                                       !00539u0B
                                                                       !00539v00
* 15AUG2010   swiftd                                                   !00539v01
* Symptom:    Visa October 2010 Business Enhancements                  !00539v02
* Problem:    None                                                     !00539v03
* Fix:        The VisaNet Interface has been modified to support the   !00539v04
*             new Visa Money Transfer Watch List Management data that  !00539v05
*             may be received in Field 48, Usage 37.  Field 48 DDLs    !00539v06
*             have been modified to account for the new field.         !00539v07
*             Fields for Field 48, Usage 37 were added to the Visa     !00539v08
*             Switch token.                                            !00539v09
* Dependency: Apply fixes to DDLBATKN, DDLPSTKN, IPF3DDLS, PSTKNCVS,   !00539v0A
*             RQVCRCS, SVVSDFS, VISADDLS, VISAFMTS, VISAG, VISALIBS,   !00539v0B
*             VISAS, VISREFRG, and VISREFRS.                           !00539v0C
*             Run Make.  Replace VISALOGM, VISAMNWD and VISAUPDT.      !00539v0D
*             Replace BAMISCTD and LCONFBA files on the BA60MISC       !00539v0E
*             subvolume.                                               !00539v0F
* Reference:  WO #100318-02                                            !00539v0G
                                                                       !00539v0H
                                                                       !00539w00
* 25FEB2011   gruberg                                                  !00539w01
* Symptom:    Visa April 2011 Business Enhancements                    !00539w02
* Problem:    None                                                     !00539w03
* Fix:        - Updated subfield comments for Field 44 to reflect      !00539w04
*               current specifications.  Added a new field to the      !00539w05
*               Visa Switch Token definition for Field 44.11           !00539w06
*               (original response code).                              !00539w07
*             - Added a comment for new amount type "95" (foreign      !00539w08
*               exchange mark up fee) in Field 54.                     !00539w09
*             - Added new subfield 19, Dynamic Currency Conversion     !00539w0A
*               Indicator, for field 126.                              !00539w0B
*             - Added a new field to the Visa Switch Token definition  !00539w0C
*               for Field 4411 (original response code).               !00539w0D
*             - Added a new field to the Visa Switch Token definition  !00539w0E
*               for Field 54 data when it contains the new amount      !00539w0F
*               type "95".                                             !00539w0G
*             - Added a new field to the Visa Switch Token definition  !00539w0H
*               for Field 102 (account identification 1).              !00539w0I
* Dependency: Apply fix to DDLBATKN.  Apply fixes to BAUTILS and       !00539w0J
*             OKLIBTS.  Apply fix to DDLSDF.  Apply fixes to           !00539w0K
*             IPF3DDLS, VISREFRG, and VISREFRS.  Replace SCRNVSDF.     !00539w0L
*             Apply fixes to RQVSDFS, SVVSDFS, VISADDLS, VISAFMTS and  !00539w0M
*             VISALIBS.  Run Make.  Replace VISAMNWD and VISAUPDT.     !00539w0N
* Reference:  WO #PR001172                                             !00539w0O
                                                                       !00539w0P
                                                                       !00539x00
* 10AUG2011   swiftd                                                   !00539x01
* Symptom:    Visa October 2011 Business Enhancements                  !00539x02
* Problem:    None                                                     !00539x03
* Fix:        The VisaNet Interface has been modified to support the   !00539x04
*             new field term-typ in the Visa Switch token. The field   !00539x05
*             will be populated by the contents of field 60.1,         !00539x06
*             and will contain a 1-digit code to identify the          !00539x07
*             basic POS electronic terminal category.                  !00539x08
* Dependency: Apply fixes to DDLPSTKN and PSTKNCVS.                    !00539x09
*             Apply fixes to RQVSDFS, SVVSDFS, VISADDLS, VISAFMTS,     !00539x0A
*             VISAG, VISALIBS, VISAS, VISREFRG and VISREFRS.           !00539x0B
*             Replace SCRNVSDF and RUNVISAR. Run Make.                 !00539x0C
*             Replace IPF3MAN, VISAMNWD and VISAUPDT.                  !00539x0D
* Reference:  WO #003261                                               !00539x0E
                                                                       !00539x0F
                                                                       !00539y00
* 20JAN2012   swiftd                                                   !00539y01
* Symptom:    BASE24 VisaNet April 2012 Business Enhancements          !00539y02
* Problem:    None                                                     !00539y03
* Fix:        Added field fee-fund-msg-fund-src-ind to the             !00539y04
*             VISA-SWI-TKN-DATA definition.                            !00539y05
* Dependency: Apply fixes to DDLBATKN, DDLPSTKN, PSTKNCVS, SVVSDFS,    !00539y06
*             VISADDLS, VISAFMTS, VISAG, VISALIBS, VISIS and VISREFRS. !00539y07
*             Replace RUNVISAR. Run Make.                              !00539y08
*             Replace IPF3MAN, VISAMNWD and VISAUPDT.                  !00539y09
* Reference:  WO #003749                                               !00539y0A
                                                                       !00539y0B
                                                                       !00539z00
* 16FEB2012   swiftd                                                   !00539z01
* Symptom:    BASE24 VisaNet CNP Reversal Support                      !00539z02
* Problem:    None                                                     !00539z03
* Fix:        Modified the PCT-VISA definition to support up to 3      !00539z04
*             occurrences of previous ILF data.                        !00539z05
* Dependency: Apply fixes to VISADDLS, VISAG, VISALIBS, VISAMSGS and   !00539z06
*             VISAS. Run Make.                                         !00539z07
*             Replace BAMISCTD, LCONFBA, VISAMNWD and VISAUPDT.        !00539z08
* Reference:  WO #004281                                               !00539z09
                                                                       !00539z0A
                                                                       !00539#00
* 15MAR2012   wielerk                                                  !00539#01
* Symptom:    0322 messages report expand failure on de-62.            !00539#02
* Problem:    VISA is passing de-62.23 and for 03xx messages, the      !00539#03
*             interface only supports de-62.2 and de-62.20.            !00539#04
* Fix:        Modified the FRQT definition to add de-62.23.            !00539#05
* Dependency: Apply fixes to VISADDLS and VISALIBS.  Run Make.         !00539#06
* Reference:  Case #1192087.                                           !00539#07
                                                                       !00539#08
                                                                       !00539$00
* 15AUG2012   saderc                                                   !00539$01
* Symptom:    BASE24 VisaNet October 2012 Business Enhancements        !00539$02
* Problem:    None                                                     !00539$03
* Fix:        Added Field 104 to the ADMIN message structure. Added    !00539$04
*             definitions for new Field 126 bits 18, 20 and 21 to the  !00539$05
*             XSEM message structure.                                  !00539$06
* Dependency: Apply fixes to BAUTILS, OKLIBTS, COBTKN, PSTKNID,        !00539$07
*             PSTKNCVS, DDLPSTKN, VISADDLS, VISAEMVS, VISAFMTS,        !00539$08
*             VISAG, VISALIBS, VISAMSGS, VISAS, VISREFRG and           !00539$09
*             VISREFRS. Run Make.                                      !00539$0A
*             Replace LCONFBA, BAMISCTD, VISALOGM, VISAMNWD and        !00539$0B
*             VISAUPDT.                                                !00539$0C
* Reference:  WO #004527                                               !00539$0D
                                                                       !00539$0E
                                                                       !00539%00
* 15FEB2013   saderc                                                   !00539%01
* Symptom:    BASE24 VisaNet April 2013 Business Enhancements          !00539%02
* Problem:    None                                                     !00539%03
* Fix:        1. Added a redefine for field 125 in the XSEM and ADMIN  !00539%04
*                definitions to accommodate field 125 in TLV format.   !00539%05
*             2. Added a redefine for field 48 in the XSEM definition  !00539%06
*                to support the additional authorization data that may !00539%07
*                be included in field 48, usage 2.                     !00539%08
* Dependency: Apply fixes to AUTHLIBS, BATKNCVS, BATKNID, BAUTILS,     !00539%09
*             COBTKN, DDLBATKN, DDLPSTKN, OKLIBTS, PSTKNCVS,           !00539%0A
*             VISADDLS, VISAEMVS, VISAFMTS, VISAG, VISALIBS,           !00539%0B
*             VISAMSGS and VISAS. Run Make.                            !00539%0C
*             Replace BAMISCTD, LCONFBA, VISALOGM, VISAMNWD            !00539%0D
*             VISAUPDT.                                                !00539%0E
* Reference:  WO #004807                                               !00539%0F
                                                                       !00539%0G
                                                                       !00539&00
* 21FEB2013   saderc                                                   !00539&01
* Symptom:    The Switch token (B0/B1) is not being formatted with     !00539&02
*             the Watch List Scoring for Enhanced Money Transfer       !00539&03
*             Original Credit Transaction.                             !00539&04
* Problem:    The interface currently uses the value "VMT" in the      !00539&05
*             field ID for field 48 (addl-data), usage 37, to identify !00539&06
*             the original credit data when moving it to the Switch    !00539&07
*             token. The value has been changed from "VMT" (Visa Money !00539&08
*             Transfer) to "OCT" (Original Credit Transaction) in      !00539&09
*             version 2 of the Visa April 2013 Business Enhancements,  !00539&0A
*             Article 3.3.                                             !00539&0B
* Fix:        The comments that reference VMT (Visa Money Transfer)    !00539&0C
*             have been changed to OCT (Original Credit Transaction).  !00539&0D
* Dependency: Apply fixes to VISADDLS and VISALIBS. Run Make.          !00539&0E
*             Replace VISAUPDT.                                        !00539&0F
* Reference:  Case #1250487                                            !00539&0G
                                                                       !00539&0H
********************************************************************  !!00540
?section hdr
?page "hdr"
                                                                       !00545
def hdr.                                                               !00546
*                                                                     !!00547
* data element 1, byte 0                                              !!00548
* Value is the length of the header.                                  !!00549
*                                                                     !!00550
  02  lgth                                pic x.                       !00551
*                                                                     !!00552
* data element 2, byte 1                                              !!00553
* Value is the header format.                                         !!00554
*                                                                     !!00555
*         1st bit = 0 - no header following this one                  !!00556
*                 = 1 - header following this one                     !!00557
*         2nd/8th bit = 0000001 - VisaNet format                      !!00558
*                                                                     !!00559
  02  frmt                                pic x.                       !00560
*                                                                     !!00561
* data element 3, byte 2                                              !!00562
* Value is the text format.                                           !!00563
*                                                                     !!00564
*         1 =  Visa ISO format                                        !!00565
*                                                                     !!00566
  02  txt-frmt                            pic x.                       !00567
*                                                                     !!00568
* data element 4, bytes 3-4                                           !!00569
* Value is the total length of this message in bytes.                 !!00570
*                                                                     !!00571
  02  msg-lgth                            pic xx.                      !00572
*                                                                     !!00573
* data element 5, bytes 5-7                                           !!00574
* Value is the destination identification field.                      !!00575
* Format is 2 digit network id and 4 digit station id.                !!00576
* 4-bit BCD (unsigned packed) in transmission                         !!00577
*                                                                     !!00578
*      station id = "nnnn"  all zeroes in outgoing requests           !!00579
*                 = station id from request src-id in responses       !!00580
*      station address                                                !!00581
*             = "nn" all zeroes in outgoing requests                  !!00582
*             = station address from request src-id in responses      !!00583
*                                                                     !!00584
  02  dest-id                             pic x(3).                    !00585
*                                                                     !!00586
* data element 6, bytes 8-10                                          !!00587
* Value is the source identification field.                           !!00588
* Format is the same as the dest-id.                                  !!00589
* 4-bit BCD (unsigned packed) in transmission                         !!00590
*                                                                     !!00591
*        station id = "nnnn"  assigned by Visa                        !!00592
*        station address = "nn" assigned by Visa                      !!00593
*                                                                     !!00594
  02  src-id                              pic x(3).                    !00595
*                                                                     !!00596
* data element 7, byte 11                                             !!00597
* Reserved for Visa network.                                          !!00598
* This field must contain all zeroes in outgoing requests, and        !!00599
* contain what was in the original request in all responses.          !!00600
*                                                                     !!00601
  02  rsvd-1                              pic x.                       !00602
*                                                                     !!00603
* data element 8, bytes 12-13                                         !!00604
* Value is BASE system control flags.                                 !!00605
* This field must contain all zeroes in outgoing requests, and        !!00606
* contain what was in the original request in all responses.          !!00607
*                                                                     !!00608
  02  base-flags                          pic xx.                      !00609
*                                                                     !!00610
* data element 9, bytes 14-16                                         !!00611
* Value is message status flags.                                      !!00612
* This field must contain zeroes in all reserved bits in outgoing     !!00613
* messages.                                                           !!00614
*                                                                     !!00615
*           used bits                                                 !!00616
*           (byte/bit)         meaning when equal to 1 (on)           !!00617
*          ------------        ----------------------------           !!00618
*             (1/8)            this is a test message                 !!00619
*             (2/1)            VDCS has settlement responsibilty      !!00620
*             (2/2)            VDCS will update totals if approved    !!00621
*             (2/3)            VDCS previously updated totals with    !!00622
*                                  this transaction, for repeats      !!00623
*             (2/4)            advice generated by STIP               !!00624
*             (2/5)            advice messages pending                !!00625
*             (2/6)            message routed to BASE from VDCS       !!00626
*             (3/1)            message returned, dest unavailable     !!00627
*                                                                     !!00628
  02  msg-flags                           pic xxx.                     !00629
  02  rsvd-2.                                                          !00630
*                                                                     !!00631
* data element 10, byte 17                                            !!00632
* Value is batch number in VDCS message.                              !!00633
* This field must contain all zeroes in outgoing requests, and        !!00634
* contain what was in the original request in all responses.          !!00635
*                                                                     !!00636
      04  batch-num                       pic x.                       !00637
*                                                                     !!00638
* data element 11, bytes 18-20                                        !!00639
* Reserved for VDCS network use.                                      !!00640
* This field must contain all zeroes in outgoing requests, and        !!00641
* contain what was in the original request in all responses.          !!00642
*                                                                     !!00643
      04  vdcs-11                         pic xxx.                     !00644
                                                                       !00645
  02  rsvd-3  redefines  rsvd-2.                                       !00646
*                                                                     !!00647
* data element 10, byte 17-18                                         !!00648
* Reserved for BASE I network use.                                    !!00649
* This field must contain all zeroes in outgoing requests, and        !!00650
* contain what was in the original request in all responses.          !!00651
*                                                                     !!00652
      04  base-10                         pic xx.                      !00653
*                                                                     !!00654
* data element 11, bytes 18-20                                        !!00655
* Reserved for BASE I network use.                                    !!00656
* This field must contain all zeroes in outgoing requests, and        !!00657
* contain what was in the original request in all responses.          !!00658
*                                                                     !!00659
      04  base-11                         pic xx.                      !00660
*                                                                     !!00661
* data element 12, byte 21                                            !!00662
* Reserved for VisaNet network use.                                   !!00663
* This field must contain all zeroes in outgoing requests, and        !!00664
* contain what was in the original request in all responses.          !!00665
*                                                                     !!00666
  02  rsvd-4                              pic x.                       !00667
*                                                                     !!00668
* data element 13, bytes 22-23                                        !!00669
* Value is a bit map.                                                 !!00670
* This field's presence means this a reject header and an entire      !!00671
* rejected message follows in the text ( header + text ), this        !!00672
* field must not be present in an outgoing message.                   !!00673
*                                                                     !!00674
  02  bit-map                             pic xx.                      !00675
*                                                                     !!00676
* data element 14, bytes 24-25                                        !!00677
* Value is a reject code.                                             !!00678
* 4-bit BCD (unsigned packed)                                         !!00679
*                                                                     !!00680
  02  reject-cde                            pic xx.                    !00681
*                                                                     !!00682
* data element 15, bytes 26-29                                        !!00683
* Reserved for BASE I network use.                                    !!00684
* This field must be omitted in all outgoing requests, and            !!00685
* contain what was in the original request in all responses.          !!00686
* 4-bit BCD (unsigned packed)                                         !!00687
*                                                                     !!00688
  02  rsvd-5                              pic x(4).                    !00689
*                                                                     !!00690
* data element 16, bytes 30-31                                        !!00691
* Reserved for BASE I network use.                                    !!00692
* This field must be omitted in all outgoing requests, and            !!00693
* contain what was in the original request in all responses.          !!00694
* 4-bit BCD (unsigned packed)                                         !!00695
*                                                                     !!00696
  02  rsvd-6                              pic x(4).                    !00697
                                                                       !00698
end                                                                    !00699
                                                                       !00700
?section nmm
?page "nmm"
def nmm.                                                               !00705
*                                                                     !!00706
* header                                                              !!00707
* bit map position = N/A                                              !!00708
*                                                                     !!00709
  02  hdr                                 type *.                      !00710
*                                                                     !!00711
* message type                                                        !!00712
* bit map position = N/A                                              !!00713
* 4-bit BCD (unsigned packed) in transmission                         !!00714
*                                                                     !!00715
*            0800 = network management request                        !!00716
*            0801 = network management request repeat                 !!00717
*            0810 = network management request response               !!00718
*                                                                     !!00719
  02  typ                                 pic 9(4).                    !00720
*                                                                     !!00721
* primary bit map                                                     !!00722
* Consisting of 64 bits numbered from the left starting at 1.         !!00723
* bit map position = N/A                                              !!00724
*                                                                     !!00725
  02  pbit-map                            pic x(8).                    !00726
*                                                                     !!00727
* secondary bit map                                                   !!00728
* Consisting of 64 bits numbered from the left starting at 65.        !!00729
* bit map position = 1                                                !!00730
*                                                                     !!00731
  02  sbit-map                            pic x(8).                    !00732
*                                                                     !!00733
* transmission date/time  (MMDDHHMMSS)  GMT ( Grenich mean time )     !!00734
* bit map position = 7                                                !!00735
* 4-bit BCD (unsigned packed) in transmission                         !!00736
*                                                                     !!00737
  02  tran-dat-tim                        pic 9(10).                   !00738
*                                                                     !!00739
* trace number                                                        !!00740
* bit map position = 11                                               !!00741
* 4-bit BCD (unsigned packed) in transmission                         !!00742
*                                                                     !!00743
  02  trace-num                           pic 9(6).                    !00744
*                                                                     !!00745
* forwarding institution identification code                          !!00746
* bit map position = 33                                               !!00747
* 4-bit BCD (unsigned packed) in transmission                         !!00748
*                                                                     !!00749
*          len is the number of digits in cde                         !!00750
*          cde must be the Visa assigned BIN                          !!00751
*                                                                     !!00752
  02  fwd-inst.                                                        !00753
      04  lgth                            pic 99.                      !00754
      04  cde                             pic x(11).                   !00755
*                                                                     !!00756
* retrieval reference number  (MMDDnnnnnnnn)                          !!00757
* bit map position = 37                                               !!00758
* This field only sent in requests by a BASE node.                    !!00759
*                                                                     !!00760
  02  ref-num                             pic x(12).                   !00761
*                                                                     !!00762
* response code                                                       !!00763
* bit map position = 39                                               !!00764
                                                                       !00764q00
* This field may be added by the VIC and used to aknowledge that       !00764q01
* the 0800 NMM request was received and processed.                     !00764q02
*                                                                      !00764q03
*            00 = accepted and processed                               !00764q04
*                                                                      !00764q05
* Additional values that may be sent in response to a VDCS GIV         !00764q06
* totals request:                                                      !00764q07
*                                                                      !00764q08
*            87 = totaling has stopped for the day                     !00764q09
*            88 = VisaNet cannot provide totals now                    !00764q0A
                                                                       !00764q0B
                                                                       !00765q00
                                                                       !00765q01
                                                                       !00765q02
*                                                                     !!00770
  02  resp-cde                            pic x(2).                    !00771
                                                                       !00772
*                                                                     !!00773
* additional data, private                                            !!00774
* bit map position = 48                                               !!00775
*                                                                     !!00776
  02  addl-data.                                                       !00777
      04  lgth                            pic 999.                     !00778
      04  id                              pic x.                       !00779
      04  check-digits                    pic x(4).                    !00780
*                                                                     !!00781
* security related control information                                !!00782
* bit map position = 53                                               !!00783
* 4-bit BCD (unsigned packed) in transmission                         !!00784
*                                                                     !!00785
*          this field contains the following four sub-elements:       !!00786
*              element           digits   description                 !!00787
*              -------           ------   -----------                 !!00788
*          security format code    2       20 - zone encryption       !!00789
*          pin encryption id       2       01 - Ansi DES              !!00790
*          pin block format code   2       01 - Pin/Pan excluding     !!00791
*                                               check digit           !!00792
*                                          02 - pin size char &       !!00793
*                                               pin left justified    !!00794
*                                               zero filled for 6 &   !!00795
*                                               decimal pad digit     !!00796
*                                          03 - Pin/Pad               !!00797
*                                          04 - Pin/Pan using left    !!00798
*                                               most pan digits       !!00799
*          zone key index        1 or 2    1 or 01 - zone key 1 used  !!00800
*          (1 digit in BASE,                    to encrypt pin block  !!00801
*           2 digits in VDCS )             2 or 02 - zone key 2 used  !!00802
*                                               to encrypt pin block  !!00803
*          filler                8 or 9   zero filled                 !!00804
*                                                                     !!00805
  02  sec-info                            pic x(16).                   !00806
*                                                                     !!00807
* vdcs private                                                        !!00808
* bit map position = 63                                               !!00809
* 4-bit BCD (unsigned packed) in transmission                         !!00810
*                                                                     !!00811
*          len is the number of bytes after bit-map, after packing    !!00812
*          bit map (1st byte) specifies which subfield is in data     !!00813
*              bit 1 = 1 - network id code is present (4 digits)      !!00814
*              bits 2-8 are always zero                               !!00815
*              2nd and 3rd bytes all zero                             !!00816
*          info contains the network id                               !!00817
*                                                                     !!00818
  02  vdcs-private.                                                    !00819
      04  lgth                            pic 99.                      !00820
      04  bit-map                         pic x(3).                    !00821
      04  ntwk-id-cde                     pic x(4).                    !00822
*                                                                     !!00823
* network management information code                                 !!00824
* bit map position = 70                                               !!00825
* 4-bit BCD (unsigned packed) in transmission                         !!00826
*                                                                     !!00827
*            001 = sign on, start receipt of normal messages          !!00828
*            002 = sign off, stop receipt of normal messages          !!00829
*            062 = enter SI mode request; BASE                        !!00830
*            063 = exit SI mode request; BASE                         !!00831
*            064 = sign on, start receipt of advice messages; BASE    !!00832
*            065 = sign off, stop receipt of advice messages; BASE    !!00833
*            068 = sign on, start receipt of advice messages; VDCS    !!00834
*            069 = sign off, stop receipt of advice messages; VDCS    !!00835
                                                                       !00835X00
*            071 = sign on, start receipt of normal messages;          !00835X01
*                  BASE I and SMS                                      !00835X02
*            072 = sign off; BASE I and SMS                            !00835X03
*            078 = start transmission of both BASE I and SMS advices   !00835X04
*            079 = stop transmission of BASE I and SMS advices         !00835X05
*            081 = sign on to V.I.P. for SMS processing only           !00835X06
*            082 = sign off from V.I.P., to terminate SMS processing   !00835X07
*            088 = start transmission of SMS advices                   !00835X08
*            089 = stop transmission of SMS advices                    !00835X09
                                                                       !00835X0A
*            101 = key change request ( for future use )              !!00836
                                                                       !00836X00
*            160 = request for new acquirer working key                !00836X01
*                  (acquirer to switch)                                !00836X02
*            161 = request for new issuer working key                  !00836X03
*                  (issuer to switch)                                  !00836X04
*            162 = deliver new acquirer working key                    !00836X05
*                  (switch to acquirer)                                !00836X06
*            163 = deliver new issuer working key (switch to issuer)   !00836X07
*            280 = request for previous days totals                    !00836X08
                                                                       !00836X09
                                                                       !00837X00
                                                                       !00837X01
*            301 = echo test                                          !!00838
*                                                                     !!00839
  02  nmm-info-cde                        pic 9(3).                    !00840
                                                                       !00841q00
                                                                       !00841q01
                                                                       !00841q02
*                                                                     !!00847
* Message Security Code                                               !!00848
* bit map position = 96                                               !!00849
* This field will be used for the new working key.  The field will be !!00850
* present in all 0800 messages with network management codes of 162   !!00851
* and 163.                                                            !!00852
*                                                                     !!00853
  02  msg-sec-cde.                                                     !00854
      04  key                             pic x(16).                   !00855
*                                                                     !!00856
* settlement institution identification code                          !!00857
* bit map position = 99                                               !!00858
* 4-bit BCD (unsigned packed) in transmission                         !!00859
* This field used only on reconciliation data requests by a VDCS node.!!00860
*                                                                     !!00861
*        len is the number of digits in cde                           !!00862
*        cde is the Visa BIN assigned to the institution              !!00863
*                                                                     !!00864
  02  setl-inst-id.                                                    !00865
      04  lgth                            pic 99.                      !00866
      04  cde                             pic x(11).                   !00867
                                                                       !00867P00
*                                                                      !00867P01
* Extended Encryption Key                                              !00867P02
* bit map position = 105                                               !00867P03
* This field will be used for the working key when double length keys  !00867P04
* are passed.  The field will be present in 0800 messages with network !00867P05
* management codes of 162 and 163 when double length keys are passed.  !00867P06
*                                                                      !00867P07
  02  extnd-encrypt-key                   pic x(32).                   !00867P08
                                                                       !00867P09
end                                                                    !00868
                                                                       !00869
?section frqt
?page "frqt"
def frqt.                                                              !00874
*                                                                     !!00875
* header                                                              !!00876
* bit map position = N/A                                              !!00877
*                                                                     !!00878
  02  hdr                                 type *.                      !00879
*                                                                     !!00880
* message type                                                        !!00881
* bit map position = N/A                                              !!00882
* 4-bit BCD (unsigned packed) in transmission                         !!00883
*                                                                     !!00884
*            0302 = card issuer file update/inquiry request           !!00885
*            0310 = card issuer file update/inquiry response; BASE    !!00886
*            0312 = card issuer file update/inquiry response; VDCS    !!00887
*            0322 = card issuer file update advice; BASE              !!00888
*                                                                     !!00889
  02  typ                                 pic 9(4).                    !00890
*                                                                     !!00891
* primary bit map                                                     !!00892
* bit map position = N/A                                              !!00893
* Consists of 64 bits numbered from the left starting at 1.           !!00894
*                                                                     !!00895
  02  pbit-map                            pic x(8).                    !00896
*                                                                     !!00897
* secondary bit map                                                   !!00898
* bit map position = 1                                                !!00899
* Consists of 64 bits numbered from the left starting at 65.          !!00900
*                                                                     !!00901
  02  sbit-map                            pic x(8).                    !00902
*                                                                     !!00903
* primary account number                                              !!00904
* bit map position = 2                                                !!00905
* 4-bit BCD (unsigned packed) in transmission                         !!00906
* This field is only used in a file inquiry request and then only     !!00907
* when the pan does not begin with "59".  In that case the pan-ext    !!00908
* field, bit map position 34, is sent.                                !!00909
*                                                                     !!00910
*        len is number of digits in num                               !!00911
*        num subfield is the customer pan                             !!00912
*                                                                     !!00913
  02  pan.                                                             !00914
      04  lgth                            pic 99.                      !00915
      04  num                             pic x(19).                   !00916
                                                                       !00916V00
*                                                                      !00916V01
* transaction amount  (dollars and cents)                              !00916V02
* bit map position = 4                                                 !00916V03
* 4-bit BCD (unsigned packed) in transmission                          !00916V04
*                                                                      !00916V05
* If sent, this field will contain the specific value that the issuer  !00916V06
* has identified as the stop payment amount.                           !00916V07
*                                                                      !00916V08
  02  tran-amt                            pic 9(12).                   !00916V09
                                                                       !00916V0A
                                                                       !00916V0B
*                                                                     !!00917
* transmission date/time  (MMDDHHMMSS)  GMT ( Grenich mean time )     !!00918
* bit map position = 7                                                !!00919
* 4-bit BCD (unsigned packed) in transmission                         !!00920
*                                                                     !!00921
  02  tran-dat-tim                        pic 9(10).                   !00922
*                                                                     !!00923
* trace number                                                        !!00924
* bit map position = 11                                               !!00925
* 4-bit BCD (unsigned packed) in transmission                         !!00926
*                                                                     !!00927
  02  trace-num                           pic x(6).                    !00928
                                                                       !00928l00
*                                                                      !00928l01
* merchant's type                                                      !00928l02
* bit map position = 18                                                !00928l03
* 4-bit BCD (unsigned packed) in transmission                          !00928l04
*                                                                      !00928l05
  02  merch-typ                           pic 9(4).                    !00928l06
                                                                       !00928l07
                                                                       !00928V00
*                                                                      !00928V01
* acquiring institution country code                                   !00928V02
* bit map position = 19                                                !00928V03
* 4-bit BCD (unsigned packed) in transmission                          !00928V04
*                                                                      !00928V05
* This field should contain the acquiring institution country code     !00928V06
* from a prior recurring or installment payment transaction for the    !00928V07
* cardholder.                                                          !00928V08
*                                                                      !00928V09
  02  acq-cntry-cde                       pic 9(3).                    !00928V0A
                                                                       !00928V0B
                                                                       !00928V0C
*                                                                     !!00929
* primary account number, extended country code                       !!00930
* bit map position = 20                                               !!00931
* 4-bit BCD (unsigned packed) in transmission                         !!00932
*                                                                     !!00933
  02  pan-cntry-cde                       pic 9(3).                    !00934
*                                                                     !!00935
* acquiring institution identification code                           !!00936
* bit map position = 32                                               !!00937
* 4-bit BCD (unsigned packed) in transmission                         !!00938
*                                                                     !!00939
*          len is the number of digits in the code                    !!00940
*          code must be the Visa assigned BIN                         !!00941
*                                                                     !!00942
  02  acq-inst.                                                        !00943
      04  lgth                            pic 99.                      !00944
      04  cde                             pic x(11).                   !00945
*                                                                     !!00946
* primary account number, extended                                    !!00947
* bit map position = 34                                               !!00948
* 4-bit BCD (unsigned packed) in transmission                         !!00949
* This field is only used in a file inquiry request and then only     !!00950
* when the pan begins with "59".                                      !!00951
*                                                                     !!00952
*        len is number of digits in num                               !!00953
*        num subfield is the customer pan                             !!00954
*                                                                     !!00955
  02  pan-ext.                                                         !00956
      04  lgth                            pic 99.                      !00957
      04  num                             pic x(28).                   !00958
*                                                                     !!00959
* retrieval reference number  (MMDDnnnnnnnn)                          !!00960
* bit map position = 37                                               !!00961
* This field only sent in requests by a BASE node.                    !!00962
*                                                                     !!00963
  02  ref-num                             pic x(12).                   !00964
*                                                                     !!00965
* response code                                                       !!00966
* bit map position = 39                                               !!00967
* Ttis field only sent in request responses.                          !!00968
*                                                                     !!00969
  02  resp-cde                            pic x(2).                    !00970
                                                                       !00970V00
*                                                                      !00970V01
* card acceptor identification code                                    !00970V02
* bit map position = 42                                                !00970V03
*                                                                      !00970V04
* This field contains the acquirer assigned merchant id for which      !00970V05
* recurring or installment payment transactions are to be stopped.     !00970V06
*                                                                      !00970V07
  02  crd-acpt-id-cde                     pic x(15).                   !00970V08
*                                                                      !00970V09
* card acceptor location                                               !00970V0A
* bit map position = 43                                                !00970V0B
*                                                                      !00970V0C
* This field contains the following four sub-elements:                 !00970V0D
*        regulation E location                                         !00970V0E
*        city                                                          !00970V0F
*        country                                                       !00970V0G
*                                                                      !00970V0H
  02  crd-acpt.                                                        !00970V0I
      04  reg-e-loc                       pic x(25).                   !00970V0J
      04  city                            pic x(13).                   !00970V0K
      04  cntry                           pic x(2).                    !00970V0L
                                                                       !00970V0M
*                                                                     !!00971
* additional data                                                     !!00972
* bit map position = 48                                               !!00973
* 4-bit BCD (unsigned packed) in transmission                         !!00974
* This field only sent when resp-cde = "06".                          !!00975
*                                                                     !!00976
*        len is number of digits in num                               !!00977
*        num subfield in                                              !!00978
*                inquiry response is reject code                      !!00979
*                update response is                                   !!00980
*                    file error code   or                             !!00981
*                    account error code, account len, account num     !!00982
*                                                                     !!00983
  02  addl-data.                                                       !00984
      04  lgth                            pic 99.                      !00985
      04  num                             pic x(29).                   !00986
                                                                       !00986V00
*                                                                      !00986V01
*   Payment Service Field                                              !00986V02
*   bit map position = 62                                              !00986V03
*                                                                      !00986V04
  02  payment-srv-fld.                                                 !00986V05
      04  lgth                            pic 99.                      !00986V06
      04  bit-map                         pic x(8).                    !00986V07
*                                                                      !00986V08
* A code assigned by Visa to a transaction which has met Payment       !00986V09
* Service 2000 edits.  This field will remain with a transaction       !00986V0A
* throughout it's life cycle.  This field will be returned from Visa   !00986V0B
* on an add to the Stop Payment File.  It must be used on subsequent   !00986V0C
* messages to delete, replace or inquire the record for this stop      !00986V0D
* payment order.                                                       !00986V0E
*                                                                      !00986V0F
* Subfield 2                                                           !00986V0G
*                                                                      !00986V0H
      04  tran-id                         pic 9(15).                   !00986V0I
*                                                                      !00986V0J
* Merchant Verification Value (MVV).                                   !00986V0K
*                                                                      !00986V0L
* The MVV consists of 10 hex digits which are sent BCD.                !00986V0M
* The first 6 hex digits are assigned by Visa to a                     !00986V0N
* participating merchant, the last 4 are defined in                    !00986V0O
* conjunction with the acquirer.  If present, it must be the           !00986V0P
* MVV for the merchant for which recurring or installment              !00986V0Q
* payment transactions will be stopped.                                !00986V0R
*                                                                      !00986V0S
* Subfield 20                                                          !00986V0T
*                                                                      !00986V0U
      04  mrch-vrfcn-val                  pic x(10).                   !00986V0V
                                                                       !00986#00
                                                                       !00986#01
                                                                       !00986#02
                                                                       !00986V0X
                                                                       !00986#03
*                                                                      !00986#04
* Card results - inserted by Visa.  Indicates the card program that    !00986#05
* the card used in the transaction is signed up for.  This is a two    !00986#06
* byte field.  If the first byte is A, B, C, or D, this value must be  !00986#07
* in the sixth byte of DE 38.                                          !00986#08
*                                                                      !00986#09
*     valid values for first byte:                                     !00986#0A
*         A         =  Visa traditional                                !00986#0B
*         B         =  Visa traditional rewards                        !00986#0C
*         C         =  Visa signature                                  !00986#0D
*         D         =  Visa infinite                                   !00986#0E
*         E-Z, 0-9  =  Reserved                                        !00986#0F
*                                                                      !00986#0G
*     valid values for second byte:                                    !00986#0H
*         Space, A-Z, 0-9 =  Reserved                                  !00986#0I
*                                                                      !00986#0J
* Subfield 23                                                          !00986#0K
*                                                                      !00986#0L
      04  crd-rslts                       pic x(2).                    !00986#0M
                                                                       !00986#0N
                                                                       !00986#0O
                                                                       !00986#0P
                                                                       !00986#0Q
*                                                                     !!00987
* vdcs private                                                        !!00988
* bit map position = 63                                               !!00989
* 4-bit BCD (unsigned packed) in transmission                         !!00990
*                                                                     !!00991
*          len is the number of bytes in after bit-map, after packing !!00992
*          bit map (1st byte) specifies which subfield is in data     !!00993
*              bit 1 = 1 - network id code is present (4 digits)      !!00994
*              bits 2-8 are always zero                               !!00995
*              2nd and 3rd bytes all zero                             !!00996
*          info contains the network id                               !!00997
*                                                                     !!00998
  02  vdcs-private.                                                    !00999
      04  lgth                            pic 99.                      !01000
      04  bit-map                         pic x(3).                    !01001
      04  ntwk-id-cde                     pic x(4).                    !01002
*                                                                     !!01003
* purge date                                                          !!01004
* bit map position = 73                                               !!01005
* Numeric - 4 bit BCD (unsigned packed) in transmission               !!01006
* In 302 file updates, this field is used for the purge date of the   !!01007
* cardholder record.  Required if file update code is 1 or 2 (add or  !!01008
* change.  The date must be YYMMDD.  If DD = 00, the purge date is    !!01009
* the last day of the month.  If date = 999900, do not purge.         !!01010
*                                                                     !!01011
  02  purge-dat                          pic 9(6).                     !01012
*                                                                     !!01013
* file update code                                                    !!01014
* bit map position = 91                                               !!01015
* This field only sent in file inquiry requests.                      !!01016
*                                                                     !!01017
*            5 = inquiry                                              !!01018
*                                                                     !!01019
  02  file-updt-cde                       pic x.                       !01020
*                                                                     !!01021
* file security code                                                  !!01022
* bit map position = 92                                               !!01023
* This field only sent if not spaces.                                 !!01024
*                                                                     !!01025
  02  file-sec-cde                        pic x(2).                    !01026
*                                                                     !!01027
* file name                                                           !!01028
* bit map position = 101                                              !!01029
*                                                                     !!01030
*        len is number of digits in name                              !!01031
*        name subfield is                                             !!01032
*                                                                     !!01033
*            E4               VDCS exception file                     !!01034
*            C4               VDCS cardholder verification file       !!01035
*            E2               BASE exception file                     !!01036
*            C2               BASE cardholder verification file       !!01037
                                                                       !01037r00
*            E3               BASE and VDCS cardholder verification    !01037r01
*                             files                                    !01037r02
                                                                       !01037r03
*                                                                     !!01038
  02  file-name.                                                       !01039
      04  lgth                            pic 99.                      !01040
      04  nam                             pic x(17).                   !01041
                                                                       !01041V00
*                                                                      !01041V01
* account identification 1                                             !01041V02
* bit map position = 102                                               !01041V03
*                                                                      !01041V04
*        len is the number of bytes in num                             !01041V05
*        num is the "FROM" account number                              !01041V06
*                                                                      !01041V07
  02  acct-id1.                                                        !01041V08
      04  lgth                            pic 99.                      !01041V09
      04  num                             pic x(28).                   !01041V0A
*                                                                      !01041V0B
*   account identification 2                                           !01041V0C
*   bit map position = 103                                             !01041V0D
*                                                                      !01041V0E
*        len is the number of bytes in num                             !01041V0F
*        num is the "TO" account number                                !01041V0G
*                                                                      !01041V0H
  02  acct-id2.                                                        !01041V0I
      04  lgth                            pic 99.                      !01041V0J
      04  num                             pic x(28).                   !01041V0K
                                                                       !01041V0L
*                                                                     !!01042
* issuing institution identification code                             !!01043
* EBCDIC in transmission                                              !!01044
* bit map position = 121                                              !!01045
*                                                                     !!01046
  02  iss-inst-id.                                                     !01047
      04  lgth                            pic 99.                      !01048
      04  cde                             pic x(11).                   !01049
*                                                                     !!01050
* file record data                                                    !!01051
* bit map position = 127                                              !!01052
*                                                                     !!01053
*            len is the number of bytes after len, after packing      !!01054
*            data - data related to addition, change, or deletion     !!01055
*                   of record in the file in fname field, for update  !!01056
*                 - record already on file, for inquiry response      !!01057
*                                                                     !!01058
  02  file-rec.                                                        !01059
      04  lgth                            pic 99.                      !01060
      04  except.                                                      !01061
          06  action-cde                  pic x(2).                    !01062
          06  region-cde                  pic x(9).     !BASE format  !!01063
          06  spending-amt                pic x(6).     !VDCS format  !!01064
          06  spending-cnt                pic x(2).                    !01065
                                                                       !01065V00
          06  filler                      pic x(55).                   !01065V01
                                                                       !01065V02
                                                                       !01066V00
                                                                       !01066V01
      04  verify  redefines except.                                    !01067
          06  algo-id                     pic x(2).                    !01068
          06  pvki                        pic x.                       !01069
          06  pvv                         pic x(4).                    !01070
                                                                       !01071
*         Required for Address Verification if file update code is    !!01072
*         "1" or "2".  Contains up to 9 digits of cardholder's zip    !!01073
*         code, left-justified and blank-filled.                      !!01074
*                                                                     !!01075
          06  zip-cde                     pic x(9).                    !01076
*                                                                     !!01077
*         Required for Address Verification if file update code is    !!01078
*         "1" or "2".  Contains first 5 numeric characters of         !!01079
*         cardholder's address, left-justified and blank-filled.      !!01080
*                                                                     !!01081
          06  avv                         pic x(5).                    !01082
                                                                       !01082V00
          06  filler                      pic x(53).                   !01082V01
*                                                                      !01082V02
*     The following redefine is used for stop recurring payment        !01082V03
*     transactions.  The format used is TLV.                           !01082V04
*                                                                      !01082V05
      04  stp-recur-pmnt redefines except.                             !01082V06
*                                                                      !01082V07
*         The dataset ID value is hexadecimal 69.  It is only one byte !01082V08
*         when sent.  Dataset length is variable and is set to         !01082V09
*         include all TAG fields that are being sent.                  !01082V0A
*                                                                      !01082V0B
          06  dataset-id                  pic x(2).                    !01082V0C
          06  dataset-lgth                pic 9(2).                    !01082V0D
*                                                                      !01082V0E
*         tag = DF11                                                   !01082V0F
*                                                                      !01082V0G
          06  typ.                                                     !01082V0H
              08  tag                     pic x(4).                    !01082V0I
              08  lgth                    pic 9(2).                    !01082V0J
              08  tag-data                pic xx.                      !01082V0K
*                                                                      !01082V0L
*         tag = DF12                                                   !01082V0M
*                                                                      !01082V0N
          06  crdhldr-nam.                                             !01082V0O
              08  tag                     pic x(4).                    !01082V0P
              08  lgth                    pic 9(2).                    !01082V0Q
              08  tag-data                pic x(23).                   !01082V0R
*                                                                      !01082V0S
*         tag = DF13                                                   !01082V0T
*                                                                      !01082V0U
          06  mrch-acct-num.                                           !01082V0V
              08  tag                     pic x(4).                    !01082V0W
              08  lgth                    pic 9(2).                    !01082V0X
              08  tag-data                pic x(27).                   !01082V0Y
                                                                       !01082V0Z
                                                                       !01082u00
      04  pin-vrfy  redefines except.                                  !01082u01
          06  algo-id                     pic x(2).                    !01082u02
          06  pvki                        pic x.                       !01082u03
          06  pvv                         pic x(4).                    !01082u04
          06  user-fld-aci-pin-vrfy       pic x(67).                   !01082u05
                                                                       !01082u06
      04  addr-vrfy  redefines except.                                 !01082u07
*                                                                      !01082u08
*         Required for Address Verification if file update code is     !01082u09
*         "1" or "2".  Contains up to 9 digits of cardholder's zip     !01082u0A
*         code, left-justified and blank-filled.                       !01082u0B
*                                                                      !01082u0C
          06  zip-cde                     pic x(9).                    !01082u0D
*                                                                      !01082u0E
*         Required for Address Verification if file update code is     !01082u0F
*         "1" or "2".  Contains first 5 numeric characters of          !01082u0G
*         cardholder's address, left-justified and blank-filled.       !01082u0H
*                                                                      !01082u0I
          06  avv                         pic x(5).                    !01082u0J
          06  user-fld-aci-addr-vrfy      pic x(60).                   !01082u0K
                                                                       !01082u0L
end                                                                    !01083
                                                                       !01084
?section xsem
?page "xsem"
def xsem.                                                              !01089
**********************************************************************!!01090
*                                                                    *!!01091
*         START OF MANDATORY FIELDS TO BE LOGGED TO THE ILF          *!!01092
*                                                                    *!!01093
**********************************************************************!!01094
*                                                                     !!01095
* header                                                              !!01096
* bit map position = N/A                                              !!01097
*                                                                     !!01098
  02  hdr                                 type *.                      !01099
*                                                                     !!01100
* message type                                                        !!01101
* bit map position = N/A                                              !!01102
* 4-bit BCD (unsigned packed) in transmission                         !!01103
*                                                                     !!01104
*            0100 = pre-authorization/authorization request           !!01105
*            0101 = pre-authorization/authorization request repeat    !!01106
*            0102 = authorization completion confirmation             !!01107
*            0108 = pre-authorization response advice                 !!01108
*            0110 = 0100, 0101 or 0108 response                       !!01109
*            0120 = pre-authorization/authorization advice            !!01110
*            0130 = pre-authorization/authorization advice response   !!01111
                                                                       !01112
*            0200 = financial request                                 !!01113
*            0201 = financial request repeat                          !!01114
*            0208 = financial response advice                         !!01115
*            0210 = 0200, 0201, or 0208 response                      !!01116
*            0220 = financial advice                                  !!01117
*                 = representation                                    !!01118
*                 = fee collection advice                             !!01119
*                 = funds disbursement advice                         !!01120
*            0221 = 0220 repeat                                       !!01121
*            0228 = financial advice response advice                  !!01122
*                 = representation response advice                    !!01123
*            0230 = 0220, 0221 or 0228 response                       !!01124
*            0282 = representment status advice                       !!01125
*            0292 = representment status advice response              !!01126
                                                                       !01127
*            0400 = reversal request                                  !!01128
*            0401 = reversal request repeat                           !!01129
*            0408 = reversal response advice                          !!01130
*            0410 = 0400, 0401, 0408 response                         !!01131
*            0420 = reversal advice                                   !!01132
*            0421 = reversal advice repeat                            !!01133
*            0422 = chargeback                                        !!01134
*            0423 = chargeback repeat                                 !!01135
*            0428 = reversal advice response advice                   !!01136
*            0429 = chargeback response advice                        !!01137
*            0430 = 0420, 0421, or 0429 response                      !!01138
*            0432 = 0422, 0423, or 0428 response                      !!01139
*            0480 = chargeback status advice                          !!01140
*            0490 = chargeback status advice response                 !!01141
*                                                                     !!01142
  02  typ                                 pic 9(4).                    !01143
*                                                                     !!01144
* primary bit map                                                     !!01145
* Consisting of 64 bits numbered from the left starting at 1.         !!01146
* bit map position = N/A                                              !!01147
*                                                                     !!01148
  02  pbit-map                            pic x(8).                    !01149
*                                                                     !!01150
* secondary bit map                                                   !!01151
* Consisting of 64 bits numbered from the left starting at 65.        !!01152
* bit map position = 1                                                !!01153
*                                                                     !!01154
  02  sbit-map                            pic x(8).                    !01155
                                                                       !01155L00
* tertiary bit map                                                     !01155L01
* Consisting of 64 bits numbered from the left starting at 129.        !01155L02
* bit map position = 65                                                !01155L03
*                                                                      !01155L04
  02  tbit-map                            pic x(8).                    !01155L05
                                                                       !01155L06
*                                                                     !!01156
* primary account number                                              !!01157
* bit map position = 2                                                !!01158
* 4-bit BCD (unsigned packed) in transmission                         !!01159
*                                                                     !!01160
*            len is the number of digits in num                       !!01161
*            num is the customers primary account number              !!01162
*                                                                     !!01163
  02  pan.                                                             !01164
      04  lgth                            pic 99.                      !01165
      04  num                             pic x(19).                   !01166
*                                                                     !!01167
* processing code                                                     !!01168
* bit map position = 3                                                !!01169
* 4-bit BCD (unsigned packed) in transmission                         !!01170
*                                                                     !!01171
*       positions 1-2  transaction code                               !!01172
*                                                                     !!01173
*          00 = Goods or service purchase                             !!01174
*          01 = Withdrawal/cash advance                               !!01175
*          02 = Adjustment (debit)                                    !!01176
*          03 = Check guarantee                                       !!01177
                                                                       !01177N00
*          04 = Check verification with conversion                     !01177N01
                                                                       !01177Q00
*          10 = Funding transaction                                    !01177Q01
                                                                       !01177Q02
*          18 = Check conversion only                                  !01177N02
                                                                       !01177N03
*          19 = Fee collection                                        !!01178
*          20 = Return                                                !!01179
*          22 = Adjustment (credit)                                   !!01180
                                                                       !01180Q00
*          26 = Cardholder funds transfer                              !01180Q01
                                                                       !01180Q02
*          29 = Funds disbursement                                    !!01181
*          30 = Available funds inquiry                               !!01182
                                                                       !01182e00
*          39 = Eligibility inquiry                                    !01182e01
                                                                       !01182e02
*          40 = Cardholder accounts transfer                          !!01183
*                                                                     !!01184
*       positions 3-4  "FROM" account affected in transaction         !!01185
*                                                                     !!01186
*          00 = Not applicable or not specified                       !!01187
*          10 = Savings account                                       !!01188
*          20 = Checking account                                      !!01189
*          30 = Credit card account                                   !!01190
*          40 = "Universal" account                                   !!01191
*                                                                     !!01192
*       positions 5-6  "TO" account affected in transaction           !!01193
*                                                                     !!01194
*          00 = Not applicable or not specified                       !!01195
*          10 = Savings account                                       !!01196
*          20 = Checking account                                      !!01197
*          30 = Credit card account                                   !!01198
*          40 = "Universal" account                                   !!01199
*                                                                     !!01200
  02  proc-cde                            pic x(6).                    !01201
*                                                                     !!01202
* transaction amount  (dollars and cents)                             !!01203
* bit map position = 4                                                !!01204
* 4-bit BCD (unsigned packed) in transmission                         !!01205
*                                                                     !!01206
  02  tran-amt                            pic 9(12).                   !01207
*                                                                     !!01208
* transmission date/time  (MMDDHHMMSS)  GMT ( Grenich mean time )     !!01209
* bit map position = 7                                                !!01210
* 4-bit BCD (unsigned packed) in transmission                         !!01211
*                                                                     !!01212
  02  tran-dat-tim                        pic 9(10).                   !01213
*                                                                     !!01214
* conversion rate, card issuer                                        !!01215
* bit map position = 10                                               !!01216
* 4-bit BCD (unsigned packed) in transmission                         !!01217
*                                                                     !!01218
*          digit 1 = position to move decimal point from right        !!01219
*          digits 2-8 = the conversion rate                           !!01220
*                                                                     !!01221
  02  conv-rate-crd-iss                   pic 9(8).                    !01222
*                                                                     !!01223
* trace number                                                        !!01224
* bit map position = 11                                               !!01225
* 4-bit BCD (unsigned packed) in transmission                         !!01226
*                                                                     !!01227
  02  trace-num                           pic 9(6).                    !01228
*                                                                     !!01229
* transaction local time  HHMMSS                                      !!01230
* bit map position = 12                                               !!01231
* 4-bit BCD (unsigned packed) in transmission                         !!01232
*                                                                     !!01233
  02  local-tim                           pic 9(6).                    !01234
*                                                                     !!01235
* logal transaction date      MMDD                                    !!01236
* bit map position = 13                                               !!01237
* 4-bit BCD (unsigned packed) in transmission                         !!01238
*                                                                     !!01239
  02  local-dat                           pic 9(4).                    !01240
*                                                                     !!01241
* expiration date             YYMM                                    !!01242
* bit map position = 14                                               !!01243
* 4-bit BCD (unsigned packed) in transmission                         !!01244
*                                                                     !!01245
  02  exp-dat                             pic 9(4).                    !01246
*                                                                     !!01247
* settlement date             MMDD                                    !!01248
* bit map position = 15                                               !!01249
* 4-bit BCD (unsigned packed) in transmission                         !!01250
*                                                                     !!01251
  02  setl-dat                            pic 9(4).                    !01252
*                                                                     !!01253
* merchant's type                                                     !!01254
* bit map position = 18                                               !!01255
* 4-bit BCD (unsigned packed) in transmission                         !!01256
*                                                                     !!01257
  02  merch-typ                           pic 9(4).                    !01258
*                                                                     !!01259
* acquiring institution country code                                  !!01260
* bit map position = 19                                               !!01261
* 4-bit BCD (unsigned packed) in transmission                         !!01262
*                                                                     !!01263
  02  acq-cntry-cde                       pic 9(3).                    !01264
*                                                                     !!01265
* primary account number, extended country code                       !!01266
* bit map position = 20                                               !!01267
* 4-bit BCD (unsigned packed) in transmission                         !!01268
*                                                                     !!01269
  02  pan-cntry-cde                       pic 9(3).                    !01270
*                                                                     !!01271
* point of service entry mode                                         !!01272
* bit map position = 22                                               !!01273
* 4-bit BCD (unsigned packed) in transmission                         !!01274
*                                                                     !!01275
*          The pos entry mode consists of two sub-elements :          !!01276
*                                                                     !!01277
*          digits 1-2  card data entry mode                           !!01278
*                                                                     !!01279
*               00  Unkown                                            !!01280
*               01  Manual                                            !!01281
*               02  Magnetic stripe read                              !!01282
*               03  Bar code read                                     !!01283
*               04  OCR code read                                     !!01284
                                                                       !01284Z00
*               07  Proximity payment using VSDC/Chip data rules       !01284Z01
*               91  Proximity payment using magnetic stripe rules      !01284Z02
                                                                       !01284Z03
*                                                                     !!01285
*          digit 3  PIN entry capability                              !!01286
*                                                                     !!01287
*               0   unkown                                            !!01288
*               1   terminal can accept entry of PINs                 !!01289
*               2   terminal cannot accept entry of PINs              !!01290
*               8   terminal's PIN pad is down                        !!01291
*                                                                     !!01292
*          digit 4  filler                                            !!01293
*                                                                     !!01294
*               0   fill                                              !!01295
*                                                                     !!01296
  02  pos-entry-mde                       pic 9(4).                    !01297
*                                                                     !!01298
* card sequence number                                                !!01299
* bit map position = 23                                               !!01300
* 4-bit BCD (unsigned packed) in transmission                         !!01301
*                                                                     !!01302
  02  crd-seq-num                        pic 9(3).                     !01303
*                                                                     !!01304
* point of service condition code                                     !!01305
* bit map position = 25                                               !!01306
* 4-bit BCD (unsigned packed) in transmission                         !!01307
*                                                                     !!01308
*          Condition code     Description                             !!01309
*          --------------     -----------                             !!01310
*                00           Normal transaction of this type         !!01311
*                01           Customer not present                    !!01312
*                03           Merchant suspicious of tran             !!01313
*                05           Customer present, card not present      !!01314
*                06           Pre-authorized request                  !!01315
*                                 ( pos cc in original 0100 msg )     !!01316
*                08           Mail or telephone order                 !!01317
*                10           Customer identity verified              !!01318
*                13           Representation of item                  !!01319
*                17           Returned item (chargeback)              !!01320
*                51           Verification request                    !!01321
*                                                                     !!01322
  02 pos-cond-cde                        pic 99.                       !01323
*                                                                     !!01324
* transaction fee                                                     !!01325
* bit map position = 28                                               !!01326
* 1 ebcdic sign char + 8 ebcdic numeric characters                    !!01327
*                                                                     !!01328
*     ind is a c(credit) or d(debit)                                  !!01329
*                                                                     !!01330
  02 tran-fee.                                                         !01331
     04  ind                             pic x.                        !01332
     04  amt                             pic 9(8).                     !01333
*                                                                     !!01334
* acquiring institution identification code                           !!01335
* bit map position = 32                                               !!01336
* 4-bit BCD (unsigned packed) in transmission                         !!01337
*                                                                     !!01338
*          len is the number of digits in the code                    !!01339
*          code must be the Visa assigned BIN                         !!01340
*                                                                     !!01341
  02  acq-inst.                                                        !01342
      04  lgth                            pic 99.                      !01343
      04  cde                             pic x(11).                   !01344
*                                                                     !!01345
* forwarding institution identification code                          !!01346
* bit map position = 33                                               !!01347
* 4-bit BCD (unsigned packed) in transmission                         !!01348
*                                                                     !!01349
*          len is the number of digits in cde                         !!01350
*          cde must be the Visa assigned BIN                          !!01351
*                                                                     !!01352
  02  fwd-inst.                                                        !01353
      04  lgth                            pic 99.                      !01354
      04  cde                             pic x(11).                   !01355
*                                                                     !!01356
* primary account number, extended                                    !!01357
* bit map position = 34                                               !!01358
* 4-bit BCD (unsigned packed) in transmission                         !!01359
* This field is used for pan's beginning with "59" and the pan in the !!01360
* field of bit 2 should not be sent, otherwise this field should not  !!01361
* be sent.  The field of bit 20 must be sent if this field is used.   !!01362
*                                                                     !!01363
*           len is the number of digits in num                        !!01364
*           num is the customers primary account number               !!01365
*                                                                     !!01366
  02  pan-ext.                                                         !01367
      04  lgth                            pic 99.                      !01368
      04  num                             pic x(28).                   !01369
*                                                                     !!01370
* track 2 data                                                        !!01371
* bit map position = 35                                               !!01372
*                                                                     !!01373
  02  track2.                                                          !01374
      04  lgth                            pic 99.                      !01375
      04  val                             pic x(37).                   !01376
*                                                                     !!01377
* retrieval reference number                                          !!01378
* bit map position = 37                                               !!01379
*                                                                     !!01380
*          (YDDDnnnnnnnn) - for VDCS transactions                     !!01381
*          (MMDDnnnnnnnn) - for BASE transactions                     !!01382
*                                                                     !!01383
  02  ref-num                            pic x(12).                    !01384
*                                                                     !!01385
* authorization identification response                               !!01386
* bit map position = 38                                               !!01387
*                                                                     !!01388
*          Authorizor     length       format                         !!01389
*          ----------     ------       ------                         !!01390
*          Visa             6          Numeric, 1st digit zero        !!01391
*          Check Accpt      6          Alpha/Numeric                  !!01392
*          Mastercard       6          Alpha/Numeric                  !!01393
*          AMEX             5          Alpha/Numeric, space filled    !!01394
*          Diners Club      5          Alpha/Numeric, space filled    !!01395
*          Proprietary      6          Alpha/Numeric                  !!01396
*                                                                     !!01397
  02  auth-id-resp                       pic x(6).                     !01398
*                                                                     !!01399
* response code                                                       !!01400
* bit map position = 39                                               !!01401
*                                                                     !!01402
  02  resp-cde                           pic x(2).                     !01403
*                                                                     !!01404
* card acceptor terminal identification code                          !!01405
* bit map position = 41                                               !!01406
*                                                                     !!01407
  02  crd-acpt-term-id                   pic x(8).                     !01408
*                                                                     !!01409
* card acceptor identification code                                   !!01410
* bit map position = 42                                               !!01411
*                                                                     !!01412
*          this field contains the acquirer assigned merchant id      !!01413
*                                                                     !!01414
  02  crd-acpt-id-cde                    pic x(15).                    !01415
*                                                                     !!01416
* card acceptor location                                              !!01417
* bit map position = 43                                               !!01418
*                                                                     !!01419
*          this field contains the following four sub-elements:       !!01420
*           regulation E location                                     !!01421
*           city                                                      !!01422
*           country                                                   !!01423
*                                                                     !!01424
  02  crd-acpt.                                                        !01425
      04  reg-e-loc                       pic x(25).                   !01426
      04  city                            pic x(13).                   !01427
      04  cntry                           pic x(2).                    !01428
*                                                                     !!01429
* additional response data                                            !!01430
* bit map position = 44                                               !!01431
*                                                                     !!01432
  02  add-resp-data.                                                   !01433
      04  lgth                            pic 99.                      !01434
      04  info                            pic x(25).                   !01435
*                                                                     !!01436
* The second byte of this field contains the address verification     !!01437
* status.  The field is filled in by VISANET.                         !!01438
* The field will contain one of the following values:                 !!01439
*                                                                     !!01440
*     X - EXACT:  Address and 9-digit zip match                       !!01441
*     Y - YES:   Address and 5-digit zip match                        !!01442
*     A - ADDRESS:  Address matches, zip does not match               !!01443
                                                                       !01443M00
*     B - Address match for international transaction.  Postal code    !01443M01
*         not verified due to incompatable formats.                    !01443M02
*     C - Address and postal code not verified for international       !01443M03
*         transaction due to incompatible formats.                     !01443M04
*     D - Address and postal match for international transaction       !01443M05
*     I - Address information not verified for international           !01443M06
*         transaction.                                                 !01443M07
*     M - Address and postal match for international transaction       !01443M08
*     P - Postal code match for international transaction.  Address    !01443M09
*         not verified due to incompatible formats.                    !01443M0A
                                                                       !01443M0B
*     W - WHOLE ZIP:  9-digit zip matches, address does not match     !!01444
*     Z - ZIP:  5-digit zip matches, Address does not match           !!01445
*     N - NO:  Address and zip do not match                           !!01446
                                                                       !01446I00
*     U - Address information not verified for domestic transaction    !01446I01
*     G - Address information not verified for international           !01446I02
*         transaction                                                  !01446I03
                                                                       !01446I04
                                                                       !01447I00
                                                                       !01447I01
*     R - RETRY:  System unavailable or timeout                       !!01448
*     S - SERVICE NOT SUPPORTED:  Issuer does not support address     !!01449
*         verification at Visa or the issuer processing center        !!01450
*     0 (ZERO) - Address Verification has not been performed          !!01451
*     SPACE - Address Verification has not been performed             !!01452
*                                                                     !!01453
* The fifth byte of this field indicates if Card Verification Value   !!01454
* (CVV) is valid.  The field is filled in by VISANET.                 !!01455
* The field will contain one of the following values:                 !!01456
                                                                       !01457i00
*     2 - CVV valid                                                   !!01457i01
                                                                       !01457i02
*     1 - CVV invalid, transaction denied.                            !!01458
*     SPACE - CVV valid or verification has not been performed        !!01459
*                                                                     !!01460
                                                                       !01460F00
                                                                       !01460G00
                                                                       !01460w00
* Subfield 8 contains the Card Authentication Results Code.            !01460w01
* Valid Values:                                                        !01460w02
                                                                       !01460w03
*   Space - Card Authentication was not performed                      !01460G02
*   1 - ARQC was checked, but failed verification                      !01460G03
*   2 - ARQC was checked and passed verification                       !01460G04
*                                                                      !01460G05
                                                                       !01460G06
                                                                       !01460w04
* Subfield 10 indicates the result of processing the CVV2 (Card        !01460w05
                                                                       !01460w06
* Verification Value 2).  This field will contain one of the following !01460F02
* values:                                                              !01460F03
*                                                                      !01460F04
*     M = CVV2 Match                                                   !01460F05
*     N = CVV2 No Match                                                !01460F06
*     P = Not Processed                                                !01460F07
*     S = CVV2 should be on the card, but the merchant has indicated   !01460F08
*         that CVV2 is not present.                                    !01460F09
                                                                       !01460H00
*     U = Issuer is not certified and/or has not provided Visa the     !01460H01
*         encryption keys.                                             !01460H02
                                                                       !01460H03
*                                                                      !01460F0A
                                                                       !01460w07
* Subfield 11 contains the field 39 response code from the original    !01460w08
* response message, when a transaction is declined as a duplicate.     !01460w09
                                                                       !01460w0A
                                                                       !01460N00
* Subfield 13 - CAVV Result Code - indicates the outcome of CAVV       !01460N01
* validation.  Result codes and their meanings are:                    !01460N02
*     blank or not present - CAVV not validated                        !01460N03
*     0                    - CAVV not validated due to erroneous data  !01460N04
*                            submitted                                 !01460N05
*     1                    - CAVV failed validation                    !01460N06
*     2                    - CAVV passed vaildation                    !01460N07
*     3                    - a) CAVV validation could not be performed !01460N08
*                            b) 3-D Secure Authentication value of 5   !01460N09
*                               from the issuer Access Control Server  !01460N0A
*                               (ACS) indicates authentication         !01460N0B
*                               attempted, but not completed           !01460N0C
*     4                    - a) CAVV validation could not be performed !01460N0D
*                          - b) 3-D Secure Authentication value of 6   !01460N0E
*                               from the issuer ACS indicates system   !01460N0F
*                               error or failure prevented             !01460N0G
*                               authentication                         !01460N0H
                                                                       !01460Z00
* Subfield 14 - Response Reason Code - Carries the merchant            !01460Z01
* advice code value received from MasterCard authorization             !01460Z02
* response messages.  Result codes and their meanings are:             !01460Z03
*   M001 - New account information available                           !01460Z04
*   M002 - Try again later                                             !01460Z05
*   M003 - Do not try again for recurring payments                     !01460Z06
*              transaction                                             !01460Z07
*          Note:  The first two bytes indicate MasterCard transaction  !01460Z08
*                 values                                               !01460Z09
                                                                       !01460Z0A
                                                                       !01460N0I
                                                                       !01460F0B
      04  info-r redefines info.                                       !01461
                                                                       !01462W00
          06  resp-src-rsn-cde     pic x.                              !01462W01
                                                                       !01462W02
          06  ADDR-VRFY-STAT       PIC X.                              !01463
          06  filler               pic x(2).                           !01464
          06  cvv-valid            pic x.                              !01465
                                                                       !01465G00
          06  filler               pic x(3).                           !01465G01
          06  crd-auth-rslts-cde   pic x.                              !01465G02
                                                                       !01465G03
                                                                       !01465G04
                                                                       !01465G05
                                                                       !01465G06
          06  decline-rsn-cde      pic x.                              !01465F02
          06  cvv2-result          pic x.                              !01465F03
                                                                       !01465M00
          06  orig-resp-cde        pic x(2).                           !01465M01
                                                                       !01465T00
          06  chk-setl-cde         pic x.                              !01465T01
                                                                       !01465T02
                                                                       !01465N01
          06  cavv-rslt-cde        pic x.                              !01465N02
                                                                       !01465Z00
                                                                       !01465Z01
          06  resp-rsn-cde         pic x(4).                           !01465Z02
          06  filler               pic x(6).                           !01465Z03
                                                                       !01465Z04
                                                                       !01465T05
                                                                       !01465N04
                                                                       !01465M04
                                                                       !01465M05
                                                                       !01465F05
                                                                       !01466F00
                                                                       !01466F01
*                                                                     !!01467
* additional data, private                                            !!01468
* bit map position = 48                                               !!01469
*                                                                     !!01470
  02  addl-data.                                                       !01471
      04  lgth                            pic 999.                     !01472
      04  info                            pic x(255).                  !01473
                                                                       !01474t00
                                                                       !01474t01
                                                                       !01474t02
                                                                       !01480
                                                                       !01480p00
                                                                       !01480t00
* This redefine is used to support usage 7A for exception              !01480t01
                                                                       !01480t02
* transactions.  The field identifier (fld-id) is set to "V" for usage !01480p02
* 15.  If return reason codes (return-rsn-cdes) are present in the     !01480p03
* message, the message text subfield (msg-txt) changes from variable   !01480p04
* length to fixed length, with unused positions space filled.  If no   !01480p05
* return reason codes are present, the message text subfield remains   !01480p06
* variable length.  Return reason codes are sent in chargeback status  !01480p07
* advice messages (0480) and representment status advice messages      !01480p08
* (0280).  The return reason codes subfield is a variable length,      !01480p09
* unformatted subfield which contains up to five return reason codes.  !01480p0A
* Each return reason code is three characters long.  If the advice is  !01480p0B
* for a settled/valid exception transaction, the return reason codes   !01480p0C
* subfield is not present.                                             !01480p0D
                                                                       !01480p0E
                                                                       !01481p00
                                                                       !01481p01
                                                                       !01481p02
                                                                       !01494
  02  addl-excpt-data redefines addl-data.                             !01495
      04  lgth                            pic 999.                     !01496
      04  fld-id                          pic x.      !V              !!01497
      04  usage-cde                       pic x.                       !01498
      04  doc-ind                         pic x.                       !01499
      04  chgbk-ref-num                   pic x(6).                    !01500
      04  msg-txt                         pic x(50).                   !01501
                                                                       !01501l00
      04  cntct-info                      redefines msg-txt.           !01501l01
          06  cntct-nam                   pic x(15).                   !01501l02
          06  cntct-phn-num               pic x(10).                   !01501l03
          06  atm-msg-txt                 pic x(25).                   !01501l04
                                                                       !01501l05
      04  return-rsn-cdes                 pic x(15).                   !01502
      04  reserved                        pic x(181).                  !01503
                                                                       !01503A00
*                                                                      !01503A01
* the following redefinition is for VISA's support of the MasterCard   !01503A02
* Fleet program.  The field identifier (fld-id) for this usage is a $. !01503A03
* This usage will have two subfields, each preceded by a dollar sign,  !01503A04
* and can be upto a maximum of 17 numeric characters, for a total of   !01503A05
* 6 bytes.  If this usage is used, and only one subfield is sent, then !01503A06
* the message will begin with 2 dollar signs ($$), one for the fld-id, !01503A07
* and one to signal the beginning of the second subfield, the second   !01503A08
* must always be sent for this usage.  This usage is valid for request !01503A09
* messages only (0100/0200).                                           !01503A0A
*                                                                      !01503A0B
  02  addl-mcflt-data redefines addl-data.                             !01503A0C
      04  lgth                            pic 999.                     !01503A0D
      04  fld-id                          pic x.      !$!              !01503A0E
      04  mc-flt-data                     pic x(35).                   !01503A0F
      04  reserved                        pic x(219).                  !01503A0G
                                                                       !01503e00
*                                                                      !01503e01
                                                                       !01503p00
* This redefine is used to support usage 34 for Visa Commerce Data.    !01503p01
* The field identifier (fld-id) is set to ")E" for usage 34.  The      !01503p02
* field data contains the region-specific data.  Each dataset is       !01503p03
* comprised of a tag value, length value, and the data itself.         !01503p04
* The TLV (Tag Length Value) combinations can be in any order.         !01503p05
*                                                                      !01503p06
                                                                       !01503p07
                                                                       !01503p08
                                                                       !01503p09
                                                                       !01503p0A
  02  addl-visa-cmrcl-data redefines addl-data.                        !01503e08
      04  lgth                            pic 999.                     !01503e09
      04  fld-id                          pic xx.     ! )E            !!01503e0A
      04  tag-id                          pic xx.                      !01503e0B
      04  tag-lgth                        pic x(3).                    !01503e0C
      04  ccdr-ind                        pic x(5).                    !01503e0D
      04  ccdr-data        redefines ccdr-ind.                         !01503e0E
          08  ccdr-data-ind               pic x.                       !01503e0F
          08  ccdr-data-userfld           pic x(4).                    !01503e0G
      04  unused                          pic x(243).                  !01503e0H
                                                                       !01503e0I
                                                                       !01503D00
                                                                       !01503D01
                                                                       !01503D02
*                                                                      !01503D03
* The following redefinition is for the Visa Fleet program.  The       !01503D04
* field identifier (fld-id) for this usage is $$. The visa-flt-data    !01503D05
* contain either the id-num or vehicle-num from the purchase-tkn, and  !01503D06
* can be upto a maximum of 17 alphanumeric characters. This usage      !01503D07
* is valid for request messages only (0100/0200).                      !01503D08
*                                                                      !01503D09
  02  addl-visaflt-data redefines addl-data.                           !01503D0A
      04  lgth                            pic 999.                     !01503D0B
      04  fld-id                          pic xx.      !$$!            !01503D0C
      04  visa-flt-data                   pic x(17).                   !01503D0D
      04  reserved                        pic x(236).                  !01503D0E
                                                                       !01503F00
*                                                                      !01503F01
* The following redefinition is for the Commercial Card Type           !01503F02
* Indicator.  The field identifier (fld-id) for this usage is %01.     !01503F03
* Valid values for cmrcl-crd-typ are:                                  !01503F04
*         "0" = Non commercial card/Unknown/Unspecified.               !01503F05
*         "B" = Business card.                                         !01503F06
*         "R" = Corporate card.                                        !01503F07
*         "S" = Purchasing card.                                       !01503F08
* This usage is valid for auth request/response messages only          !01503F09
* (0100/0110).                                                         !01503F0A
*                                                                      !01503F0B
  02  addl-cmrcl-crd-data redefines addl-data.                         !01503F0C
      04  lgth                            pic 999.                     !01503F0D
      04  fld-id                          pic xxx.     !%01!           !01503F0E
      04  cmrcl-crd-typ                   pic x.                       !01503F0F
      04  reserved                        pic x(251).                  !01503F0G
                                                                       !01503v00
                                                                       !01503&00
*                                                                      !01503&01
* The following redefinition is for Original Credit Transactions.      !01503&02
* The field identifier (fld-id) for this usage is OCT.                 !01503&03
*                                                                      !01503&04
                                                                       !01503&05
                                                                       !01503&06
                                                                       !01503&07
                                                                       !01503&08
  02  addl-visa-money-xfer-data redefines addl-data.                   !01503v05
      04  lgth                            pic 999.                     !01503v06
                                                                       !01503&09
      04  fld-id                          pic x(3).    !OCT           !!01503&0A
                                                                       !01503&0B
                                                                       !01503&0C
                                                                       !01503&0D
      04  watch-list-mgmt-valid-cde       pic x(4).                    !01503v08
      04  watch-list-mgmt-rslt-cde        pic x(3).                    !01503v09
      04  actvty-chk-rslt                 pic x.                       !01503v0A
      04  reserved                        pic x(244).                  !01503v0B
                                                                       !01503v0C
                                                                       !01503%00
*                                                                      !01503%01
* The following redefinition is for Merchant Category Code 6012 -      !01503%02
* Additional Authorisation Data (usage 2).                             !01503%03
*                                                                      !01503%04
  02  adnl-free-frmt-data redefines addl-data.                         !01503%05
      04  lgth                            pic 999.                     !01503%06
      04  fld-id                          pic x.       !*             !!01503%07
      04  txt                             pic x(254).                  !01503%08
                                                                       !01503%09
                                                                       !01503F0H
                                                                       !01503D0F
                                                                       !01503D0G
*                                                                     !!01504
* transaction currency code                                           !!01505
* bit map position = 49                                               !!01506
* 4-bit BCD (unsigned packed) in transmission                         !!01507
*                                                                     !!01508
  02  tran-crncy-cde                      pic x(3).                    !01509
*                                                                     !!01510
* National pos geographic data                                        !!01511
* bit map position = 59                                               !!01512
* VISA Debit ISO format messages only                                 !!01513
*                                                                     !!01514
*          one binary byte then 14 digits for the following subfields !!01515
*          len is the number of digits in entire field                !!01516
*          st-cde is the ANSI state code                              !!01517
*          cnty-cde is the ANSI county code                           !!01518
*          zip-cde is the normal 5 digit zip code                     !!01519
*          zip-cde-ext is the 4 digit zip code extension              !!01520
*                                                                     !!01521
  02  ntl-pos-data.                                                    !01522
      04  lgth                            pic 99.                      !01523
      04  st-cde                          pic 9(2).                    !01524
      04  cnty-cde                        pic 9(3).                    !01525
      04  zip-cde                         pic 9(5).                    !01526
      04  zip-cde-ext                     pic 9(4).                    !01527
*                                                                     !!01528
* pos entry capability code, private                                  !!01529
* bit map position = 60                                               !!01530
* 4-bit BCD (unsigned packed) in transmission                         !!01531
*                                                                     !!01532
                                                                       !01532A00
*          lgth is the total length of all the data to follow          !01532A01
*          terminal type                                               !01532A02
                                                                       !01532A03
                                                                       !01533A00
                                                                       !01533A01
*              0 - unspecified,                                       !!01534
*              2 - unattended terminal (customer operated)            !!01535
*              4 - electronic cash register,                          !!01536
*              7 - telephone device (dial terminal)                   !!01537
                                                                       !01537A00
*          terminal entry capability                                   !01537A01
                                                                       !01537A02
                                                                       !01538A00
                                                                       !01538A01
*              0 - unknown,                                           !!01539
*              1 - terminal not used,                                 !!01540
*              2 - magnetic stripe read capability,                   !!01541
*              3 - bar code read capability,                          !!01542
*              4 - ocr read capability,                               !!01543
                                                                       !01543G00
*              5 - chip card reading capability,                       !01543G01
                                                                       !01543e00
*              8 - contactless read capability                         !01543e01
                                                                       !01543e02
*              9 - terminal does not read card data                    !01543G02
                                                                       !01543G03
*          chip condition code                                         !01543G04
*              0 - Service code does not begin with 2 or 6 or fill for !01543G05
*                      subsequent positions                            !01543G06
                                                                       !01543L00
*              1 - Last EMV read successful, or was not a chip trans-  !01543L01
                                                                       !01543L02
*                      action, or unknown                              !01543G08
*              2 - Last transaction at the chip capable terminal was   !01543G09
*                      an unsuccessful chip read                       !01543G0A
*          service developement field                                  !01543G0B
*              0 - default value                                       !01543G0C
*              1 - electronic service transaction, security met        !01543G0D
*              2 - electronic service transaction, security not met    !01543G0E
*              4 - In-flight commerce transaction                      !01543G0F
*          merchant group id                                           !01543G0G
*              future use                                              !01543G0H
                                                                       !01543L03
*          emv tran indicator                                          !01543L04
*              0 - Non EMV                                             !01543L05
*              1 - EMV                                                 !01543L06
                                                                       !01543a00
*              2 - EMV using DE 140                                    !01543a01
                                                                       !01543i00
                                                                       !01543i01
*              3 - Full data Acquirer submitted CCD or Generic EMV     !01543i02
*                  Transport data in the standard third bit map        !01543i03
*                  format                                              !01543i04
                                                                       !01543i05
                                                                       !01543L09
                                                                       !01543L0A
*          crd auth rel ind                                            !01543G0L
*              0 - Not Used                                            !01543G0M
*              1 - Card authentication unreliable                      !01543G0N
*              2 - Acquirer inactive for card authentication           !01543G0O
*              3 - Issuser incative for card authentication            !01543G0P
                                                                       !01543G0Q
                                                                       !01544G00
                                                                       !01544G01
                                                                       !01544G02
                                                                       !01544M00
                                                                       !01544s00
*          Mail/Telephone or Electronic Commerce Flag and Payment      !01544s01
*          Indicator                                                   !01544s02
                                                                       !01544s03
                                                                       !01544s04
                                                                       !01544s05
*              00 - Not Applicable                                     !01544M02
*              01 - Single transaction for Mail/Telephone order        !01544M03
*              02 - Recurring transaction                              !01544M04
*              03 - Installment payment                                !01544M05
*              04 - Unknown classification/other mail order            !01544M06
*              05 - Secure Electronic Transaction (SET) with           !01544M07
*                          cardholder certificate                      !01544M08
*              06 - Non-authenticated Security Transaction with        !01544M09
*                          merchant certificate                        !01544M0A
*              07 - Non-authenticated Security Transaction without     !01544M0B
*                          merchant certificate                        !01544M0C
                                                                       !01544P00
                                                                       !01544P01
*              08 - Non-secure transaction.                            !01544P02
*              09 - Non-authenticated Security Transaction that does   !01544P03
*                          not comply with SET, and the merchant is    !01544P04
*                          SET-capable.                                !01544P05
                                                                       !01544a00
*          Cardholder ID Method                                        !01544a01
*              valid values:                                           !01544a02
*              0 - not specified                                       !01544a03
*              1 - signature                                           !01544a04
*              2 - PIN                                                 !01544a05
*              3 - Unattended terminal                                 !01544a06
*              4 - Mail, telephone, electronic commerce                !01544a07
*                                                                      !01544a08
*          Partial Authorization Indicator                             !01544a09
*              valid values:                                           !01544a0A
*              0 - terminal does not process partial authorization     !01544a0B
*                    reponses                                          !01544a0C
*              1 - terminal accepts partial authorization responses    !01544a0D
                                                                       !01544a0E
                                                                       !01544P06
                                                                       !01551
  02  pos-entry.                                                       !01552
                                                                       !01552A00
      04  lgth                            pic 99.                      !01552A01
      04  term-typ                        pic x.                       !01552A02
      04  term-ent-cap                    pic x.                       !01552A03
      04  chip-cond-cde                   pic 9.                       !01552A04
                                                                       !01552L00
      04  xstng-dbt-ind                   pic 9.                       !01552L01
                                                                       !01552L02
                                                                       !01552O00
                                                                       !01552O01
      04  mrch-grp-id                     pic 9(2).                    !01552A06
                                                                       !01552L03
      04  emv-tran-ind                    pic 9.                       !01552L04
                                                                       !01552L05
      04  crd-auth-rel-ind                pic 9.                       !01552A08
      04  e-com                           pic 99.                      !01552A09
                                                                       !01552M00
      04  moto-flg redefines e-com.                                    !01552M01
          06 moto                         pic 99.                      !01552M02
      04  crdhldr-id-mthd                 pic 9.                       !01552M03
                                                                       !01552O02
                                                                       !01552a00
      04  prtl-auth-ind                   pic 9.                       !01552a01
                                                                       !01552a02
                                                                       !01552O04
                                                                       !01552A0A
                                                                       !01553A00
                                                                       !01553A01
                                                                       !01553A02
*                                                                     !!01557
* amount, other                                                       !!01558
* bit map position = 61                                               !!01559
* 4-bit BCD (unsigned packed) in transmission                         !!01560
*                                                                     !!01561
*          len is the number of digits in amount                      !!01562
*          amt is the transaction amount                              !!01563
*          bill-amt is the cardholder billing amount                  !!01564
*          repl-amt is the replacement billing amount                 !!01565
*                                                                     !!01566
  02  other-amt.                                                       !01567
      04  lgth                            pic 99.                      !01568
      04  amt                             pic 9(12).                   !01569
      04  bill-amt                        pic 9(12).                   !01570
      04  repl-amt                        pic 9(12).                   !01571
                                                                       !01572
* Payment Service Field                                               !!01573
* bit map position = 62                                               !!01574
*                                                                     !!01575
  02  payment-srv-fld.                                                 !01576
      04  lgth                            pic 99.                      !01577
      04  bit-map                         pic x(8).                    !01578
*                                                                     !!01579
*             A code used to provide additional information           !!01580
*             regarding the disposition of the transaction.           !!01581
*             Valid values are:                                       !!01582
*                                                                     !!01583
*             N = Transaction downgraded for PS2000                   !!01584
*             Y = Transaction submitted for PS2000                    !!01585
*             A = Meets Custom Payment Service requirements           !!01586
*             I = Incremental authorization to a previously           !!01587
*                 approved transaction.                               !!01588
*             P = Preferred Customer                                  !!01589
*             E = Meets card-present requirements and merchant        !!01590
*                 name and location are present                       !!01591
*             V = Meets address verification requirements             !!01592
*             C = Meets cardholder activated terminal                 !!01593
*                 requirements                                        !!01594
                                                                       !01594G00
*             K = Card present with key entry                          !01594G01
                                                                       !01594Z00
*             T = No CPS program available                             !01594Z01
                                                                       !01594Z02
                                                                       !01594G02
*                                                                     !!01595
*             Subfield 1                                              !!01596
*                                                                     !!01597
      04  payment-srv-ind                 pic x.                       !01598
*                                                                     !!01599
*             A code assigned by Visa to a transaction which          !!01600
*             has met Payment Service 2000 edits. This field will     !!01601
*             remain with a transaction throughout it's life          !!01602
*             cycle.                                                  !!01603
*                                                                     !!01604
*             Subfield 2                                              !!01605
*                                                                     !!01606
      04  tran-id                         pic 9(15).                   !01607
*                                                                     !!01608
*             A code assigned by Visa to a transaction which          !!01609
*             has met Payment Service 2000 edits and been             !!01610
*             approved by the issuer.  This field will also           !!01611
*             contain the downgrade reason code if the                !!01612
*             transaction is rejected for PS2000.                     !!01613
*                                                                     !!01614
*             Subfield 3                                              !!01615
*                                                                     !!01616
      04  valid-cde                       pic x(4).                    !01617
*                                                                     !!01618
*             This field is used to identify the industry for         !!01619
*             which market-specific data has been provided in         !!01620
*             the duration and prestigious property indicator.        !!01621
*             Valid values are:                                       !!01622
*                                                                     !!01623
*             A = Auto rental                                         !!01624
                                                                       !01624a00
*             B = Bill payment                                         !01624a01
                                                                       !01624a02
*             H = Hotel                                               !!01625
                                                                       !01625e00
*             M = Healthcare (medical)                                 !01625e01
                                                                       !01625e02
*             N = Failed Market-specific edits                        !!01626
                                                                       !01626e00
*             T = Transit                                              !01626e01
                                                                       !01626e02
*                                                                     !!01627
*             Subfield 4                                              !!01628
*                                                                     !!01629
      04  valid-data redefines valid-cde.                              !01630
                                                                       !01631
          08  sub-87                      pic x.                       !01632
          08  sub-88                      pic x.                       !01633
          08  sub-89                      pic x.                       !01634
          08  filler                      pic x.                       !01635
                                                                       !01636
      04  mkt-spfc-data-id                pic x.                       !01637
*                                                                     !!01638
*             Indicates the number of days anticipated for the        !!01639
*             auto rental or hotel stay.                              !!01640
*                                                                     !!01641
*             Subfield 5                                              !!01642
*                                                                     !!01643
      04  dur                             pic 9(2).                    !01644
*                                                                     !!01645
*             An indicator used by participants in Visa's             !!01646
*             Prestigious Lodging program to indicate the             !!01647
*             property's floor limit.  This field is required         !!01648
*             when the merchant is requesting a $1.00 status          !!01649
*             check.  Valid values are:                               !!01650
*                                                                     !!01651
*             D = Visa Classic   - $ 500 limit                        !!01652
*                 Visa Gold     - $1000 limit                         !!01653
*                 Visa Business - $1500 limit                         !!01654
*             B = $1000 limit                                         !!01655
*             S = $1500 limit                                         !!01656
*                                                                     !!01657
*             Subfield 6                                              !!01658
*                                                                     !!01659
      04  prstgs-prop-ind                 pic x.                       !01660
*                                                                     !!01661
*             Identifies the purchase to the issuer and the           !!01662
*             cardholder.  It has two subfields, a format code        !!01663
*             and in identifier for the transaction.                  !!01664
*                                                                     !!01665
*             Subfield 7                                              !!01666
*                                                                     !!01667
      04  pur-id.                                                      !01668
          06  frmt-id                     pic x.                       !01669
          06  info                        pic x(25).                   !01670
*                                                                     !!01671
*             Contains the date that the customer picked up the       !!01672
*             auto or checked into the hotel.                         !!01673
*                                                                     !!01674
*             Subfield 8                                              !!01675
*                                                                     !!01676
      04  chk-dat                         pic 9(6).                    !01677
*                                                                     !!01678
*             Indicates if the clearing message is for a              !!01679
*             no show.  A value of 1 indicates a no show.             !!01680
*                                                                     !!01681
*             Subfield 9                                              !!01682
*                                                                     !!01683
      04  no-shw-ind                      pic x.                       !01684
*                                                                     !!01685
*             Identifies additional charges that are added to the     !!01686
*             customer's bill after the hotel check-out or auto       !!01687
*             rental return.  The codes are right justified and       !!01688
*             space filled.  Valid values are:                        !!01689
*                                                                     !!01690
*             Auto Rental:                                            !!01691
*             1 = Gasoline                                            !!01692
*             2 = Extra mileage                                       !!01693
*             3 = Late return                                         !!01694
*             4 = One-way service fee (drop off charge)               !!01695
*             5 = Parking or moving violation                         !!01696
*                                                                     !!01697
*             Hotel:                                                  !!01698
*             2 = Restaurant or room service                          !!01699
*             3 = Gift shop                                           !!01700
*             4 = Mini-bar                                            !!01701
*             5 = Telephone                                           !!01702
*             6 = Other                                               !!01703
*             7 = Laundry                                             !!01704
*                                                                     !!01705
*             Subfield 10                                             !!01706
*                                                                     !!01707
      04  extra-chrgs                     pic 9(6).                    !01708
*                                                                     !!01709
*             Identifies a specific BASE II clearing transaction      !!01710
*             record when multiple clearing records are submitted     !!01711
*             for a single authorization.                             !!01712
*                                                                     !!01713
*             Subfield 11                                             !!01714
*                                                                     !!01715
      04  mult-clrng-seq-num              pic 9(2).                    !01716
*                                                                     !!01717
*             A value of 1 indicates the purchase of a                !!01718
*             non-refundable ticket.                                  !!01719
*                                                                     !!01720
*             Subfield 12                                             !!01721
*                                                                     !!01722
      04  mult-clrng-seq-cnt              pic 9(2).                    !01723
*                                                                     !!01724
*             A value of 1 indicates the purchase of a                !!01725
*             non-refundable ticket.                                  !!01726
*                                                                     !!01727
*             Subfield 13                                             !!01728
*                                                                     !!01729
      04  rstrctd-tckt-ind                pic x.                       !01730
*                                                                     !!01731
*             Indicates the total amount authorized when              !!01732
*             multiple authorizations and/or reversals were           !!01733
*             submitted for a single clearing.                        !!01734
*                                                                     !!01735
*             Subfield 14                                             !!01736
*                                                                     !!01737
      04  tot-amt-auth                    pic 9(12).                   !01738
*                                                                     !!01739
*             Indicates the specific custom payment service           !!01740
*             that the acquirer requested.  Valid values are;         !!01741
*                                                                     !!01742
*             A = Retail                                              !!01743
*             1 = Passenger Transport 1                               !!01744
*             2 = Passenger Transport 2                               !!01745
*             3 = Hotel 1                                             !!01746
*             4 = Hotel 2                                             !!01747
*             5 = Auto Rental 1                                       !!01748
*             6 = Auto Rental 2                                       !!01749
*             7 = Direct Marketing                                    !!01750
*             8 = Automated Fuel Dispenser                            !!01751
*                                                                     !!01752
*             Subfield 15                                             !!01753
*                                                                     !!01754
      04  rqstd-pymnt-srvc                pic x.                       !01755
*                                                                     !!01756
*             Indicates the authorization-related chargeback          !!01757
*             protection level for the custom payment service.        !!01758
*             Valid values are:                                       !!01759
*                                                                     !!01760
*             00 = Card present / Non-T&E                             !!01761
*             01 = Card present / T&E                                 !!01762
*             02 = Card not present AVS / Non-T&E                     !!01763
*             03 = Card not present / T&E                             !!01764
*             04 = Card not present-preferred customer / T&E          !!01765
*             05 = Card present-no signature / Non-T&E                !!01766
                                                                       !01766l00
*             15 = U.S. ATM rules apply                                !01766l01
*         Spaces = U.S. ATM rules not applicable                       !01766l02
                                                                       !01766l03
*                                                                     !!01767
*             Subfield 16                                             !!01768
*                                                                     !!01769
      04  chrgbck-rghts-ind               pic x(2).                    !01770
                                                                       !01771
                                                                       !01772
                                                                       !01772i00
*                                                                      !01772i01
*             Gateway Transaction Identifier - This subfield is        !01772i02
*             generated by Visa Gateway.                               !01772i03
*                                                                      !01772i04
*             AMEX - This field will carry Acquirer Reference Data.    !01772i05
*             It will be used for all American Express response        !01772i06
*             messages coming from CAPN.                               !01772i07
*                                                                      !01772i08
*             MasterCard - An identifier assigned by MasterCard to     !01772i09
*             uniquely identify a single transaction authorized by     !01772i0A
*             MasterCard.  This field is used for MasterCard           !01772i0B
*             Interchange Compliance (MIC) program.  This field is     !01772i0C
*             not used in the VisaNet 0100 authorization request       !01772i0D
*             message, but is returned in the VisaNet 0110             !01772i0E
*             authorization response message when it is received from  !01772i0F
*             MasterCard.                                              !01772i0G
*                                                                      !01772i0H
*             Subfield 17                                              !01772i0I
*                                                                      !01772i0J
      04  gateway-txn-id.                                              !01772i0K
          06  info                        pic x(15).                   !01772i0L
          06  mc-ichg-comp-data           redefines info.              !01772i0M
              08  ichg-date               pic x(4).                    !01772i0N
              08  num-ref                 pic x(9).                    !01772i0O
              08  filler                  pic x(2).                    !01772i0P
          06  amex-acq-ref-data           redefines info.              !01772i0Q
              08  ref-data                pic x(15).                   !01772i0R
                                                                       !01772i0S
                                                                       !01773i00
                                                                       !01773i01
                                                                       !01773i02
                                                                       !01788
                                                                       !01788G00
*             Excluded Transaction Identifier Reason - A code          !01788G01
*             indicating that a Transaction Identifier is not included !01788G02
*             in the transaction. May be any alphanumeric value.       !01788G03
*                                                                      !01788G04
*             Subfield 18                                              !01788G05
*                                                                      !01788G06
      04  exclud-tran-id-rsn              pic x.                       !01788G07
                                                                       !01788N00
*             Electronic Commerce Goods Indicator - A code indicating  !01788N01
*             the type of goods purchased on the Internet.  This field !01788N02
*             is left-justified with a space in the second position.   !01788N03
*                 Valid values for the first position:                 !01788N04
*                     D = Digital Goods                                !01788N05
*                     P = Physical Goods                               !01788N06
*                                                                      !01788N07
*             Subfield 19                                              !01788N08
*                                                                      !01788N09
      04  ecomm-gds-ind                   pic x(2).                    !01788N0A
                                                                       !01788S00
*                                                                      !01788S01
*            Subfield 20                                               !01788S02
*                                                                      !01788S03
*            Merchant Verification Value (MVV).                        !01788S04
*                                                                      !01788S05
*            The MVV consists of 10 hex digits which are sent BCD.     !01788S06
*            The first 6 hex digits are assigned by Visa to a          !01788S07
*            participating merchant, the last 4 are defined in         !01788S08
*            conjunction with the acquirer.  The VisaNet Interface     !01788S09
*            gets these digits from the alternate merchant ID token.   !01788S0A
*            or from the Switch Terminal File (STF).                   !01788S0B
*                                                                      !01788S0C
      04  mrch-vrfcn-val                  pic x(10).                   !01788S0D
                                                                       !01788X00
*                                                                      !01788X01
*            subfield 21                                               !01788X02
*                                                                      !01788X03
*            This subfield consists of 3 elements.                     !01788X04
*                                                                      !01788X05
*            Risk score - A value assigned by Visa and sent to         !01788X06
*            Issuers ranging from 01 to 99, with a high value          !01788X07
*            indicating a higher authorization risk.                   !01788X08
*                                                                      !01788X09
*            Reason codes are assigned by Visa and will contain values !01788X0A
*            that will represent the logic behind the Risk Score.      !01788X0B
*            Reason codes are alphanumeric.  A value of 00 indicates   !01788X0C
*            that no reason code is available.                         !01788X0D
*                                                                      !01788X0E
      04  rsk.                                                         !01788X0F
          08  score                       pic x(2).                    !01788X0G
          08  rsn-cde                     pic x(2).                    !01788X0H
*                                                                      !01788X0I
*            subfield 22                                               !01788X0J
*                                                                      !01788X0K
*            Condition code - contains values that provide risk        !01788X0L
*            information regarding high-risk events.  There are three  !01788X0M
*            two-position condition codes.  The condition codes are    !01788X0N
*            alphanumeric and will be supplied Visa.                   !01788X0O
*                                                                      !01788X0P
      04  cond.                                                        !01788X0Q
          08 cde1                         pic x(2).                    !01788X0R
                                                                       !01788m00
          08 cer-num                      pic x(2).                    !01788m01
                                                                       !01788m02
          08 cde3                         pic x(2).                    !01788X0T
                                                                       !01788a00
*            subfield 23                                               !01788a01
*                                                                      !01788a02
*            Card results - inserted by Visa.  Indicates the card      !01788a03
*            program that the card used in the transaction is signed   !01788a04
*            up for.  This is a two byte field.  If the first byte     !01788a05
*            is A, B, C, or D, this value must be in the sixth byte    !01788a06
*            of DE 38.                                                 !01788a07
*                                                                      !01788a08
*            valid values for first byte:                              !01788a09
*                A               =  Visa traditional                   !01788a0A
*                B               =  Visa traditional rewards           !01788a0B
*                C               =  Visa signature                     !01788a0C
*                D               =  Visa infinite                      !01788a0D
*                E-Z, 0-9        =  Reserved                           !01788a0E
*                                                                      !01788a0F
*            valid values for second byte:                             !01788a0G
*                Space, A-Z, 0-9 =  Reserved                           !01788a0H
*                                                                      !01788a0I
          04  crd-rslts                       pic x(2).                !01788a0J
                                                                       !01788e00
*                                                                      !01788e01
*            subfield 24                                               !01788e02
*                                                                      !01788e03
*            Program Identifier - this field will identify the         !01788e04
*            rewards program associated with the card.                 !01788e05
*                                                                      !01788e06
          04  prgrm-id                        pic x(6).                !01788e07
                                                                       !01788e08
                                                                       !01788a0K
                                                                       !01788X0U
                                                                       !01788S0E
                                                                       !01788S0F
                                                                       !01788S0G
                                                                       !01788S0H
                                                                       !01788X0V
                                                                       !01788a0L
                                                                       !01788e09
      04  filler1                         pic x(54).                   !01788e0A
                                                                       !01788e0B
                                                                       !01788a0N
                                                                       !01788X0X
                                                                       !01788S0J
                                                                       !01788N0C
                                                                       !01788N0D
                                                                       !01788N0E
                                                                       !01788G09
                                                                       !01789G00
                                                                       !01789G01
*                                                                     !!01790
* vdcs private                                                        !!01791
* bit map position = 63                                               !!01792
* 4-bit BCD (unsigned packed) in transmission                         !!01793
*                                                                     !!01794
*          len is the number of bytes after bit-map, after packing    !!01795
*          bit map (1st byte) specifies which subfield is in data     !!01796
*              bit 1 = 1 - network id is present (4 digits)           !!01797
*              bit 2 = 1 - time is present (4 digits)                 !!01798
*              bit 3 = 1 - MIS/CAS reason code is present (4 digits)  !!01799
*              bit 4 = 1 - STIP reason code is present (2 digits)     !!01800
                                                                       !01801r00
*              bit 5 = 1 - Not used                                   !!01801r01
                                                                       !01801r02
*              bit 6 = 1 - Chgbck Reduction/BASE II Flags (7 digits)  !!01802
*              bit 7 = 1 - Network Participation Flags (8 bytes)      !!01803
*              bit 8 = 1 - VISA Acquirer's Business ID (8 digits)     !!01804
                                                                       !01805
*          bit map (2nd byte) specifies which subfield is in data     !!01806
*              bit 1 = 1 - Fraud Reporting Data                       !!01807
*              bit 2 = 1 - Special Program Flag                       !!01808
*              bit 3 = 1 - Reimbursement att                          !!01809
                                                                       !01809X00
*              bit 4 = 1 - Sharing Group Code                          !01809X01
*              bit 5 = 1 - Decimal Positions Indicator                 !01809X02
                                                                       !01809X03
                                                                       !01810X00
                                                                       !01810X01
                                                                       !01810X02
*              bit 6 = 1 - Issuer Currency Conversion Data            !!01812
*              bit 7 = 1 - Acquirer Currency Conversion Data          !!01813
*              bit 8 always zero                                      !!01814
*                                                                     !!01815
*          bit map (3rd byte) specifies which subfield is in data     !!01816
                                                                       !01816F00
*              bit 1 = 1 - Additional Data Indicator                   !01816F01
*              bit 2 = 1 - Merchant Volume Indicator                   !01816F02
                                                                       !01816M00
*              bit 3 = 1 - Fee Program Indicator                       !01816M01
                                                                       !01816a00
*              bit 4 is always zero                                    !01816a01
*              bit 5 = 1 - International Service Assessment Charge Ind !01816a02
*              bits 6-8 are always zero                                !01816a03
                                                                       !01816a04
                                                                       !01816a05
                                                                       !01816a06
                                                                       !01816M03
                                                                       !01816M04
                                                                       !01816M05
                                                                       !01816F04
                                                                       !01817F00
                                                                       !01817F01
*                                                                     !!01818
  02  vdcs-private.                                                    !01819
      04  lgth                            pic 99.                      !01820
      04  bit-map                         pic x(3).                    !01821
      04  ntwk-id-cde                     pic x(4).                    !01822
      04  tim-hold                        pic x(4).                    !01823
      04  mis-cas-cde                     pic x(4).                    !01824
      04  stip-cde                        pic x(4).                    !01825
                                                                       !01826r00
      04  user-fld-aci                    pic x(6).                    !01826r01
                                                                       !01826r02
      04  chgbk-bii-flags                 pic x(7).                    !01827
      04  ntwk-part-flags                 pic x(8).                    !01828
      04  acq-bus-id                      pic x(8).                    !01829
      04  fraud-rept-data.                                             !01830
          08  fraud-typ                   pic x.                       !01831
          08  fraud-ntfy-cde              pic x.                       !01832
          08  reserved                    pic x(12).                   !01833
      04  spcl-prgm-flg                   pic x(2).                    !01834
      04  reimb-att                       pic x.                       !01835
                                                                       !01835X00
*      Subfield 12                                                     !01835X01
*                                                                      !01835X02
*      This field can contain up to 30 alphanumeric characters.  Each  !01835X03
*      character represents a network available to the merchant for    !01835X04
*      processing transactions.  The field is left justified, space    !01835X05
*      filled.  The order of the characters represents their priority. !01835X06
*                                                                      !01835X07
      04   shrg-grp-cde                           pic x(30).           !01835X08
*                                                                      !01835X09
*      Subfield 13                                                     !01835X0A
*                                                                      !01835X0B
*      Positions 1 and 2 = transaction amount decimal places, for bit  !01835X0C
*      4 or 61.1.                                                      !01835X0D
*      Positions 3 and 4 = settlement amount decimal places, for bit   !01835X0E
*      5, 86, 87, 88, 89 or 97.                                        !01835X0F
*      Positions 5 and 6 = cardholder amount decimal places, for bit 6 !01835X0G
*      or 61.2.                                                        !01835X0H
*                                                                      !01835X0I
*      Valid values are:                                               !01835X0J
*          00 = currency has no minor units                            !01835X0K
*          02 = currency has 2 minor units                             !01835X0L
*          03 = currency has 3 minor units                             !01835X0M
*          99 = currency not applicable in this message.               !01835X0N
*                                                                      !01835X0O
      04 dec-posn.                                                     !01835X0P
             08 tran-amt-ind                      pic x(2).            !01835X0Q
             08 setl-amt-ind                      pic x(2).            !01835X0R
             08 crdhldr-amt-ind                   pic x(2).            !01835X0S
                                                                       !01835X0T
                                                                       !01836
*      These fields are used for the Currency Conversion Fee Service  !!01837
                                                                       !01838
      04   issuer-conv-data.                                           !01839
             08 sttl-amt-conv-fee                 pic x(9).            !01840
             08 sttl-amt-conv-allot               pic x(9).            !01841
             08 crdhlder-bill-conv-fee            pic x(9).            !01842
             08 crdhlder-bill-opt-fee             pic x(9).            !01843
      04   settl-acq-conv-fee-alloc               pic x(9).            !01844
                                                                       !01844D00
*     Additional Data Indicator                                        !01844D01
                                                                       !01844D02
      04   adnl-data-ind                          pic x.               !01844D03
                                                                       !01844F00
*     Merchant Volume Indicator                                        !01844F01
*                                                                      !01844F02
*          Valid values:                                               !01844F03
*                Space = Not used                                      !01844F04
                                                                       !01844G00
*                00-99 = Rate reduction value                          !01844G01
                                                                       !01844G02
                                                                       !01844G03
                                                                       !01844G04
                                                                       !01844G05
*                                                                      !01844F07
                                                                       !01844F08
                                                                       !01844G06
      04   mrch-vol-ind                           pic x(2).            !01844G07
                                                                       !01844M00
      04   fee-pgm-ind                            pic x(3).            !01844M01
                                                                       !01844a00
*                                                                      !01844a01
*          subfield 21                                                 !01844a02
*                                                                      !01844a03
*      Charge indicator - used when international transactions are     !01844a04
*      assessed an International Service Assessment (ISA).             !01844a05
*      valid values:                                                   !01844a06
                                                                       !01844r00
*                                C = Single Currency ISA Assessed      !01844r01
                                                                       !01844r02
*                                S = ISA assessed.                     !01844a07
*                                                                      !01844a08
      04   intrntl-srv-asmnt                      pic x(1).            !01844a09
                                                                       !01844a0A
                                                                       !01844M02
                                                                       !01844G08
                                                                       !01844F0A
                                                                       !01844D04
                                                                       !01844G09
                                                                       !01844L00
                                                                       !01844L01
                                                                       !01844L02
*                                                                     !!01845
* date, action  (YYMMDD)                                              !!01846
* bit map position = 73                                               !!01847
* 4-bit BCD (unsigned packed)                                         !!01848
*                                                                     !!01849
*          this field used in check acceptance authorization          !!01850
*          requests when vendor requires YYMMDD format, else          !!01851
*          use date, expiration field                                 !!01852
*                                                                     !!01853
  02  dat-action                          pic x(6).                    !01854
*                                                                     !!01855
* receiving institution identification code                           !!01856
* bit map position = 100                                              !!01857
* 4-bit BCD (unsigned packed) in transmission                         !!01858
*                                                                     !!01859
*          len is the number of digits in cde                         !!01860
*          cde is the Visa assigned BIN                               !!01861
*                                                                     !!01862
  02  rcv-inst.                                                        !01863
      04  lgth                            pic 99.                      !01864
      04  cde                             pic x(11).                   !01865
*                                                                     !!01866
* account identification 1                                            !!01867
* bit map position = 102                                              !!01868
*                                                                     !!01869
*          len is the number of bytes in num                          !!01870
*          num is the "FROM" account number                           !!01871
*                                                                     !!01872
  02  acct-id1.                                                        !01873
      04  lgth                            pic 99.                      !01874
      04  num                             pic x(28).                   !01875
*                                                                     !!01876
* account identification 2                                            !!01877
* bit map position = 103                                              !!01878
*                                                                     !!01879
*          len is the number of bytes in num                          !!01880
*          num is the "TO" account number                             !!01881
*                                                                     !!01882
  02  acct-id2.                                                        !01883
      04  lgth                            pic 99.                      !01884
      04  num                             pic x(28).                   !01885
*                                                                     !!01886
* issuing institution identification code                             !!01887
* EBCDIC in transmission                                              !!01888
* bit map position = 121                                              !!01889
*                                                                     !!01890
  02  iss-inst-id.                                                     !01891
      04  lgth                            pic 99.                      !01892
      04  cde                             pic x(11).                   !01893
                                                                       !01894
                                                                       !01894G00
*                                                                      !01894G01
* application transaction counter                                      !01894G02
* bit map position = 137                                               !01894G03
*                                                                      !01894G04
  02  app-tran-ctr                        pic x(4).                    !01894G05
                                                                       !01894G06
**********************************************************************!!01895
*                                                                    *!!01896
*          START OF OPTIONAL FIELDS TO BE LOGGED TO THE ILF          *!!01897
*                                                                    *!!01898
**********************************************************************!!01899
*                                                                     !!01900
* previous transaction data                                           !!01901
* bit map position = 125                                              !!01902
* 4-bit BCD (unsigned packed) in transmission                         !!01903
* This field only used in ENTREE request for retrieval fulfillment,   !!01904
* chargeback and representation messages.                             !!01905
*                                                                     !!01906
*          len is the number of bytes in field after packing          !!01907
*          data-typ identifies what type of message information is    !!01908
*               contained in the field.                               !!01909
*               03 - request for retrieval fulfillment                !!01910
*               04 - chargeback, or representation                    !!01911
*          rff contains subfields used in fulfillment advices         !!01912
*               orig-msg-typ    - original message type               !!01913
*               orig-dat-tim1   - original tran date and time         !!01914
*               orig-trace-num1 - original trace number               !!01915
*               orig-loc-tim    - original local time                 !!01916
*               orig-loc-dat    - original local date                 !!01917
*               orig-setl-dat   - original settlement date            !!01918
*               orig-rsn-cde    - original reason code                !!01919
*               orig-fwd-inst1  - original forwarding institution     !!01920
*               orig-rcv-inst   - original receiving institution      !!01921
*          cgb-rprn contains subfields used in ENTREE chargeback or   !!01922
*              representation items                                   !!01923
*               orig-msg-typ2   - original message type               !!01924
*               orig-trace-num2 - original trace number               !!01925
*               orig-dat-tim2   - original tran date and time         !!01926
*               orig-acq-inst   - original acquiring institution      !!01927
*               orig-fwd-inst2  - original forwarding institution     !!01928
*                                                                     !!01929
  02  prev-tran-data.                                                  !01930
      04  len                             pic 999.                     !01931
      04  data-typ                        pic 99.                      !01932
      04  rff.                                                         !01933
          08  orig-msg-typ1               pic 9(4).                    !01934
          08  orig-dat-tim1               pic 9(10).                   !01935
          08  orig-trace-num1             pic 9(6).                    !01936
          08  orig-loc-tim                pic 9(6).                    !01937
          08  orig-loc-dat                pic 9(4).                    !01938
          08  orig-setl-dat               pic 9(4).                    !01939
          08  orig-rsn-cde                pic 9(4).                    !01940
          08  orig-fwd-inst1              pic x(11).                   !01941
          08  orig-rcv-inst               pic x(11).                   !01942
      04  cbg-rprn          redefines rff.                             !01943
          08  msg-typ2                    pic 9(4).                    !01944
          08  orig-trace-num2             pic 9(6).                    !01945
          08  orig-dat-tim2               pic 9(10).                   !01946
          08  orig-acq-inst               pic x(11).                   !01947
          08  orig-fwd-inst2              pic x(11).                   !01948
          08  filler                      pic x(18).                   !01949
      04  filler                          pic x(193).                  !01950
*                                                                     !!01951
* supporting information redefines previous transaction               !!01952
* bit map position = 125                                              !!01953
* 1 byte binary + up to 255 bytes variable                            !!01954
* This field only used in Interlink chargeback and representations    !!01955
*                                                                     !!01956
  02  supp-info redefines prev-tran-data.                              !01957
      04  len                             pic 999.                     !01958
      04  txt                             pic x(255).                  !01959
                                                                       !01959N00
      04  echk redefines txt.                                          !01959N01
                                                                       !01959N02
*     Field identifier - $V                                            !01959N03
                                                                       !01959N04
          06  fld-id                      pic x(2).                    !01959N05
                                                                       !01959N06
*     Contains MICR data for check authorization transactions.         !01959N07
                                                                       !01959N08
          06  micr                        pic x(250).                  !01959N09
          06  parsed-micr redefines micr.                              !01959N0A
                                                                       !01959N0B
*     Route and Transit information                                    !01959N0C
                                                                       !01959N0D
              08  rttn.                                                !01959N0E
                                                                       !01959N0F
*     Field Identifier - "AB"                                          !01959N0G
                                                                       !01959N0H
                  10  fld-id              pic x(2).                    !01959N0I
                                                                       !01959N0J
*     Length of Route and Transit information.  Must be "009".         !01959N0K
                                                                       !01959N0L
                  10  len                 pic 999.                     !01959N0M
                                                                       !01959N0N
*     Route and Transit number.                                        !01959N0O
                                                                       !01959N0P
                  10  fld                 pic x(9).                    !01959N0Q
                                                                       !01959N0R
*     Account number information                                       !01959N0S
                                                                       !01959N0T
              08  acct-num.                                            !01959N0U
                                                                       !01959N0V
*     Field Identifier - "AN"                                          !01959N0W
                                                                       !01959N0X
                  10  fld-id              pic x(2).                    !01959N0Y
                                                                       !01959N0Z
*     Length of account number.                                        !01959N10
                                                                       !01959N11
                  10  len                 pic 999.                     !01959N12
                                                                       !01959N13
*     Account number.                                                  !01959N14
                                                                       !01959N15
                  10  fld                 pic x(19).                   !01959N16
                                                                       !01959N17
*     Check Serial Number information                                  !01959N18
                                                                       !01959N19
              08  chk-serial-num.                                      !01959N1A
                                                                       !01959N1B
*     Field Identifier - "CK"                                          !01959N1C
                                                                       !01959N1D
                  10  fld-id              pic x(2).                    !01959N1E
                                                                       !01959N1F
*     Length of check serial number.                                   !01959N1G
                                                                       !01959N1H
                  10  len                 pic 999.                     !01959N1I
                                                                       !01959N1J
*     Check serial number.                                             !01959N1K
                                                                       !01959N1L
                  10  fld                 pic x(15).                   !01959N1M
                                                                       !01959N1N
*     Filler                                                           !01959N1O
                                                                       !01959N1P
              08  filler                  pic x(192).                  !01959N1Q
                                                                       !01959N1R
*     Filler                                                           !01959N1S
                                                                       !01959N1T
          06  filler                      pic x(3).                    !01959N1U
                                                                       !01959N1V
                                                                       !01959%00
*                                                                      !01959%01
* Field 125, Usage 2 - TLV Format                                      !01959%02
*                                                                      !01959%03
  02  supp-info-tlv redefines prev-tran-data.                          !01959%04
      04  lgth                            pic x.                       !01959%05
      04  txt                             pic x(255).                  !01959%06
      04  user-fld-aci                    pic x(2).                    !01959%07
                                                                       !01959%08
                                                                       !01959N1W
                                                                       !01960
**********************************************************************!!01961
*                                                                    *!!01962
*           THESE FIELDS WILL NOT BE LOGGED TO THE ILF               *!!01963
*                                                                    *!!01964
**********************************************************************!!01965
*                                                                     !!01966
* settlement amount  (dollars and cents)                              !!01967
* bit map position = 5                                                !!01968
* 4-bit BCD (unsigned packed) in transmission                         !!01969
*                                                                     !!01970
  02  setl-amt                            pic 9(12).                   !01971
*                                                                     !!01972
* cardholder billing amount  (dollars and cents)                      !!01973
* bit map position = 6                                                !!01974
* 4-bit BCD (unsigned packed) in transmission                         !!01975
*                                                                     !!01976
  02  bill-amt                            pic 9(12).                   !01977
*                                                                     !!01978
* conversion rate, settlement                                         !!01979
* bit map position = 9                                                !!01980
* 4-bit BCD (unsigned packed) in transmission                         !!01981
*                                                                     !!01982
*          digit 1 = position to move decimal point from right        !!01983
*          digits 2-8 = the conversion rate                           !!01984
*                                                                     !!01985
  02  conv-rate-setl                      pic 9(8).                    !01986
*                                                                     !!01987
* conversion date             MMDD                                    !!01988
* bit map position = 16                                               !!01989
* 4-bit BCD (unsigned packed) in transmission                         !!01990
*                                                                     !!01991
  02  conv-dat                            pic 9(4).                    !01992
*                                                                     !!01993
* pin length captured                                                 !!01994
* bit map position = 26                                               !!01995
* 4-bit BCD (unsigned packed) in transmission                         !!01996
*                                                                     !!01997
  02  pin-lgth                           pic 99.                       !01998
                                                                       !01999p00
                                                                       !01999p01
                                                                       !01999p02
*                                                                     !!02004
* track 1 data                                                        !!02005
* bit map position = 45                                               !!02006
*                                                                     !!02007
  02  track1.                                                          !02008
      04  lgth                            pic 99.                      !02009
      04  val                             pic x(76).                   !02010
                                                                       !02010a00
*                                                                      !02010a01
* Optional Issuer ISA Amount                                           !02010a02
* bit map position = 46                                                !02010a03
*                                                                      !02010a04
  02  isa-amt.                                                         !02010a05
      04  lgth                            pic 99.                      !02010a06
          04  amt-fees.                                                !02010a07
              08  fee-typ                 pic 9(2).                    !02010a08
              08  crncy-cde               pic 9(3).                    !02010a09
              08  minor-unit              pic 9.                       !02010a0A
              08  amt-sign                pic 9.                       !02010a0B
              08  amt                     pic 9(8).                    !02010a0C
              08  filler1                 pic 9(10).                   !02010a0D
              08  filler2                 pic 9(11).                   !02010a0E
          04  other-fees.                                              !02010a0F
              08  filler1                 pic 9(10).                   !02010a0G
              08  filler2                 pic 9(10).                   !02010a0H
              08  filler3                 pic 9(16).                   !02010a0I
                                                                       !02010a0J
*                                                                     !!02011
* settlement currency code                                            !!02012
* bit map position = 50                                               !!02013
* 4-bit BCD (unsigned packed) in transmission                         !!02014
*                                                                     !!02015
  02  setl-crncy-cde                      pic x(3).                    !02016
*                                                                     !!02017
* cardholder currency code                                            !!02018
* bit map position = 51                                               !!02019
* 4-bit BCD (unsigned packed) in transmission                         !!02020
*                                                                     !!02021
  02  card-crncy-cde                      pic x(3).                    !02022
*                                                                     !!02023
* personal identification number                                      !!02024
* bit map position = 52                                               !!02025
* binary representation of hex characters in transmission.            !!02026
*                                                                     !!02027
  02  pin                                 pic x(16).                   !02028
*                                                                     !!02029
* security related control information                                !!02030
* bit map position = 53                                               !!02031
* 4-bit BCD (unsigned packed) in transmission                         !!02032
*                                                                     !!02033
*          this field contains the following four sub-elements:       !!02034
*              element           digits   description                 !!02035
*              -------           ------   -----------                 !!02036
*          security format code    2       20 - zone encryption       !!02037
*          pin encryption id       2       01 - Ansi DES              !!02038
*          pin block format code   2       01 - Pin/Pan excluding     !!02039
*                                               check digit           !!02040
*                                          02 - pin size char &       !!02041
*                                               pin left justified    !!02042
*                                               zero filled for 6 &   !!02043
*                                               decimal pad digit     !!02044
*                                          03 - Pin/Pad               !!02045
*                                          04 - Pin/Pan using left    !!02046
*                                               most pan digits       !!02047
*          zone key index        1 or 2    1 or 01 - zone key 1 used  !!02048
*          (1 digit in BASE,                    to encrypt pin block  !!02049
*           2 digits in VDCS )             2 or 02 - zone key 2 used  !!02050
*                                               to encrypt pin block  !!02051
*          filler                8 or 9   zero filled                 !!02052
*                                                                     !!02053
  02  sec-info                            pic x(16).                   !02054
*                                                                     !!02055
* Additional Amounts                                                  !!02056
* bit map position = 54                                               !!02057
*                                                                     !!02058
                                                                       !02059e00
*          one binary byte then 20 to 120 digits for one to six amts  !!02059e01
                                                                       !02059e02
*          lgth is the number of digits in entire field               !!02060
*          acct-typ                                                   !!02061
*            10 - savings                                             !!02062
*            20 - checking                                            !!02063
*            30 - credit                                              !!02064
*                                                                     !!02065
*          amt-typ                                                    !!02066
*            01 - current acct ledger balance                         !!02067
*            02 - account available balance                           !!02068
                                                                       !02068e00
*            3S - amount co-payment                                    !02068e01
                                                                       !02068t00
*            42 - access fee amount in cardholder billing currency     !02068t01
                                                                       !02068t02
                                                                       !02068p01
*            4S - amount Over The Counter (OTC) only or                !02068p02
*                 Total of all Qualified Medical Items (4S, 4U, 4V,    !02068p03
*                                                       4W, and 4X).   !02068p04
*            4T - amount transit                                       !02068p05
*            4U - amount of prescription/Rx                            !02068p06
*            4V - amount of vision/optical                             !02068p07
*            4W - amount of clinic/other qualified medical             !02068p08
*            4X - amount of dental                                     !02068p09
                                                                       !02068w00
*            95 - foreign exchange mark up fee                         !02068w01
                                                                       !02068w02
                                                                       !02068e04
*                                                                     !!02069
*          currency code of amount                                    !!02070
*                                                                     !!02071
*          amt-sign                                                   !!02072
*             C - positive balance                                    !!02073
*             D - negative balance                                    !!02074
*                                                                     !!02075
*          amt not to exceed 9999999                                  !!02076
*                                                                     !!02077
  02  addl-amt.                                                        !02078
                                                                       !02079n00
      04  lgth                            pic 9(3).                    !02079n01
                                                                       !02079n02
      04  bal1.                                                        !02080
          06  acct-typ                    pic 9(2).                    !02081
          06  amt-typ                     pic 9(2).                    !02082
          06  crncy-cde                   pic 9(3).                    !02083
          06  amt-sign                    pic 9(1).                    !02084
          06  amt                         pic 9(12).                   !02085
      04  bal2.                                                        !02086
          06  acct-typ                    pic 9(2).                    !02087
          06  amt-typ                     pic 9(2).                    !02088
          06  crncy-cde                   pic 9(3).                    !02089
          06  amt-sign                    pic 9(1).                    !02090
          06  amt                         pic 9(12).                   !02091
      04  bal3.                                                        !02092
          06  acct-typ                    pic 9(2).                    !02093
          06  amt-typ                     pic 9(2).                    !02094
          06  crncy-cde                   pic 9(3).                    !02095
          06  amt-sign                    pic 9(1).                    !02096
          06  amt                         pic 9(12).                   !02097
      04  bal4.                                                        !02098
          06  acct-typ                    pic 9(2).                    !02099
          06  amt-typ                     pic 9(2).                    !02100
          06  crncy-cde                   pic 9(3).                    !02101
          06  amt-sign                    pic 9(1).                    !02102
          06  amt                         pic 9(12).                   !02103
                                                                       !02103e00
      04  bal5.                                                        !02103e01
          06  acct-typ                    pic 9(2).                    !02103e02
          06  amt-typ                     pic 9(2).                    !02103e03
          06  crncy-cde                   pic 9(3).                    !02103e04
          06  amt-sign                    pic 9(1).                    !02103e05
          06  amt                         pic 9(12).                   !02103e06
      04  bal6.                                                        !02103e07
          06  acct-typ                    pic 9(2).                    !02103e08
          06  amt-typ                     pic 9(2).                    !02103e09
          06  crncy-cde                   pic 9(3).                    !02103e0A
          06  amt-sign                    pic 9(1).                    !02103e0B
          06  amt                         pic 9(12).                   !02103e0C
                                                                       !02103o00
  02 addl-amts redefines addl-amt.                                     !02103o01
      04  lgth                            pic 9(3).                    !02103o02
      04  bal                             occurs 6 times.              !02103o03
          06 acct-typ                     pic 9(2).                    !02103o04
          06 amt-typ                      pic 9(2).                    !02103o05
          06 crncy-cde                    pic 9(3).                    !02103o06
          06 amt-sign                     pic 9(1).                    !02103o07
          06 amt                          pic 9(12).                   !02103o08
                                                                       !02103o09
                                                                       !02103e0D
                                                                       !02103a00
*                                                                      !02103a01
* EMV System-Related Data                                              !02103a02
* bit map position = 55                                                !02103a03
* binary in transmission, variable in length                           !02103a04
*                                                                      !02103a05
* Note: The tags in field 55 may be in any order when sent or          !02103a06
*       received.  Therefore, the tags should be parsed when           !02103a07
*       received and put in the correct place.                         !02103a08
*                                                                      !02103a09
* Tags can be one or two bytes long (each half byte holding a          !02103a0A
* hexadecimal digit).  The presence of the second byte is indicated    !02103a0B
* by a value of 'F' in the second half of the first byte.              !02103a0C
*                                                                      !02103a0D
  02  emv-data.                                                        !02103a0E
                                                                       !02103a0F
*     Must be in the range 001-255                                     !02103a0G
                                                                       !02103a0H
                                                                       !02103d00
      04  lgth                                pic x.                   !02103d01
      04  dataset-id                          pic x.                   !02103d02
      04  dataset-lgth                        pic xx.                  !02103d03
                                                                       !02103d04
      04  info.                                                        !02103a0J
                                                                       !02103a0K
*         Mandatory in the 0100 Authorization Request Message          !02103a0L
                                                                       !02103a0M
          06  arqc.                                                    !02103a0N
                                                                       !02103a0O
*             tag = 9F26                                               !02103a0P
                                                                       !02103a0Q
              08  tag                         pic xx.                  !02103a0R
              08  lgth                        pic x.                   !02103a0S
              08  tag-data                    pic x(8).                !02103a0T
                                                                       !02103a0U
*         Cryptogram Information Data.  Indicates the type of          !02103a0V
*         cryptogram, the actions to be performed by the terminal,     !02103a0W
*         and why the cryptogram was generated.                        !02103a0X
*                                                                      !02103a0Y
*         Bit                                                          !02103a0Z
*         Position   Meaning                                           !02103a0a
*         --------   -------                                           !02103a0b
*                                                                      !02103a0c
*              8-7   Type of cryptogram:                               !02103a0d
*                         00 = AAC                                     !02103a0e
*                         01 = TC                                      !02103a0f
*                         10 = ARQC                                    !02103a0g
*                         11 = Not Used                                !02103a0h
*              6          Reserved for future use                      !02103a0i
*              5          Reserved for future use                      !02103a0j
*              4          Advice required                              !02103a0k
*              3-1        Reason/advice/referral code:                 !02103a0l
*                         000 = No information given                   !02103a0m
*                         001 = Service not allowed                    !02103a0n
*                         010 = PIN Try Limit exceeded                 !02103a0o
*                         011 = Issuer Authentication failed           !02103a0p
*                         1xx = Reserved for future use                !02103a0q
*         Mandatory in the 0100 Authorization Request Message          !02103a0r
                                                                       !02103a0s
          06  crypto-info.                                             !02103a0t
                                                                       !02103a0u
*             tag = 9F27                                               !02103a0v
                                                                       !02103a0w
              08  tag                         pic xx.                  !02103a0x
              08  lgth                        pic x.                   !02103a0y
              08  tag-data                    pic x.                   !02103a0z
                                                                       !02103a10
*         Issuer Application Data.  Contains proprietary               !02103a11
*         application data for transmission to the issuer in an        !02103a12
*         on-line transaction.                                         !02103a13
*         If the card populates the first seven bytes, the acquirer    !02103a14
*         must pass all seven bytes; if the card populates more than   !02103a15
*         seven bytes, the acquirer is obligated to pass only the      !02103a16
*         first seven bytes and may pass all data.                     !02103a17
*         Mandatory in the 0100 Authorization Request Message          !02103a18
                                                                       !02103a19
          06  iss-appl-data.                                           !02103a1A
*             tag = 9F10                                               !02103a1B
                                                                       !02103a1C
              08  tag                         pic xx.                  !02103a1D
              08  lgth                        pic x.                   !02103a1E
              08  tag-data                    pic x(32).               !02103a1F
                                                                       !02103a1G
*         Unpredictable Number.  A value used to provide               !02103a1H
*         variability and uniqueness to the generation of the          !02103a1I
*         application cryptogram.                                      !02103a1J
*         Mandatory in the 0100 Authorization Request Message          !02103a1K
                                                                       !02103a1L
          06  unpredict-num.                                           !02103a1M
                                                                       !02103a1N
*             tag = 9F37                                               !02103a1O
                                                                       !02103a1P
              08  tag                         pic xx.                  !02103a1Q
              08  lgth                        pic x.                   !02103a1R
              08  tag-data                    pic x(4).                !02103a1S
                                                                       !02103a1T
*         Application Transaction Counter.  Counter maintained by      !02103a1U
*         the application in the EMV (incrementing the ATC is          !02103a1V
*         managed by the EMV).                                         !02103a1W
*         Mandatory in the 0100 Authorization Request Message          !02103a1X
          06  atc.                                                     !02103a1Y
                                                                       !02103a1Z
*             tag = 9F36                                               !02103a1a
                                                                       !02103a1b
              08  tag                         pic xx.                  !02103a1c
              08  lgth                        pic x.                   !02103a1d
              08  tag-data                    pic xx.                  !02103a1e
                                                                       !02103a1f
*         Terminal Verification Results.  Status of the                !02103a1g
*         different functions as seen from the terminal as             !02103a1h
*         shown below.  Where the bit setting is not specified,        !02103a1i
*         a bit setting of '1' indicates the meaning specified,        !02103a1j
*         a bit setting of '0' indicates the opposite.                 !02103a1k
*                                                                      !02103a1l
*         Byte 1                                                       !02103a1m
*           Bit                                                        !02103a1n
*           Position   Meaning                                         !02103a1o
*           --------   -------                                         !02103a1p
*              8       Offline data authentication was not             !02103a1q
*                      performed                                       !02103a1r
*              7       Offline static data authentication failed       !02103a1s
*              6       EMV data missing                                !02103a1t
*              5       Card appears on terminal exception file         !02103a1u
*              4       Offline dynamic data authentication failed      !02103a1v
*              3       Reserved for future use                         !02103a1w
*              2       Reserved for future use                         !02103a1x
*              1       Reserved for future use                         !02103a1y
*                                                                      !02103a1z
*         Byte 2                                                       !02103a20
*           Bit                                                        !02103a21
*           Position   Meaning                                         !02103a22
*           --------   -------                                         !02103a23
*              8       EMV and terminal have different                 !02103a24
*                      application versions                            !02103a25
*              7       Expired application                             !02103a26
*              6       Application not yet effective                   !02103a27
*              5       Requested service not allowed for card          !02103a28
*                      product                                         !02103a29
*              4       New card                                        !02103a2A
*              3       Reserved for future use                         !02103a2B
*              2       Reserved for future use                         !02103a2C
*              1       Reserved for future use                         !02103a2D
*                                                                      !02103a2E
*         Byte 3                                                       !02103a2F
*           Bit                                                        !02103a2G
*           Position   Meaning                                         !02103a2H
*           --------   -------                                         !02103a2I
*              8       Cardholder verification was not successful      !02103a2J
*              7       Unrecognized CVM                                !02103a2K
*              6       PIN Try Limit exceeded                          !02103a2L
*              5       PIN entry required and PIN pad not present      !02103a2M
*                      or not working                                  !02103a2N
*              4       PIN entry required, PIN pad present, but        !02103a2O
*                      PIN was not entered                             !02103a2P
*              3       Online PIN entered                              !02103a2Q
*              2       Reserved for future use                         !02103a2R
*              1       Reserved for future use                         !02103a2S
*                                                                      !02103a2T
*         Byte 4                                                       !02103a2U
*           Bit                                                        !02103a2V
*           Position   Meaning                                         !02103a2W
*           --------   -------                                         !02103a2X
*              8       Transaction exceeds floor limit                 !02103a2Y
*              7       Lower consecutive offline limit exceeded        !02103a2Z
*              6       Upper consecutive offline limit exceeded        !02103a2a
*              5       Transaction selected randomly for online        !02103a2b
*                      processing                                      !02103a2c
*              4       Merchant forced transaction online              !02103a2d
*              3       Reserved for future use                         !02103a2e
*              2       Reserved for future use                         !02103a2f
*              1       Reserved for future use                         !02103a2g
*                                                                      !02103a2h
*         Byte 5                                                       !02103a2i
*           Bit                                                        !02103a2j
*           Position   Meaning                                         !02103a2k
*           --------   -------                                         !02103a2l
*              8       Default TDOL used                               !02103a2m
*              7       Issuer authentication was unsuccessful          !02103a2n
*              6       Script processing failed before final           !02103a2o
*                      GENERATE AC                                     !02103a2p
*              5       Script processing failed after final            !02103a2q
*                      GENERATE AC                                     !02103a2r
*              4       Reserved for future use                         !02103a2s
*              3       Reserved for future use                         !02103a2t
*              2       Reserved for future use                         !02103a2u
*              1       Reserved for future use                         !02103a2v
*         Mandatory in the 0100 Authorization Request Message          !02103a2w
                                                                       !02103a2x
          06  tvr.                                                     !02103a2y
                                                                       !02103a2z
*             tag = 95                                                 !02103a30
                                                                       !02103a31
              08  tag                         pic x.                   !02103a32
              08  lgth                        pic x.                   !02103a33
              08  tag-data                    pic x(5).                !02103a34
                                                                       !02103a35
*         Transaction Date (YYMMDD).  Local date that the              !02103a36
*         transaction was authorized.                                  !02103a37
*         Mandatory in the 0100 Authorization Request Message          !02103a38
                                                                       !02103a39
          06  tran-dat.                                                !02103a3A
                                                                       !02103a3B
*             tag = 9A                                                 !02103a3C
                                                                       !02103a3D
              08  tag                         pic x.                   !02103a3E
              08  lgth                        pic x.                   !02103a3F
              08  tag-data                    pic x(3).                !02103a3G
                                                                       !02103a3H
*         Transaction Type.  Indicates the type of financial           !02103a3I
*         transaction, represented by the first two digits of          !02103a3J
*         ISO 8583 (1987) Processing Code.                             !02103a3K
*         Mandatory in the 0100 Authorization Request Message          !02103a3L
                                                                       !02103a3M
          06  tran-typ.                                                !02103a3N
                                                                       !02103a3O
*             tag = 9C                                                 !02103a3P
                                                                       !02103a3Q
              08  tag                         pic x.                   !02103a3R
              08  lgth                        pic x.                   !02103a3S
              08  tag-data                    pic x.                   !02103a3T
                                                                       !02103a3U
*         Authorized amount of the transaction (excluding              !02103a3V
*         adjustments).                                                !02103a3W
*         Mandatory in the 0100 Authorization Request Message          !02103a3X
                                                                       !02103a3Y
          06  amt-auth.                                                !02103a3Z
                                                                       !02103a3a
*             tag = 9F02                                               !02103a3b
                                                                       !02103a3c
              08  tag                         pic xx.                  !02103a3d
              08  lgth                        pic x.                   !02103a3e
              08  tag-data                    pic x(6).                !02103a3f
                                                                       !02103a3g
*         Transaction Currency Code.  Indicates the currency code      !02103a3h
*         of the transaction according to ISO 4217, as received        !02103a3i
*         from the device or interchange.                              !02103a3j
*         Mandatory in the 0100 Authorization Request Message          !02103a3k
                                                                       !02103a3l
                                                                       !02103b00
          06  trn-crncy-code.                                          !02103b01
                                                                       !02103b02
                                                                       !02103a3n
*             tag = 5F2A                                               !02103a3o
                                                                       !02103a3p
              08  tag                         pic xx.                  !02103a3q
              08  lgth                        pic x.                   !02103a3r
              08  tag-data                    pic xx.                  !02103a3s
                                                                       !02103a3t
*         Application Interchange Profile.  Indicates the              !02103a3u
*         capabilities of the card to support specific functions       !02103a3v
*         in the application, as shown below.  Where the bit           !02103a3w
*         value is not specified, a bit setting of '1'                 !02103a3x
*         indicates the meaning specified, a bit setting of '0'        !02103a3y
*         indicates the opposite.                                      !02103a3z
*                                                                      !02103a40
*         Byte 1                                                       !02103a41
*           Bit                                                        !02103a42
*           Position   Meaning                                         !02103a43
*           --------   -------                                         !02103a44
*              8       Initiate                                        !02103a45
*              7       Offline static data authentication is           !02103a46
*                      supported                                       !02103a47
*              6       Offline dynamic data authentication is          !02103a48
*                      supported                                       !02103a49
*              5       Cardholder verification is supported            !02103a4A
*              4       Terminal risk management is to be               !02103a4B
*                      performed                                       !02103a4C
*              3       Issuer authentication is supported              !02103a4D
*              2       Reserved for future use                         !02103a4E
*              1       Reserved for future use                         !02103a4F
*                                                                      !02103a4G
*         Byte 2                                                       !02103a4H
*           Bit                                                        !02103a4I
*           Position   Meaning                                         !02103a4J
*           --------   -------                                         !02103a4K
*              8       Reserved for future use                         !02103a4L
*              7       Reserved for future use                         !02103a4M
*              6       Reserved for future use                         !02103a4N
*              5       Reserved for future use                         !02103a4O
*              4       Reserved for future use                         !02103a4P
*              3       Reserved for future use                         !02103a4Q
*              2       Reserved for future use                         !02103a4R
*              1       Reserved for future use                         !02103a4S
*         Mandatory in the 0100 Authorization Request Message          !02103a4T
                                                                       !02103a4U
          06  aip.                                                     !02103a4V
                                                                       !02103a4W
*             tag = 82                                                 !02103a4X
                                                                       !02103a4Y
              08  tag                         pic x.                   !02103a4Z
              08  lgth                        pic x.                   !02103a4a
              08  tag-data                    pic xx.                  !02103a4b
                                                                       !02103a4c
*         Terminal Country Code.  Indicates the country of the         !02103a4d
*         terminal, represented according to ISO 3166.                 !02103a4e
*         Mandatory in the 0100 Authorization Request Message          !02103a4f
                                                                       !02103a4g
          06  term-cntry-cde.                                          !02103a4h
                                                                       !02103a4i
*             tag = 9F1A                                               !02103a4j
                                                                       !02103a4k
              08  tag                         pic xx.                  !02103a4l
              08  lgth                        pic x.                   !02103a4m
              08  tag-data                    pic xx.                  !02103a4n
                                                                       !02103a4o
*         Secondary amount associated with the transaction             !02103a4p
*         representing a cashback amount.                              !02103a4q
*         Mandatory in the 0100 Authorization Request Message          !02103a4r
                                                                       !02103a4s
          06  amt-other.                                               !02103a4t
                                                                       !02103a4u
*             tag = 9F03                                               !02103a4v
                                                                       !02103a4w
              08  tag                         pic xx.                  !02103a4x
              08  lgth                        pic x.                   !02103a4y
                                                                       !02103a4z
*         If the card populates the six bytes of data in Amount        !02103a50
*         Other, the acquirer must pass all six bytes.                 !02103a51
                                                                       !02103a52
              08  tag-data                    pic x(6).                !02103a53
                                                                       !02103a54
*         Cardholder Verification Method Results.  Indicates the       !02103a55
*         results of the last CVM performed, as shown below.           !02103a56
*         Where the bit setting is not specified, a bit setting        !02103a57
*         of '1' indicates the meaning specified, a bit setting        !02103a58
*         of '0' indicates the opposite.                               !02103a59
*                                                                      !02103a5A
*         Byte 1 (CVM Performed)                                       !02103a5B
*           Bit                                                        !02103a5C
*           Position   Meaning                                         !02103a5D
*           --------   -------                                         !02103a5E
*              8       Reserved for future use                         !02103a5F
*              7       0 = Fail cardholder verification if this        !02103a5G
*                          CVM is unsuccessful                         !02103a5H
*                      1 = Apply succeeding CVR if this CVM is         !02103a5I
*                          unsuccessful                                !02103a5J
*             6-1      000000 = Fail CVM processing                    !02103a5K
*                      000001 = Plaintext PIN verification             !02103a5L
*                               performed by EMV                       !02103a5M
*                      000010 = Enciphered PIN verified online         !02103a5N
*                      000011 = Plaintext PIN verification             !02103a5O
*                               performed by EMV and                   !02103a5P
*                               signature (paper)                      !02103a5Q
*                      000100 = Enciphered PIN verification            !02103a5R
*                               performed by EMV                       !02103a5S
*                      000101 = Enciphered PIN verification            !02103a5T
*                               performed by EMV and                   !02103a5U
*                               signature (paper)                      !02103a5V
*                      0xxxxx = Values in the range 000110-011101      !02103a5W
*                               reserved for future use by this        !02103a5X
*                               specification                          !02103a5Y
*                      011110 = Signature (paper)                      !02103a5Z
*                      011111 = No CVM required                        !02103a5a
*                      10xxxx = Values in the range 100000-101111      !02103a5b
*                               reserved for use by the                !02103a5c
*                               individual payment systems             !02103a5d
*                      11xxxx = Values in the range 110000-111110      !02103a5e
*                               reserved for use by the issuer         !02103a5f
*                      111111 = Not available for use                  !02103a5g
*                                                                      !02103a5h
*         Byte 2 (CVM Condition)                                       !02103a5i
*           Value  Meaning                                             !02103a5j
*           -----  -------                                             !02103a5k
*             00   Always                                              !02103a5l
*             01   If cash or cashback                                 !02103a5m
*             02   If not cash or cashback                             !02103a5n
*             03   If terminal supports the CVM                        !02103a5o
*             04   Reserved for future use                             !02103a5p
*             05   Reserved for future use                             !02103a5q
*             06   If transaction is in the application currency       !02103a5r
*                  and is under X value                                !02103a5s
*             07   If transaction is in the application currency       !02103a5t
*                  and is over X value                                 !02103a5u
*             08   If transaction is in the application currency       !02103a5v
*                  and is under Y value                                !02103a5w
*             09   If transaction is in the application currency       !02103a5x
*                  and is over Y value                                 !02103a5y
*           0A-7F  Reserved for future use                             !02103a5z
*           80-FF  Reserved for future use by individual payment       !02103a60
*                  systems                                             !02103a61
*                                                                      !02103a62
*         Byte 3 (CVM Result)                                          !02103a63
*         Result of the (last) CVM performed as known by the           !02103a64
*         terminal.                                                    !02103a65
*         0 = Unknown (for example, for signature)                     !02103a66
*         1 = Failed (for example, for offline PIN)                    !02103a67
*         2 = Successful (for example, for offline PIN)                !02103a68
*         Optional in the 0100 Authorization Request Message           !02103a69
                                                                       !02103a6A
          06  cvm-rslts.                                               !02103a6B
                                                                       !02103a6C
*             tag = 9F34                                               !02103a6D
                                                                       !02103a6E
              08  tag                         pic xx.                  !02103a6F
              08  lgth                        pic x.                   !02103a6G
              08  tag-data                    pic x(3).                !02103a6H
                                                                       !02103a6I
*         Terminal Capabilities.  Indicates the card data input,       !02103a6J
*         CVM, and security capabilities of the terminal, as           !02103a6K
*         shown below.  Where the bit setting is not specified,        !02103a6L
*         a bit setting of '1' indicates the meaning specified,        !02103a6M
*         a bit setting of '0' indicates the opposite.                 !02103a6N
*                                                                      !02103a6O
*         Byte 1 (Card Data Input Capability)                          !02103a6P
*           Bit                                                        !02103a6Q
*           Position   Meaning                                         !02103a6R
*           --------   -------                                         !02103a6S
*              8       Manual key entry                                !02103a6T
*              7       Magnetic stripe                                 !02103a6U
*              6       IC with contacts                                !02103a6V
*              5       Reserved for future use                         !02103a6W
*              4       Reserved for future use                         !02103a6X
*              3       Reserved for future use                         !02103a6Y
*              2       Reserved for future use                         !02103a6Z
*              1       Reserved for future use                         !02103a6a
*                                                                      !02103a6b
*         Byte 2 (CVM Capability)                                      !02103a6c
*           Bit                                                        !02103a6d
*           Position   Meaning                                         !02103a6e
*           --------   -------                                         !02103a6f
*              8       Plaintext PIN for EMV verification              !02103a6g
*              7       Enciphered PIN for online verification          !02103a6h
*              6       Signature (paper)                               !02103a6i
*              5       Enciphered PIN for offline verification         !02103a6j
*              4       Reserved for future use                         !02103a6k
*              3       Reserved for future use                         !02103a6l
*              2       Reserved for future use                         !02103a6m
*              1       Reserved for future use                         !02103a6n
*                                                                      !02103a6o
*         Byte 3 (Security Capability)                                 !02103a6p
*           Bit                                                        !02103a6q
*           Position   Meaning                                         !02103a6r
*           --------   -------                                         !02103a6s
*              8       Static data authentication                      !02103a6t
*              7       Dynamic data authentication                     !02103a6u
*              6       Card capture                                    !02103a6v
*              5       Reserved for future use                         !02103a6w
*              4       Reserved for future use                         !02103a6x
*              3       Reserved for future use                         !02103a6y
*              2       Reserved for future use                         !02103a6z
*              1       Reserved for future use                         !02103a70
*         Optional in the 0100 Authorization Request Message           !02103a71
                                                                       !02103a72
          06  term-cap.                                                !02103a73
                                                                       !02103a74
*             tag = 9F33                                               !02103a75
                                                                       !02103a76
              08  tag                         pic xx.                  !02103a77
              08  lgth                        pic x.                   !02103a78
              08  tag-data                    pic x(3).                !02103a79
                                                                       !02103a7A
*         EMV Terminal Type.  Indicates the environment of the         !02103a7B
*         terminal, its communications capability, and its             !02103a7C
*         operational control, as shown below.                         !02103a7D
*                                                                      !02103a7E
*                          Operational Control Provided By:            !02103a7F
*                           Financial     Merchant    Cardholder       !02103a7G
*         Environment      Institution                                 !02103a7H
*         -----------      -----------    --------    ----------       !02103a7I
*         Attended                                                     !02103a7J
*           Online Only         11           21           --           !02103a7K
*           Offline with        12           22           --           !02103a7L
*             online                                                   !02103a7M
*             capability                                               !02103a7N
*           Offline only        13           23           --           !02103a7O
*                                                                      !02103a7P
*         Unattended                                                   !02103a7Q
*           Online Only         14           24           34           !02103a7R
*           Offline with        15           25           35           !02103a7S
*             online                                                   !02103a7T
*             capability                                               !02103a7U
*           Offline only        16           26           36           !02103a7V
*         Optional in the 0100 Authorization Request Message           !02103a7W
                                                                       !02103a7X
          06  emv-term-typ.                                            !02103a7Y
                                                                       !02103a7Z
*             tag = 9F35                                               !02103a7a
                                                                       !02103a7b
              08  tag                         pic xx.                  !02103a7c
              08  lgth                        pic x.                   !02103a7d
              08  tag-data                    pic x.                   !02103a7e
                                                                       !02103a7f
                                                                       !02103r00
                                                                       !02103r01
                                                                       !02103r02
                                                                       !02103a7s
*         One character codes that define the type of                  !02103a7t
*         transaction for which authorization is requested.            !02103a7u
*         Optional in the 0100 Authorization Request Message           !02103a7v
*                                                                      !02103a7w
*         Value  Description                                           !02103a7x
*         -----  ---------------------------------------------         !02103a7y
*           A    Automobile/Vehicle Rental                             !02103a7z
*           C    Cash Disbursement                                     !02103a80
*           F    Restaurant                                            !02103a81
*           H    Hotel, Motel and Cruise Ship Services                 !02103a82
*           O    College/School Expense                                !02103a83
*           R    Retail, All other Transactions                        !02103a84
*           T    Mail, Telephone Order or Pre-authorized Order         !02103a85
*           U    Unique Transaction                                    !02103a86
*           X    Transportation                                        !02103a87
*           Z    ATM Cash Disbursement                                 !02103a88
                                                                       !02103a89
          06  df-nam.                                                  !02103a8A
                                                                       !02103a8B
*             tag = 84                                                 !02103a8C
                                                                       !02103a8D
              08  tag                         pic x.                   !02103a8E
              08  lgth                        pic x.                   !02103a8F
              08  tag-data                    pic x(16).               !02103a8G
                                                                       !02103a8H
*         Application Version Number.  Version number assigned         !02103a8I
*         by the payment system for the application.                   !02103a8J
*         Optional in the 0100 Authorization Request Message           !02103a8K
                                                                       !02103a8L
          06  appl-ver-num.                                            !02103a8M
                                                                       !02103a8N
*             tag = 9F09                                               !02103a8O
                                                                       !02103a8P
              08  tag                         pic xx.                  !02103a8Q
              08  lgth                        pic x.                   !02103a8R
              08  tag-data                    pic xx.                  !02103a8S
                                                                       !02103a8T
*                                                                      !02103a8U
*        Issuer Script Results.  This tag holds issuer script          !02103a8V
*        processing results.                                           !02103a8W
*                                                                      !02103a8X
                                                                       !02103a8Y
          06  iss-scrpt-rslts.                                         !02103a8Z
                                                                       !02103a8a
*             tag = 9F5B                                               !02103a8b
                                                                       !02103a8c
              08  tag                        pic xx.                   !02103a8d
              08  lgth                       pic x.                    !02103a8e
              08  tag-data                   pic x(5).                 !02103a8f
                                                                       !02103a8g
*         Issuer Authentication Data.  Data sent to the EMV for        !02103a8h
*         on-line issuer authentication.                               !02103a8i
*         Mandatory in the 0110 Authorization Request Response Msg     !02103a8j
                                                                       !02103a8k
          06  iss-auth.                                                !02103a8l
                                                                       !02103a8m
*             tag = 91                                                 !02103a8n
                                                                       !02103a8o
              08  tag                         pic x.                   !02103a8p
              08  lgth                        pic x.                   !02103a8q
              08  tag-data                    pic x(16).               !02103a8r
                                                                       !02103a8s
*         Optional in the 0110 Authorization Request Response Message  !02103a8t
                                                                       !02103a8u
          06  iss-script1.                                             !02103a8v
*             tag = 71                                                 !02103a8w
                                                                       !02103a8x
              08  tag                         pic x.                   !02103a8y
              08  lgth                        pic x.                   !02103a8z
              08  tag-data                    pic x(127).              !02103a90
                                                                       !02103a91
          06  iss-script2.                                             !02103a92
*             tag = 72                                                 !02103a93
              08  tag                         pic x.                   !02103a94
              08  lgth                        pic x.                   !02103a95
              08  tag-data                    pic x(127).              !02103a96
                                                                       !02103a97
                                                                       !02103j00
*         Secondary PIN block for PIN Change transactions              !02103j01
                                                                       !02103j02
          06  scnd-pin-blk.                                            !02103j03
                                                                       !02103j04
*             tag = C0                                                 !02103j05
                                                                       !02103j06
              08  tag                         pic x.                   !02103j07
              08  lgth                        pic x.                   !02103j08
              08  tag-data                    pic x(8).                !02103j09
                                                                       !02103j0A
                                                                       !02103k00
*         The AID is made up of the Registered Application Provider    !02103k01
*         Identifier (RID) and the Proprietary Identifier Extension.   !02103k02
*          Value              Description                              !02103k03
*          -----              -----------                              !02103k04
*          A0000000031010     Visa debit or credit                     !02103k05
*          A0000000032010     Visa Electron                            !02103k06
*          A0000000033010     Interlink                                !02103k07
*          A0000000038010     PLUS                                     !02103k08
*          A000000003999910   Proprietary                              !02103k09
                                                                       !02103k0A
          06  aid.                                                     !02103k0B
                                                                       !02103k0C
*             tag = 4F                                                 !02103k0D
                                                                       !02103k0E
              08  tag                         pic x.                   !02103k0F
              08  lgth                        pic x.                   !02103k0G
              08  tag-data                    pic x(7).                !02103k0H
                                                                       !02103p00
*                                                                      !02103p01
*         Form Factor Indicators.  Contains identification of the      !02103p02
*         cardholder device, its security features and the             !02103p03
*         communication technology used to acquire the transaction.    !02103p04
*                                                                      !02103p05
*          Byte 1  (Cardholder Device Type)                            !02103p06
*          Byte 2  (Cardholder Device Security Features)               !02103p07
*          Byte 3  (Reserved)                                          !02103p08
*          Byte 4  (Communication Technology)                          !02103p09
*                                                                      !02103p0A
          06  form-factr-ind.                                          !02103p0B
*                                                                      !02103p0C
*             tag = 9F6E                                               !02103p0D
*                                                                      !02103p0E
          08  tag                             pic xx.                  !02103p0F
          08  lgth                            pic x.                   !02103p0G
          08  tag-data                        pic x(4).                !02103p0H
                                                                       !02103p0I
                                                                       !02103s00
*                                                                      !02103s01
*         Terminal Transaction Qualifiers.  Indicates reader           !02103s02
*         capabilities (e.g. MSD, qVSDC or Contact VSDC),              !02103s03
*         requirements (process offline or online) and                 !02103s04
*         preferences to the card.                                     !02103s05
*                                                                      !02103s06
*                                                                      !02103s07
          06  term-txn-qual.                                           !02103s08
*                                                                      !02103s09
*             tag = 9F66                                               !02103s0A
*                                                                      !02103s0B
              08  tag                         pic xx.                  !02103s0C
              08  lgth                        pic x.                   !02103s0D
              08  tag-data                    pic x(4).                !02103s0E
*                                                                      !02103s0F
*         Customer Exclusive Data.  This field is eligible for the     !02103s0G
*         issuer's discretionary use.                                  !02103s0H
*                                                                      !02103s0I
*                                                                      !02103s0J
          06  cust-exclsv-data.                                        !02103s0K
*                                                                      !02103s0L
*             tag = 9F7C                                               !02103s0M
*                                                                      !02103s0N
              08  tag                         pic xx.                  !02103s0O
              08  lgth                        pic x.                   !02103s0P
              08  tag-data                    pic x(32).               !02103s0Q
                                                                       !02103s0R
                                                                       !02103s0S
                                                                       !02103s0T
                                                                       !02103s0U
*                                                                     !!02119
* original data elements                                              !!02120
* bit map position = 90                                               !!02121
* 4-bit BCD (unsigned packed) in transmission                         !!02122
*                                                                     !!02123
*         BASE 0400/0420 consists of four sub-elements as follows:    !!02124
*              original message type identifier                       !!02125
*              original system audit trace number                     !!02126
*              original transmission date and time                    !!02127
*              original acquiring institution identification code     !!02128
*              original forwarding institution identification code    !!02129
*                                                                     !!02130
*         VDCS 0400/0420 consists of two sub-elements as follows:     !!02131
*              original message type identifier                       !!02132
*              filler                                                 !!02133
*                                                                     !!02134
*         VDCS 0220 consists of three sub-elements as follows:        !!02135
*              original message type identifier                       !!02136
*              BASE II microfilm reference number                     !!02137
*              filler                                                 !!02138
*                                                                     !!02139
  02  orig.                                                            !02140
      04  msg-typ                         pic 9(4).                    !02141
      04  base.                                                        !02142
          08  trace-num                   pic 9(6).                    !02143
          08  dat-tim                     pic 9(10).                   !02144
          08  acq-inst-id                 pic x(11).                   !02145
          08  fwd-inst-id                 pic x(11).                   !02146
      04  vdcs             redefines base.                             !02147
          08  orig-ref-num                pic x(23).                   !02148
          08  filler                      pic x(15).                   !02149
*                                                                     !!02150
* replacement amounts                                                 !!02151
* bit map position = 95                                               !!02152
* Visa only uses the first subfield in BASE I reversals for the       !!02153
* completed amount.  Visa does not use this field in VDCS messages.   !!02154
*                                                                     !!02155
*     consist of four sub-elements as follows:                        !!02156
*         actual amount, transaction   n 12                           !!02157
*         actual amount, settlement    n 12                           !!02158
*         actual amount, transaction fee  x + n 8                     !!02159
*         actual amount, settlement fee   x + n 8                     !!02160
*             where x = "C" for a credit and "D" for a debit.         !!02161
*                                                                     !!02162
  02  repl.                                                            !02163
      04  repl-tran-amt                   pic 9(12).                   !02164
      04  filler1                         pic x(30).                   !02165
                                                                       !02165c00
                                                                       !02165e00
*                                                                      !02165e01
* Transaction Specific Data                                            !02165e02
* bit map position = 104                                               !02165e03
* EBCDIC in transmission                                               !02165e04
*                                                                      !02165e05
  02  txn-spcf-data.                                                   !02165e06
      04  lgth                            pic x.                       !02165e07
                                                                       !02165r00
                                                                       !02165r01
                                                                       !02165r02
      04  info                            pic x(255).                  !02165e0A
                                                                       !02165r03
                                                                       !02165r04
                                                                       !02165r05
                                                                       !02165p00
*                                                                      !02165p01
* Card Issuer Reference Data                                           !02165p02
* bit map position = 116                                               !02165p03
* EBCDIC in transmission                                               !02165p04
*                                                                      !02165p05
  02  crd-iss-ref-data.                                                !02165p06
      04  lgth                            pic x.                       !02165p07
      04  info                            pic x(255).                  !02165p08
                                                                       !02165q00
*                                                                      !02165q01
*  National Use Data                                                   !02165q02
*  bit map position = 117                                              !02165q03
*  This field is a national-use field that will contain a country code !02165q04
*  and a data field for information unique to the processing of Visa   !02165q05
*  transactions in a given country.                                    !02165q06
*                                                                      !02165q07
  02  natl-use-data.                                                   !02165q08
      04  lgth                            pic 999.                     !02165q09
      04  cntry-cde                       pic x(3).                    !02165q0A
      04  info                            pic x(252).                  !02165q0B
                                                                       !02165q0C
                                                                       !02165p09
                                                                       !02165i0M
                                                                       !02165e0i
                                                                       !02165e0j
*                                                                      !02165c01
* intra-country data                                                   !02165c02
* bit map position = 118                                               !02165c03
* Usage 1 of this data element will be used to support installment     !02165c04
* transaction data.                                                    !02165c05
*                                                                      !02165c06
  02  intra-cntry-data.                                                !02165c07
                                                                       !02165g00
                                                                       !02165g01
      04  lgth                            pic 999.                     !02165g02
      04  cntry-cde                       pic x(4).                    !02165g03
                                                                       !02165g04
      04  info                            pic x(253).                  !02165c0A
* Redefintion for South Africa Usage 1 Data                            !02165c0B
      04  sa  redefines info.                                          !02165c0C
          06  bit-map                     pic x(2).                    !02165c0D
          06  budget-prd                  pic x(2).                    !02165c0E
          06  filler                      pic x(249).                  !02165c0F
* Redefinition for Greece Usage 1 Data                                 !02165c0G
      04  gr  redefines info.                                          !02165c0H
          06  auth-resp-cde               pic 9(3).                    !02165c0I
          06  msg-typ                     pic 9.                       !02165c0J
          06  term-id                     pic 9(13).                   !02165c0K
          06  proc-dat                    pic 9(6).                    !02165c0L
          06  entry-ind                   pic 9.                       !02165c0M
          06  pmnt-mde                    pic 9(2).                    !02165c0N
          06  sales-slip-num              pic 9(5).                    !02165c0O
          06  pre-apprv-typ               pic 9.                       !02165c0P
          06  iss-co-cde                  pic 9(5).                    !02165c0Q
          06  goods-cde                   pic 9(7).                    !02165c0R
          06  sep1                        pic 9.                       !02165c0S
          06  tax-amt                     pic 9(7).                    !02165c0T
          06  sep2                        pic 9.                       !02165c0U
          06  num-mm-gratuity             pic 9(2).                    !02165c0V
          06  num-instl                   pic 9(2).                    !02165c0W
          06  filler                      pic x(196).                  !02165c0X
                                                                       !02165l00
* Redefinition for Japan Usage 1 Data                                  !02165l01
      04  japan                           redefines info.              !02165l02
          06  prvt-use-fld                pic x(235).                  !02165l03
          06  user-fld1                   pic x(18).                   !02165l04
                                                                       !02165l05
                                                                       !02165c0Y
                                                                       !02166p00
                                                                       !02166p01
                                                                       !02166p02
                                                                       !02175q00
                                                                       !02175q01
                                                                       !02175q02
*                                                                     !!02185
                                                                       !02186s00
* Verification data                                                   !!02186s01
                                                                       !02186s02
* bit map position = 123                                              !!02187
* 4-bit BCD (unsigned packed) in transmission.                        !!02188
                                                                       !02189s00
                                                                       !02189s01
*                                                                     !!02190
  02  addr-vrfy.                                                       !02191
     04  LGTH                  PIC 99.                                 !02192
*                                                                     !!02193
*          This field contains the zip code for the cardholder's      !!02194
*          billing address.  The zip code should be either 5 or       !!02195
*          9 digits long.  If the zip is 5 digits, it should be       !!02196
*          left-justified and space filled.                           !!02197
*                                                                     !!02198
     04  ZIP-CDE               PIC X(9).                               !02199
*                                                                     !!02200
*          This field contains the cardholder's billing address.      !!02201
*                                                                     !!02202
     04  ADDR                  PIC X(20).                              !02203
                                                                       !02203Q00
     04  filler                PIC X(32).                              !02203Q01
                                                                       !02203Q02
*                                                                      !02203Q03
* Address Verification data in International Format.  This field will  !02203Q04
* use Tag Length Value (TLV) format, which consists of a tag to        !02203Q05
* distinguish what type of data is in each subfield, length of the     !02203Q06
* data, followed by the actual data.  These subfields can be sent or   !02203Q07
* received in any order.                                               !02203Q08
*                                                                      !02203Q09
  02  intl-addr-vrfy           redefines addr-vrfy.                    !02203Q0A
      04  lgth                 pic 99.                                 !02203Q0B
*                                                                      !02203Q0C
* When using the International Format, the data id will be "66"        !02203Q0D
*                                                                      !02203Q0E
      04  data-id              pic x(2).                               !02203Q0F
      04  data-lgth            pic 99.                                 !02203Q0G
                                                                       !02203Q0H
*                                                                      !02203Q0I
* The tag for the International Format Postal Code TLV is * "C0".      !02203Q0J
* The length can be 1-9 bytes.  The Postal Code must be alphanumeric   !02203Q0K
* data.                                                                !02203Q0L
*                                                                      !02203Q0M
      04  iavs-pstl-cde.                                               !02203Q0N
          08  tag              pic x(2).                               !02203Q0O
          08  lgth             pic 99.                                 !02203Q0P
          08  pstl-cde         pic x(9).                               !02203Q0Q
                                                                       !02203Q0R
*                                                                      !02203Q0S
* The tag for the International Format Street Address TLV is "CF".     !02203Q0T
* The length can be 1-40 bytes.  The Street Address must be            !02203Q0U
* alphanumeric data.                                                   !02203Q0V
*                                                                      !02203Q0W
      04  iavs-addr.                                                   !02203Q0X
          08  tag              pic x(2).                               !02203Q0Y
          08  lgth             pic 99.                                 !02203Q0Z
          08  addr             pic x(40).                              !02203Q10
                                                                       !02203Q11
                                                                       !02203F00
                                                                       !02203l00
                                                                       !02203q00
                                                                       !02203q01
                                                                       !02203q02
                                                                       !02203l0A
*                                                                      !02203F01
* VISA Private Use Field                                               !02203F02
* bit map position = 126                                               !02203F03
*                                                                      !02203F04
  02  visa-private-use-fld.                                            !02203F05
      04  lgth                            pic 9(3).                    !02203F06
      04  bit-map                         pic x(8).                    !02203F07
      04  cust-name                       pic x(25).                   !02203F08
      04  cust-addr                       pic x(57).                   !02203F09
      04  biller-addr                     pic x(57).                   !02203F0A
      04  biller-phon-num                 pic x(18).                   !02203F0B
      04  proc-by-date                    pic x(6).                    !02203F0C
*                                                                      !02203F0D
*         The Cardholder Certificate Serial Number for Secure          !02203F0E
*         Electronic Commerce.                                         !02203F0F
*                                                                      !02203F0G
      04  crdhldr-cert.                                                !02203F0H
          08  lgth                        pic 99.                      !02203F0I
          08  serial-num                  pic x(32).                   !02203F0J
*                                                                      !02203F0K
*         The Merchant Certificate Serial Number for Secure            !02203F0L
*         Electronic Commerce.                                         !02203F0M
*                                                                      !02203F0N
      04  mrch-cert.                                                   !02203F0O
          08  lgth                        pic 99.                      !02203F0P
          08  serial-num                  pic x(32).                   !02203F0Q
*                                                                      !02203F0R
*         A value assigned to a SET transaction as a unique            !02203F0S
*         transaction identifier.                                      !02203F0T
*                                                                      !02203F0U
      04  xid                             pic x(40).                   !02203F0V
*                                                                      !02203F0W
*         A hash value calculated by applying a secure hash algorithm  !02203F0X
*         to the XID and CardSecret (a secret SET-defined value known  !02203F0Y
*         only to the cardholder and the issuer of the cardholder      !02203F0Z
*         certificate).                                                !02203F10
*                                                                      !02203F11
      04  trans-stain                     pic x(40).                   !02203F12
                                                                       !02203F13
      04  cvv2-data.                                                   !02203F14
*                                                                      !02203F15
*             CVV2 Presence Indicator.  Valid Values:                  !02203F16
*             0 = CVV2 value bypassed or not provided by merchant.     !02203F17
*             1 = CVV2 value is present.                               !02203F18
*             2 = CVV2 value is on card, but illegible.                !02203F19
*             9 = Cardholder states that card has no CVV2 imprint.     !02203F1A
*                                                                      !02203F1B
          08  cvv2-present-ind            pic x.                       !02203F1C
*                                                                      !02203F1D
*             CVV2 Response Type.  Valid Values:                       !02203F1E
*             0 = Only normal response code should be returned.        !02203F1F
*             1 = Normal response code and CVV2 result should be       !02203F1G
*                 returned.                                            !02203F1H
*                                                                      !02203F1I
          08  cvv2-resp-typ               pic x.                       !02203F1J
          08  cvv2-value                  pic x(4).                    !02203F1K
                                                                       !02203I00
*                                                                      !02203I01
*         A 24 bit binary field containing service development flags   !02203I02
*             Bit 1 - Transponder Indicator                            !02203I03
*             Bit 2 - Relationship Participant Indicator               !02203I04
                                                                       !02203M00
*             Bit 3 - Deferred Billing Indicator.  Valid Values:       !02203M01
*                     0 = deferred billing is not provided             !02203M02
*                     1 = deferred billing is used at the point of     !02203M03
*                             service                                  !02203M04
                                                                       !02203V00
*             Bit 4 - Remote terminal Indicator.  Valid Values:        !02203V01
*                     0 = Not provided                                 !02203V02
*                     1 = Remote terminal indicator - ATM is at a      !02203V03
*                         remote location                              !02203V04
*             Bits 5-24 are set equal to zero and are reserved for     !02203V05
*             future use                                               !02203V06
                                                                       !02203V07
                                                                       !02203V08
                                                                       !02203V09
                                                                       !02203V0A
                                                                       !02203M07
                                                                       !02203M08
                                                                       !02203M09
*                                                                      !02203I06
      04 srvc-dvlp-fld                    pic x(3).                    !02203I07
                                                                       !02203S00
*                                                                      !02203S01
*           Recurring Payment indicator, subfield 13.                  !02203S02
*           Valid values:                                              !02203S03
*               space - field not applicable or acquirer did not       !02203S04
*                       specify                                        !02203S05
*                   R - Recurring payment                              !02203S06
*                                                                      !02203S07
                                                                       !02203S08
      04 recur-pmnt-ind                   pic x(1).                    !02203S09
                                                                       !02203t00
*                                                                      !02203t01
*           POS Environment, subfield 13                               !02203t02
*           Valid values:                                              !02203t03
*               space - field not applicable or acquirer did not       !02203t04
*                       specify                                        !02203t05
*                   I - Installment payment                            !02203t06
*                   R - Recurring Payment                              !02203t07
*                                                                      !02203t08
      04 pos-envmt redefines recur-pmnt-ind  pic x.                    !02203t09
                                                                       !02203t0A
                                                                       !02203S0A
*                                                                      !02203S0B
*          MasterCard UCAF Collection Indicator, subfield 15           !02203S0C
*                                                                      !02203S0D
                                                                       !02203S0E
      04 ucaf-ind                         pic x(1).                    !02203S0F
*                                                                      !02203S0G
*          MasterCard UCAF data, subfield 16                           !02203S0H
*          lgth is 1 byte, sent in binary                              !02203S0I
*          data is 32 ANS EBCDIC                                       !02203S0J
*                                                                      !02203S0K
      04 ucaf-fld.                                                     !02203S0L
         08 lgth                          pic 99.                      !02203S0M
         08 info                          pic x(32).                   !02203S0N
                                                                       !02203S0O
                                                                       !02203w00
                                                                       !02203$00
*                                                                      !02203$01
*          Agent Unique Account Result, subfield 18                    !02203$02
*                                                                      !02203$03
      04 agent-unique-acct-rslt.                                       !02203$04
          08 lgth                         pic 99.                      !02203$05
          08 info.                                                     !02203$06
              10 agent-unique-id          pic x(5).                    !02203$07
              10 hash-rslt                pic x(6).                    !02203$08
                                                                       !02203$09
*                                                                      !02203w01
*          Dynamic Currency Conversion Indicator, subfield 19          !02203w02
*                                                                      !02203w03
                                                                       !02203w04
      04 dcc-ind                          pic x(1).                    !02203w05
                                                                       !02203$0A
*                                                                      !02203$0B
*          Additional Authentication Method, subfield 20               !02203$0C
*                                                                      !02203$0D
      04 adnl-auth-mthd                   pic x(2).                    !02203$0E
                                                                       !02203$0F
*                                                                      !02203$0G
*          Additional Authentication Reason Code, subfield 21          !02203$0H
*                                                                      !02203$0I
      04  adnl-auth-rsn-cde               pic x(2).                    !02203$0J
                                                                       !02203$0K
                                                                       !02203w06
                                                                       !02203S0P
                                                                       !02203S0Q
                                                                       !02203S0R
                                                                       !02204p00
                                                                       !02204p01
                                                                       !02204p02
                                                                       !02209
                                                                       !02209G00
*                                                                      !02209G01
* terminal capability profile                                          !02209G02
* bit map position = 130                                               !02209G03
*                                                                      !02209G04
  02  term-cap-prof                       pic x(3).                    !02209G05
*                                                                      !02209G06
* terminal verification results                                        !02209G07
* bit map position = 131                                               !02209G08
*                                                                      !02209G09
  02  term-verif-rslts                    pic x(5).                    !02209G0A
*                                                                      !02209G0B
* unpredictable number                                                 !02209G0C
* bit map position = 132                                               !02209G0D
*                                                                      !02209G0E
                                                                       !02209M00
  02  unpredictable-num                   pic x(4).                    !02209M01
                                                                       !02209M02
                                                                       !02209r00
                                                                       !02209r01
                                                                       !02209r02
*                                                                      !02209G0L
* visa discretionary data                                              !02209G0M
* bit map position = 134                                               !02209G0N
*                                                                      !02209G0O
  02  visa-discr-data.                                                 !02209G0P
                                                                       !02209L00
      04  lgth                            pic x.                       !02209L01
      04  deriv-key-idx                   pic x.                       !02209L02
      04  crypto-ver-num                  pic x.                       !02209L03
                                                                       !02209L04
                                                                       !02209L05
                                                                       !02209L06
                                                                       !02209L07
      04  cvr.                                                         !02209G0T
          06  lgth                        pic 9.                       !02209G0U
          06  crd-verif-rslts             pic x(3).                    !02209G0V
                                                                       !02209M03
                                                                       !02209a00
                                                                       !02209h00
      04  filler                          pic x(26).                   !02209h01
                                                                       !02209h02
                                                                       !02209a02
  02  visa-discr-data-ccd redefines visa-discr-data.                   !02209a03
      04  lgth                            pic 9.                       !02209a04
      04  cmmn-core-ind                   pic x.                       !02209a05
      04  deriv-key-idx                   pic x.                       !02209a06
      04  crd-vrfctn-rslts                pic x(4).                    !02209a07
      04  crd-vrfctn-rslts-ext            pic x.                       !02209a08
                                                                       !02209h03
      04  cntrs                           pic x(25).                   !02209h04
                                                                       !02209h05
                                                                       !02209a0A
                                                                       !02209a0B
                                                                       !02209a0C
                                                                       !02209M05
*                                                                      !02209G0W
* issuer discretionary data                                            !02209G0X
* bit map position = 135                                               !02209G0Y
*                                                                      !02209G0Z
  02  iss-discr-data.                                                  !02209G10
                                                                       !02209L08
      04  lgth                            pic x.                       !02209L09
      04  info                            pic x(15).                   !02209L0A
                                                                       !02209a0D
  02  iss-discr-data-ccd redefines iss-discr-data.                     !02209a0E
      04  lgth                            pic x.                       !02209a0F
      04  iss-discr-data                  pic x(15).                   !02209a0G
                                                                       !02209a0H
                                                                       !02209L0B
                                                                       !02209L0C
                                                                       !02209L0D
                                                                       !02209L0E
*                                                                      !02209G13
* cryptogram                                                           !02209G14
* bit map position = 136                                               !02209G15
*                                                                      !02209G16
                                                                       !02209L0F
  02  cryptogram                          pic x(8).                    !02209L0G
                                                                       !02209L0H
                                                                       !02209L0I
                                                                       !02209L0J
*                                                                      !02209G18
* application interchange profile                                      !02209G19
* bit map position = 138                                               !02209G1A
*                                                                      !02209G1B
  02  app-int-prof                        pic x(2).                    !02209G1C
*                                                                      !02209G1D
* authorization response cryptogram (ARPC)                             !02209G1E
* bit map position = 139                                               !02209G1F
*                                                                      !02209G1G
  02  auth-resp-crypto.                                                !02209G1H
                                                                       !02209L0K
      04  cryptogram                      pic x(8).                    !02209L0L
                                                                       !02209a0I
      04  cryptogram-ccd redefines cryptogram.                         !02209a0J
          06  arpc                        pic x(4).                    !02209a0K
          06  crd-stat-updt               pic x(4).                    !02209a0L
                                                                       !02209a0M
                                                                       !02209L0M
                                                                       !02209L0N
                                                                       !02209L0O
      04  resp-cde                        pic x(2).                    !02209G1J
                                                                       !02209a0N
*                                                                      !02209a0O
* issuer Authentication Data                                           !02209a0P
* bit map position = 140                                               !02209a0Q
*                                                                      !02209a0R
  02  iss-auth-data.                                                   !02209a0S
      04  lgth                            pic x.                       !02209a0T
      04  info.                                                        !02209a0U
          06  arpc                        pic x(4).                    !02209a0V
          06  crd-stat-updt               pic x(4).                    !02209a0W
          06  arpc-resp-cde               pic x(2).                    !02209a0X
          06  filler                      pic x(6).                    !02209a0Y
                                                                       !02209a0Z
*                                                                      !02209G1K
* issuer script                                                        !02209G1L
* bit map position = 142                                               !02209G1M
*                                                                      !02209G1N
  02  iss-script.                                                      !02209G1O
                                                                       !02209L0P
      04  lgth                            pic x.                       !02209L0Q
      04  script-data                     pic x(255).                  !02209L0R
                                                                       !02209W00
*                                                                      !02209W01
* issuer script results                                                !02209W02
* bit map position = 143                                               !02209W03
* byte 1 contains:                                                     !02209W04
*     bits 1-4 - Script Processing.                                    !02209W05
*     bits 5-8 - Script Sequence.                                      !02209W06
* bytes 2-5 contain the issuer script ID                               !02209W07
* the last 15 bytes are reserved for Visa.                             !02209W08
*                                                                      !02209W09
  02  iss-script-rslts.                                                !02209W0A
      04  lgth                            pic x.                       !02209W0B
      04  script-rslt-data.                                            !02209W0C
          06  proc-seq                    pic x.                       !02209W0D
          06  iss-script-id               pic x(4).                    !02209W0E
          06  rsrvd                       pic x(15).                   !02209W0F
                                                                       !02209W0G
                                                                       !02209L0S
                                                                       !02209L0T
                                                                       !02209L0U
                                                                       !02209L0V
*                                                                      !02209G1R
* cryptogram transaction type                                          !02209G1S
* bit map position = 144                                               !02209G1T
*                                                                      !02209G1U
                                                                       !02209L0W
  02  crypto-tran-typ                     pic x.                       !02209L0X
                                                                       !02209L0Y
                                                                       !02209L0Z
                                                                       !02209L10
*                                                                      !02209G1W
* terminal country code                                                !02209G1X
* bit map position = 145                                               !02209G1Y
*                                                                      !02209G1Z
                                                                       !02209L11
  02  term-cntry-cde                      pic x(2).                    !02209L12
                                                                       !02209L13
                                                                       !02209L14
                                                                       !02209L15
*                                                                      !02209G21
* terminal transaction date                                            !02209G22
* bit map position = 146                                               !02209G23
*                                                                      !02209G24
                                                                       !02209L16
  02  term-tran-dat                       pic x(3).                    !02209L17
                                                                       !02209L18
                                                                       !02209L19
                                                                       !02209L1A
*                                                                      !02209G26
* cryptogram amount                                                    !02209G27
* bit map position = 147                                               !02209G28
*                                                                      !02209G29
                                                                       !02209L1B
  02  crypto-amt                          pic x(6).                    !02209L1C
                                                                       !02209L1D
                                                                       !02209L1E
                                                                       !02209L1F
*                                                                      !02209G2B
* cryptogram currency code                                             !02209G2C
* bit map position = 148                                               !02209G2D
*                                                                      !02209G2E
                                                                       !02209L1G
  02  crypto-crncy-cde                    pic x(2).                    !02209L1H
                                                                       !02209L1I
                                                                       !02209L1J
                                                                       !02209L1K
*                                                                      !02209G2G
* cryptogram cashback amount                                           !02209G2H
* bit map position = 149                                               !02209G2I
*                                                                      !02209G2J
                                                                       !02209L1L
  02  crypto-cashback-amt                 pic x(6).                    !02209L1M
                                                                       !02209W0H
*                                                                      !02209W0I
* Secondary PIN Block                                                  !02209W0J
* bit map position = 152                                               !02209W0K
* binary representation of hex characters in transmission              !02209W0L
* This field is used in PIN Change transactions for Offline PIN        !02209W0M
* Management                                                           !02209W0N
*                                                                      !02209W0O
  02  scnd-pin-blk                        pic x(16).                   !02209W0P
                                                                       !02209W0Q
                                                                       !02209L1N
                                                                       !02209L1O
                                                                       !02209L1P
                                                                       !02209p00
                                                                       !02209p01
                                                                       !02209p02
                                                                       !02209G2Q
end                                                                    !02210
                                                                       !02211
?section setl
?page "setl"
def setl.                                                              !02216
*                                                                     !!02217
* header                                                              !!02218
* bit map position = N/A                                              !!02219
*                                                                     !!02220
  02  hdr                                 type *.                      !02221
*                                                                     !!02222
* message type                                                        !!02223
* bit map position = N/A                                              !!02224
* 4-bit BCD (unsigned packed) in transmission                         !!02225
*                                                                     !!02226
*            0500 = reconciliation totals - VDCS to acq/iss           !!02227
*            0510 = reconciliation totals response                    !!02228
*            0520 = reconciliation totals advice - VDCS to acq/iss    !!02229
*            0530 = reconciliation totals advice response             !!02230
                                                                       !02231
  02  typ                                 pic 9(4).                    !02232
*                                                                     !!02233
* primary bit map                                                     !!02234
* Consisting of 64 bits numbered from the left starting at 1.         !!02235
* bit map position = N/A                                              !!02236
*                                                                     !!02237
  02  pbit-map                            pic x(8).                    !02238
*                                                                     !!02239
* secondary bit map                                                   !!02240
* Consisting of 64 bits numbered from the left starting at 65.        !!02241
* bit map position = 1                                                !!02242
*                                                                     !!02243
  02  sbit-map                            pic x(8).                    !02244
*                                                                     !!02245
* transmission date/time  (MMDDHHMMSS)  GMT ( Grenich mean time )     !!02246
* bit map position = 7                                                !!02247
* 4-bit BCD (unsigned packed) in transmission                         !!02248
*                                                                     !!02249
  02  tran-dat-tim                        pic 9(10).                   !02250
*                                                                     !!02251
* trace number                                                        !!02252
* bit map position = 11                                               !!02253
* 4-bit BCD (unsigned packed) in transmission                         !!02254
*                                                                     !!02255
  02  trace-num                           pic 9(6).                    !02256
*                                                                     !!02257
* date settlement             MMDD                                    !!02258
* bit map position = 15                                               !!02259
* 4-bit BCD (unsigned packed) in transmission                         !!02260
*                                                                     !!02261
  02  setl-dat                            pic 9(4).                    !02262
*                                                                     !!02263
* vdcs private                                                        !!02264
* bit map position = 63                                               !!02265
* 4-bit BCD (unsigned packed) in transmission                         !!02266
* VDCS admin messages only.                                           !!02267
*                                                                     !!02268
*            len is the number of bytes after bit-map, after packing  !!02269
*            map is a bit map indicating which code is present        !!02270
*                1st bit on - Network id code                         !!02271
*                2nd bit on - time limit                              !!02272
*                3rd bit on - MIS/CAS reason code                     !!02273
*                4th bit on - Visa reason code                        !!02274
*                                                                     !!02275
  02  vdcs-private.                                                    !02276
      04  lgth                            pic 99.                      !02277
      04  bit-map                         pic x(3).                    !02278
      04  ntwk-id-cde                     pic x(4).                    !02279
*                                                                     !!02280
* settlement code                                                     !!02281
* bit map position = 66                                               !!02282
* 4-bit BCD (unsigned packed) in transmission                         !!02283
* This field only sent in responses.                                  !!02284
*                                                                     !!02285
*            1 - in balance                                           !!02286
*            2 - out of balance                                       !!02287
*            9 - acknowledgement without reconciliation               !!02288
*                                                                     !!02289
  02  setl-cde                            pic 9.                       !02290
                                                                       !02290S00
*                                                                      !02290S01
* Settlement Institution Country Code                                  !02290S02
* bit map position = 69                                                !02290S03
* 4-bit BCD (unsigned packed)                                          !02290S04
*                                                                      !02290S05
  02  setl-cntry-cde                      pic 9(3).                    !02290S06
                                                                       !02290S07
*                                                                     !!02291
* network management information code                                 !!02292
* bit map position = 70                                               !!02293
* 4-bit BCD (unsigned packed) in transmission                         !!02294
*                                                                     !!02295
*            261 - acq batch cutoff totals                            !!02296
*            262 - acq stand in batch cutoff totals                   !!02297
*            263 - iss batch cutoff totals                            !!02298
*            264 - iss stand in batch cutoff totals                   !!02299
*            265 - acq settlement cutoff totals                       !!02300
*            266 - acq stand in settlement cutoff totals              !!02301
*            267 - iss settlement cutoff totals                       !!02302
*            268 - iss stand in settlement cutoff totals              !!02303
*            272 - acq gross interchange value totals                 !!02304
*            274 - acq gross interchange value totals                 !!02305
                                                                       !02305X00
*            281 - acq batch cutoff totals unavailable                 !02305X01
*            282 - acq stand in totals unavailable                     !02305X02
*            283 - iss batch cutoff totals unavailable                 !02305X03
*            284 - iss stand in totals unavailable                     !02305X04
*            285 - acq settle totals unavailable                       !02305X05
*            286 - acq stand in settle totals unavailable              !02305X06
*            287 - iss settle cutoff totals unavailable                !02305X07
*            288 - iss stand in settle totals unavailable              !02305X08
                                                                       !02305e00
*            289 - notification of settlement date cutoff              !02305e01
                                                                       !02305e02
                                                                       !02305X09
*                                                                     !!02306
  02  nmm-info-cde                        pic 9(3).                    !02307
                                                                       !02308
* credit transactions, number                                         !!02309
* bit map position = 74                                               !!02310
* 4-bit BCD (unsigned packed) in transmission                         !!02311
* This field is required in 0500/0520 messages, but put in 0510/0530  !!02312
* only when setl-code is "02" (out of balance).                       !!02313
*                                                                     !!02314
  02  num-credits                         pic 9(10).                   !02315
*                                                                     !!02316
* credit transaction reversals, number                                !!02317
* bit map position = 75                                               !!02318
* 4-bit BCD (unsigned packed) in transmission                         !!02319
* This field is required in 0500/0520 messages, but put in 0510/0530  !!02320
* only when setl-code is "02" (out of balance).                       !!02321
*                                                                     !!02322
  02  num-rvsl-credits                     pic 9(10).                  !02323
*                                                                     !!02324
* debit transactions, number                                          !!02325
* bit map position = 76                                               !!02326
* 4-bit BCD (unsigned packed) in transmission                         !!02327
* this field is required in 0500/0520 messages, but put in 0510/0530  !!02328
* only when setl-code is "02" (out of balance).                       !!02329
*                                                                     !!02330
  02  num-debits                          pic 9(10).                   !02331
*                                                                     !!02332
* debit transaction reversals, number                                 !!02333
* bit map position = 77                                               !!02334
* 4-bit BCD (unsigned packed) in transmission                         !!02335
* this field is required in 0500/0520 messages, but put in 0510/0530  !!02336
* only when setl-code is "02" (out of balance).                       !!02337
*                                                                     !!02338
  02  num-rvsl-debits                      pic 9(10).                  !02339
*                                                                     !!02340
* credit transactions, amount                                         !!02341
* bit map position = 86                                               !!02342
* 4-bit BCD (unsigned packed) in transmission                         !!02343
* this field is required in 0500/0520 messages, but put in 0510/0530  !!02344
* only when setl-code is "02" (out of balance).                       !!02345
*                                                                     !!02346
  02  amt-credits                         pic x(16).                   !02347
*                                                                     !!02348
* credit transaction reversals, amount                                !!02349
* bit map position = 87                                               !!02350
* 4-bit BCD (unsigned packed) in transmission                         !!02351
* this field is required in 0500/0520 messages, but put in 0510/0530  !!02352
* only when setl-code is "02" (out of balance).                       !!02353
*                                                                     !!02354
  02  amt-rvsl-credits                     pic x(16).                  !02355
*                                                                     !!02356
* debit transactions, amount                                          !!02357
* bit map position = 88                                               !!02358
* 4-bit BCD (unsigned packed) in transmission                         !!02359
* this field is required in 0500/0520 messages, but put in 0510/0530  !!02360
* only when setl-code is "02" (out of balance).                       !!02361
*                                                                     !!02362
  02  amt-debits                          pic x(16).                   !02363
*                                                                     !!02364
* debits, reversal amount                                             !!02365
* bit map position = 89                                               !!02366
* 4-bit BCD (unsigned packed) in transmission                         !!02367
* this field is required in 0500/0520 messages, but put in 0510/0530  !!02368
* only when setl-code is "02" (out of balance).                       !!02369
*                                                                     !!02370
  02  amt-rvsl-debits                      pic x(16).                  !02371
*                                                                     !!02372
* net settlement, amount                                              !!02373
* bit map position = 97                                               !!02374
*                                                                     !!02375
*     X + N  where X is equal to "C" ( credit ) or "D" ( debit ) and  !!02376
*            N is the amount in U.S. dollars and cents.               !!02377
*                                                                     !!02378
  02  net-setl.                                                        !02379
      04  cr-db                           pic x.                       !02380
      04  amt                             pic x(16).                   !02381
*                                                                     !!02382
* settlement institution identification code                          !!02383
* bit map position = 99                                               !!02384
* 4-bit BCD (unsigned packed) in transmission                         !!02385
*                                                                     !!02386
*            len is the number of digits in cde                       !!02387
*            cde is the Visa BIN assigned to the institution          !!02388
*                                                                     !!02389
  02  setl-inst-id.                                                    !02390
      04  lgth                            pic 99.                      !02391
      04  cde                             pic x(11).                   !02392
end                                                                    !02393
                                                                       !02394
?section admin
?page "admin"
def admin.                                                             !02399
*                                                                     !!02400
* header                                                              !!02401
* bit map position = N/A                                              !!02402
*                                                                     !!02403
  02  hdr                                 type *.                      !02404
*                                                                     !!02405
* message type                                                        !!02406
* bit map position = N/A                                              !!02407
* 4-bit BCD (unsigned packed) in transmission                         !!02408
* BASE will only use 0600, no response necessary.                     !!02409
*                                                                     !!02410
*            0600 = administrative request/confirmation               !!02411
*            0601 = administrative request/confirmation repeat        !!02412
*            0608 = administrative response advice                    !!02413
*            0610 = administrative request/confirmation response      !!02414
*                 = administrative response advice response           !!02415
*            0620 = administrative request/confirmation advice        !!02416
*                 = funds transfer totals advice                      !!02417
*                 = copy request results notification                 !!02418
*            0630 = administrative advice response                    !!02419
*                 = funds transfer totals advice response             !!02420
*                 = copy request results notification response        !!02421
*                                                                     !!02422
  02  typ                                 pic 9(4).                    !02423
*                                                                     !!02424
* primary bit map                                                     !!02425
* Consisting of 64 bits numbered from the left starting at 1.         !!02426
* bit map position = N/A                                              !!02427
*                                                                     !!02428
  02  pbit-map                            pic x(8).                    !02429
*                                                                     !!02430
* secondary bit map                                                   !!02431
* Consisting of 64 bits numbered from the left starting at 65.        !!02432
* bit map position = 1                                                !!02433
* VDCS admin messages only.                                           !!02434
*                                                                     !!02435
  02  sbit-map                            pic x(8).                    !02436
*                                                                     !!02437
* primary account number                                              !!02438
* bit map position = 2                                                !!02439
* 4-bit BCD (unsigned packed) in transmission                         !!02440
* VDCS admin messages only.                                           !!02441
*                                                                     !!02442
*            len is the number of digits in num                       !!02443
*            num is the primary account number of the cardholder      !!02444
*                                                                     !!02445
  02  pan.                                                             !02446
      04  lgth                            pic 99.                      !02447
      04  num                             pic x(19).                   !02448
                                                                       !02448C00
*                                                                      !02448C01
* processing code                                                      !02448C02
* bit map position = 3                                                 !02448C03
* 4-bit BCD (unsigned packed) in transmission                          !02448C04
*                                                                      !02448C05
*       positions 1-2  transaction code                                !02448C06
*                                                                      !02448C07
*          00 = Goods or service purchase                              !02448C08
*          01 = Withdrawal/cash advance                                !02448C09
*          02 = Adjustment (debit)                                     !02448C0A
*          03 = Check guarantee                                        !02448C0B
*          19 = Fee collection                                         !02448C0C
*          20 = Return                                                 !02448C0D
*          22 = Adjustment (credit)                                    !02448C0E
*          29 = Funds disbursement                                     !02448C0F
*          30 = Available funds inquiry                                !02448C0G
*          40 = Cardholder accounts transfer                           !02448C0H
*                                                                      !02448C0I
*       positions 3-4  "FROM" account affected in transaction          !02448C0J
*                                                                      !02448C0K
*          00 = Not applicable or not specified                        !02448C0L
*          10 = Savings account                                        !02448C0M
*          20 = Checking account                                       !02448C0N
*          30 = Credit card account                                    !02448C0O
*          40 = "Universal" account                                    !02448C0P
*                                                                      !02448C0Q
*       positions 5-6  "TO" account affected in transaction            !02448C0R
*                                                                      !02448C0S
*          00 = Not applicable or not specified                        !02448C0T
*          10 = Savings account                                        !02448C0U
*          20 = Checking account                                       !02448C0V
*          30 = Credit card account                                    !02448C0W
*          40 = "Universal" account                                    !02448C0X
*                                                                      !02448C0Y
  02  proc-cde                            pic x(6).                    !02448C0Z
                                                                       !02448C10
*                                                                     !!02449
* transaction amount                                                  !!02450
* bit map position = 4                                                !!02451
* 4-bit BCD (unsigned packed) in transmission                         !!02452
* VDCS admin messages only.                                           !!02453
*                                                                     !!02454
  02  tran-amt                            pic 9(12).                   !02455
*                                                                     !!02456
* Amount, Cardholder billing                                          !!02457
* bit map position = 6                                                !!02458
*                                                                     !!02459
  02  bill-amt                            pic 9(12).                   !02460
*                                                                     !!02461
* transmission date/time  (MMDDHHMMSS)  GMT ( Grenich mean time )     !!02462
* bit map position = 7                                                !!02463
* 4-bit BCD (unsigned packed) in transmission                         !!02464
*                                                                     !!02465
  02  tran-dat-tim                        pic 9(10).                   !02466
*                                                                     !!02467
* Conversion Rate, Cardholder Billing                                 !!02468
* bit map position = 10                                               !!02469
*                                                                     !!02470
  02  conv-rate-crd-iss                   pic 9(8).                    !02471
*                                                                     !!02472
* trace number                                                        !!02473
* bit map position = 11                                               !!02474
* 4-bit BCD (unsigned packed) in transmission                         !!02475
*                                                                     !!02476
  02  trace-num                           pic 9(6).                    !02477
                                                                       !02478
* local transaction date      MMDD                                    !!02479
* bit map position = 13                                               !!02480
* 4-bit BCD (unsigned packed) in transmission                         !!02481
*                                                                     !!02482
  02  local-dat                           pic 9(4).                    !02483
*                                                                     !!02484
* expiration date             YYMM                                    !!02485
* bit map position = 14                                               !!02486
* 4-bit BCD (unsigned packed) in transmission                         !!02487
*                                                                     !!02488
  02  exp-dat                             pic 9(4).                    !02489
*                                                                     !!02490
* settlement date             MMDD                                    !!02491
* bit map position = 15                                               !!02492
* 4-bit BCD (unsigned packed) in transmission                         !!02493
* VDCS admin messages only.                                           !!02494
*                                                                     !!02495
  02  setl-dat                            pic 9(4).                    !02496
*                                                                     !!02497
* merchant's type                                                     !!02498
* bit map position = 18                                               !!02499
* 4-bit BCD (unsigned packed) in transmission                         !!02500
*                                                                     !!02501
  02  merch-typ                           pic 9(4).                    !02502
                                                                       !02503
* acquiring institution countrty code                                 !!02504
* bit map position = 19                                               !!02505
* 4-bit BCD (unsigned packed) in transmission                         !!02506
*                                                                     !!02507
  02  acq-cntry-cde                       pic 9(3).                    !02508
*                                                                     !!02509
* primary account number, extended country code                       !!02510
* bit map position = 20                                               !!02511
* 4-bit BCD (unsigned packed) in transmission                         !!02512
* VDCS admin messages only.                                           !!02513
* This field present only if primary account number, extended present.!!02514
*                                                                     !!02515
  02  pan-cntry-cde                       pic 9(3).                    !02516
                                                                       !02517
*                                                                     !!02518
* point of service entry mode                                         !!02519
* bit map position = 22                                               !!02520
* 4-bit BCD (unsigned packed) in transmission                         !!02521
*                                                                     !!02522
*          The pos entry mode consists of two sub-elements :          !!02523
*                                                                     !!02524
*          digits 1-2  card data entry mode                           !!02525
*                                                                     !!02526
*               00  Unkown                                            !!02527
*               01  Manual                                            !!02528
*               02  Magnetic stripe read                              !!02529
*               03  Bar code read                                     !!02530
*               04  OCR code read                                     !!02531
*                                                                     !!02532
*          digit 3  PIN entry capability                              !!02533
*                                                                     !!02534
*               0   unkown                                            !!02535
*               1   terminal can accept entry of PINs                 !!02536
*               2   terminal cannot accept entry of PINs              !!02537
*               8   terminal's PIN pad is down                        !!02538
*                                                                     !!02539
*          digit 4  filler                                            !!02540
*                                                                     !!02541
*               0   fill                                              !!02542
*                                                                     !!02543
  02  pos-entry-mde                       pic 9(4).                    !02544
*                                                                     !!02545
* card sequence number                                                !!02546
* bit map position = 23                                               !!02547
* 4-bit BCD (unsigned packed) in transmission                         !!02548
* This field only used in responses, if present in request            !!02549
*                                                                     !!02550
  02  crd-seq-num                         pic 9(3).                    !02551
*                                                                     !!02552
* acquiring institution identification code                           !!02553
* bit map position = 32                                               !!02554
* 4-bit BCD (unsigned packed) in transmission                         !!02555
* VDCS admin messages only.                                           !!02556
*                                                                     !!02557
*            len is the number of digits in cde                       !!02558
*            cde is the Visa BIN assigned to the MIS institution      !!02559
*                                                                     !!02560
  02  acq-inst.                                                        !02561
      04  lgth                            pic 99.                      !02562
      04  cde                             pic x(11).                   !02563
*                                                                     !!02564
* forwarding institution identification code                          !!02565
* bit map position = 33                                               !!02566
* 4-bit BCD (unsigned packed) in transmission                         !!02567
*                                                                     !!02568
*            len is the number of digits in cde                       !!02569
*            cde is the Visa BIN assigned to the MIS institution      !!02570
*                                                                     !!02571
  02  fwd-inst.                                                        !02572
      04  lgth                            pic 99.                      !02573
      04  cde                             pic x(11).                   !02574
*                                                                     !!02575
* primary account number, extended                                    !!02576
* bit map position = 34                                               !!02577
* 4-bit BCD (unsigned packed) plus hex 'D' in transmission            !!02578
* VDCS admin messages only.                                           !!02579
* This field is sent when the pan begins with a "59", then pan field  !!02580
* associated with bit 2 is not sent, otherwise this field is not sent.!!02581
*                                                                     !!02582
*            len is the number of digits in num                       !!02583
*            num is the primary account number of the cardholder      !!02584
*                                                                     !!02585
  02  pan-ext.                                                         !02586
      04  lgth                            pic 99.                      !02587
      04  num                             pic x(28).                   !02588
*                                                                     !!02589
* retrieval reference number                                          !!02590
* bit map position = 37                                               !!02591
* This field is taken from the original transaction.                  !!02592
*                                                                     !!02593
  02  ref-num                             pic x(12).                   !02594
*                                                                     !!02595
* authorization identification response                               !!02596
* bit map position = 38                                               !!02597
*                                                                     !!02598
*          Authorizor     length       format                         !!02599
*          ----------     ------       ------                         !!02600
*          Visa             6          Numeric, 1st digit zero        !!02601
*          Check Accpt      6          Alpha/Numeric                  !!02602
*          Mastercard       6          Alpha/Numeric                  !!02603
*          AMEX             5          Alpha/Numeric, space filled    !!02604
*          Diners Club      5          Alpha/Numeric, space filled    !!02605
*          Proprietary      6          Alpha/Numeric                  !!02606
*                                                                     !!02607
  02  auth-id-resp                       pic x(6).                     !02608
*                                                                     !!02609
* response code  ("00")                                               !!02610
* bit map position = 39                                               !!02611
* 0610 and 0630 admin messages only                                   !!02612
*                                                                     !!02613
  02  resp-cde                            pic x(2).                    !02614
*                                                                     !!02615
* card acceptor terminal identification code                          !!02616
* bit map position = 41                                               !!02617
*                                                                     !!02618
  02  crd-acpt-term-id                   pic x(8).                     !02619
*                                                                     !!02620
* card acceptor identification code                                   !!02621
* bit map position = 42                                               !!02622
*                                                                     !!02623
*           this field contains the acquirer assigned merchant id     !!02624
*                                                                     !!02625
  02  crd-acpt-id-cde                     pic x(15).                   !02626
*                                                                     !!02627
* card acceptor location                                              !!02628
* bit map position = 43                                               !!02629
*                                                                     !!02630
*           this field contains the following four sub-elements:      !!02631
*           regulation E location                                     !!02632
*           city                                                      !!02633
*           country                                                   !!02634
*                                                                     !!02635
  02  crd-acpt.                                                        !02636
      04  reg-e-loc                       pic x(25).                   !02637
      04  city                            pic x(13).                   !02638
      04  country                         pic x(2).                    !02639
*                                                                     !!02640
* additional response data                                            !!02641
* bit map position = 44                                               !!02642
*                                                                     !!02643
*            this field provides for sending contact for information  !!02644
*            data in PLUS request for copy transaction                !!02645
*                                                                     !!02646
  02  add-resp-data.                                                   !02647
      04  lgth                            pic 99.                      !02648
      04  info                            pic x(25).                   !02649
*                                                                     !!02650
* addtional data private                                              !!02651
* bit map position = 48                                               !!02652
*                                                                     !!02653
*            len is the number of bytes in rest of private            !!02654
*            info is settlement totals for the day, each prefixed     !!02655
*                with a "C" for credit or a "D" for debit             !!02656
*                                                                     !!02657
  02  addl-data.                                                       !02658
      04  lgth                            pic 999.                     !02659
      04  mis.                                                         !02660
          08  giv-cnt                     pic x(9).                    !02661
          08  giv-amt                     pic x(13).                   !02662
          08  fees-cnt                    pic x(9).                    !02663
          08  fees-amt                    pic x(9).                    !02664
          08  chgs-cnt                    pic x(9).                    !02665
          08  chgs-amt                    pic x(9).                    !02666
      04  cas.                                                         !02667
          08  giv-cnt                     pic x(9).                    !02668
          08  giv-amt                     pic x(13).                   !02669
          08  fees-cnt                    pic x(9).                    !02670
          08  fees-amt                    pic x(9).                    !02671
          08  chgs-cnt                    pic x(9).                    !02672
          08  chgs-amt                    pic x(9).                    !02673
      04  base-ii.                                                     !02674
          08  giv-cnt                     pic x(9).                    !02675
          08  giv-amt                     pic x(13).                   !02676
          08  fees-cnt                    pic x(9).                    !02677
          08  fees-amt                    pic x(9).                    !02678
      04  net-trnsfr-amt                  pic x(13).                   !02679
      04  filler                          pic x(86).                   !02680
*                                                                     !!02681
* additional data ( this is a redefinition of field 48 )              !!02682
*                                                                     !!02683
*            this field is used for free-text messages.               !!02684
*                                                                     !!02685
  02  addl-text-data redefines addl-data.                              !02686
      04  lgth                            pic 999.                     !02687
      04  free-text                       pic x(255).                  !02688
*                                                                     !!02689
* additional data private ( this is a redefinition of field 48 )      !!02690
*                                                                     !!02691
*            this field is used for card capture notify requests      !!02692
*                                                                     !!02693
  02  addl-capt-data redefines addl-data.                              !02694
      04  lgth                            pic 999.                     !02695
      04  delim                           pic x.                       !02696
      04  typ                             pic x(4).                    !02697
      04  filler                          pic x.                       !02698
      04  stat                            pic x(2).                    !02699
      04  filler                          pic x.                       !02700
      04  capt-dat                        pic x(6).                    !02701
      04  filler                          pic x.                       !02702
      04  acct-num                        pic x(19).                   !02703
      04  filler                          pic x.                       !02704
      04  exp-dat                         pic x(4).                    !02705
      04  filler                          pic x.                       !02706
      04  inst-name                       pic x(40).                   !02707
      04  filler                          pic x.                       !02708
      04  card-name                       pic x(19).                   !02709
      04  filler                          pic x(154).                  !02710
                                                                       !02711
* additional data ( this is a redefinition of field 48 )              !!02712
*                                                                     !!02713
* The field identifier (fld-id) is set to "W" for usage 8.            !!02714
* Return reason codes are sent in copy request results notification   !!02715
* advice messages (0620).  The return reason codes subfield is a      !!02716
* variable length, unformatted subfield which contains up to five     !!02717
* return reason codes.  Each return reason code is three characters   !!02718
* long.  If the advice is for a settled/valid exception transaction,  !!02719
* the return reason codes subfield is not present.                    !!02720
                                                                       !02721
  02  addl-excpt-data redefines addl-data.                             !02722
      04  lgth                            pic 999.                     !02723
      04  fld-id                          pic x.   !W                 !!02724
      04  iss-cntrl-num                   pic x(9).                    !02725
      04  fax-num                         pic x(16).                   !02726
      04  retrn-rsn-cdes                  pic x(15).                   !02727
      04  reserved                        pic x(214).                  !02728
                                                                       !02729
* additional data ( this is a redefinition of field 48 )              !!02730
* for Cardholder Risk Identification Service (CRIS).                  !!02731
                                                                       !02732
  02  addl-cris-data redefines addl-data.                              !02733
      04  lgth                            pic 999.                     !02734
*                                                                     !!02735
* The field ID indentifies the use of the additional data field.      !!02736
* Valid values are:                                                   !!02737
*                                                                     !!02738
*    R - Risk Alert                                                   !!02739
*    C - CVV Alert                                                    !!02740
*                                                                     !!02741
      04  fld-id                          pic x.                       !02742
      04  cris-alert-typ.                                              !02743
*                                                                     !!02744
* Mathmatical model version designator is an alphanumeric character   !!02745
* used to identify the model used to generate the alert.  Valid       !!02746
* values are 0-9, A-Z.                                                !!02747
*                                                                     !!02748
          08  version                     pic x.                       !02749
*                                                                     !!02750
* Major product designator is an alphanumeric character used to       !!02751
* identify the model product type.  Valid values are:                 !!02752
*                                                                     !!02753
*    0 - default                                                      !!02754
*    1 - credit                                                       !!02755
*    2 - debit                                                        !!02756
*                                                                     !!02757
          08 major-product                pic x.                       !02758
*                                                                     !!02759
* Minor product designator is an alphanumeric character used to       !!02760
* identify the model product type.  Valid values are:                 !!02761
*                                                                     !!02762
*    0 - default                                                      !!02763
*    1 - fraud application model                                      !!02764
*                                                                     !!02765
          08 minor-product                pic x.                       !02766
*                                                                     !!02767
* The CIRS transaction risk score.                                    !!02768
*                                                                     !!02769
      04  cris-txn-risk-score             pic x(5).                    !02770
                                                                       !02770C00
      04  pri-acct-num                    pic x(22).                   !02770C01
      04  tran-amount                     pic x(13).                   !02770C02
      04  amt-bill-crdhldr                pic x(13).                   !02770C03
      04  tran-date-time                  pic x(10).                   !02770C04
      04  conv-rate                       pic x(8).                    !02770C05
      04  merch-type                      pic x(4).                    !02770C06
      04  pos-entry-mde                   pic x(4).                    !02770C07
      04  acq-bin                         pic x(11).                   !02770C08
      04  resp-cde                        pic x(2).                    !02770C09
      04  crd-acpt-term-id                pic x(8).                    !02770C0A
      04  crd-acpt-id-code                pic x(15).                   !02770C0B
      04  crd-acpt-nam-loc                pic x(40).                   !02770C0C
      04  resp-src-rsn-cde                pic x.                       !02770C0D
      04  addr-verify-result-cde          pic x.                       !02770C0E
      04  cvv-result-cde                  pic x.                       !02770C0F
      04  tran-currency-cde               pic x(3).                    !02770C0G
      04  crdhldr-currency-cde            pic x(3).                    !02770C0H
      04  ntwk-id-cde                     pic x(4).                    !02770C0I
      04  stip-switch-rsn-cde             pic x(4).                    !02770C0J
      04  reserved                        pic x(79).                   !02770C0K
                                                                       !02770C0L
                                                                       !02771C00
                                                                       !02771C01
*                                                                     !!02772
* additional data ( this is a redefinition of field 48 ) usage 8c     !!02773
* for SMS interface to the VCRF Service (VCRFS).                      !!02774
*                                                                     !!02775
  02  addl-vcrf-data redefines addl-data.                              !02776
      04  lgth                            pic 999.                     !02777
      04  fld-id                          pic x.   !W                 !!02778
*                                                                     !!02779
* number assigned by issuers to manage request for copy messages      !!02780
*                                                                     !!02781
      04  iss-cntrl-num                   pic x(9).                    !02782
*                                                                     !!02783
* phone number of the fax machine to which fulfillment should be sent !!02784
*                                                                     !!02785
      04  fax-num                         pic x(16).                   !02786
*                                                                     !!02787
* must contain a 1 to indicate that the issuer is requesting automated!!02788
* response.                                                           !!02789
*                                                                     !!02790
      04  iss-rqst-meth                   pic x.                       !02791
*                                                                     !!02792
* Provided by VCRFS, is sent space filled by issuer.                  !!02793
*                                                                     !!02794
      04  acq-est-meth                    pic x.                       !02795
*                                                                     !!02796
* address to send fulfillment to, if zeroes, VCRFS will send to       !!02797
* the issuers default address.  If not zero, must be a valid BIN      !!02798
* or the Public Network Gateway (400250).                             !!02799
*                                                                     !!02800
      04  workstation-addr                pic x(6).                    !02801
*                                                                     !!02802
* must be zero filled, will be assigned by VISA.                      !!02803
*                                                                     !!02804
      04  rtvl-rqst-id                    pic x(12).                   !02805
*                                                                     !!02806
* issuers sub address, if the workstation address is the Public       !!02807
* Network Gateway, this field will have a 1 in the first position,    !!02808
* followed by the six digit mailbox ID, otherwise it will be all zeros!!02809
*                                                                     !!02810
      04  sub-addr                        pic x(7).                    !02811
      04  reserved                        pic x(202).                  !02812
*                                                                     !!02813
* additional data ( this is a redefinition of field 48 ) usage 24     !!02814
* for SMS interface to the VCRF Service (VCRFS) members who use       !!02815
* a fax machine instead of the ImagExpress workstation.  This usage   !!02816
* of field 48 is for nonfulfillment/mail fulfillment messages.        !!02817
*                                                                     !!02818
  02  addl-vcrf-fax-data redefines addl-data.                          !02819
      04  lgth                            pic 999.                     !02820
      04  fld-id                          pic x.   !N                 !!02821
*                                                                     !!02822
* Retrieval request id, as found in the original request for copy.    !!02823
*                                                                     !!02824
      04  rtvl-rqst-id                    pic x(12).                   !02825
*                                                                     !!02826
* error return flag, must contain a space, on returns, if this field  !!02827
* contains an E, the Public Network Gateway could not deliver to the  !!02828
* merchant.                                                           !!02829
*                                                                     !!02830
      04  err-rtrn-flg                    pic x.                       !02831
*                                                                     !!02832
* Destination sub address, as sent on the original request for copy.  !!02833
*                                                                     !!02834
      04  dest-sub-addr                   pic x(7).                    !02835
*                                                                     !!02836
* Source sub address, sub address of the sender.                      !!02837
*                                                                     !!02838
      04  srce-sub-addr                   pic x(7).                    !02839
*                                                                     !!02840
* Reason code for the nonfulfillment/mail fulfillment, valid values   !!02841
* are:                                                                !!02842
*       01 Invalid request, reference number not in acquirers range   !!02843
*       02 Invalid request, reference number in range, but not valid  !!02844
*       03 Item could not be located                                  !!02845
*       04 Acquirer will not fulfill, Issuer may chargeback           !!02846
*       05 Draft not required                                         !!02847
*       06 Fulfillment by mail notification                           !!02848
*                                                                     !!02849
      04  rsn-cde                         pic x(2).                    !02850
*                                                                     !!02851
* Retrieval request reason code, the reason code from the original    !!02852
* request for copy.                                                   !!02853
*                                                                     !!02854
      04  rtvl-rqst-rsn-cde               pic x(2).                    !02855
*                                                                     !!02856
* Purchase date (mmdd) of the original transaction if it was          !!02857
* included in the original request for copy, otherwise should be      !!02858
* zeroes.                                                             !!02859
*                                                                     !!02860
     04  prchs-dat                        pic x(4).                    !02861
*                                                                     !!02862
* The issuer control number provided on the original request for      !!02863
* copy.                                                               !!02864
*                                                                     !!02865
     04  iss-cntl-num                     pic x(8).                    !02866
     04  reserved                         pic x(211).                  !02867
                                                                       !02868
*                                                                     !!02869
* additional data ( this is a redefinition of field 48 ) usage 25     !!02870
* for SMS interface to the VCRF Service (VCRFS) members who use       !!02871
* a fax machine instead of the ImagExpress workstation.  This usage   !!02872
* of field 48 is for dispute and dispute ruling messages.             !!02873
*                                                                     !!02874
  02  addl-vcrf-dspt-data redefines addl-data.                         !02875
      04  lgth                            pic 999.                     !02876
      04  fld-id                          pic x.   !D                 !!02877
*                                                                     !!02878
* Retrieval request ID, as supplied in the original request for       !!02879
* copy.                                                               !!02880
*                                                                     !!02881
      04  rtvl-rqst-id                    pic x(12).                   !02882
*                                                                     !!02883
* Error return flag, must be a space, if VISA finds an error,         !!02884
* the message will be returned with an E in this field.               !!02885
*                                                                     !!02886
      04  err-rtn-flg                     pic x.                       !02887
*                                                                     !!02888
* Destination sub address, must be zero filled for disputes.          !!02889
*                                                                     !!02890
      04  dest-sub-addr                   pic x(7).                    !02891
*                                                                     !!02892
* Source sub address, the sub address of the sender.                  !!02893
*                                                                     !!02894
      04  srce-sub-addr                   pic x(7).                    !02895
*                                                                     !!02896
* Dispute reason code, the acquirer must have sent a fulfillment.     !!02897
* Valid values are:                                                   !!02898
*                    01 Wrong item                                    !!02899
*                    02 Illegible item                                !!02900
*                    03 Missing value                                 !!02901
*                                                                     !!02902
      04  dspt-rsn-cde                    pic x(2).                    !02903
*                                                                     !!02904
* Invalid data flags, position indicates what data items were in      !!02905
* error on the fulfillment.  Valid values are Y or space, if yes,     !!02906
* then the corresponding data element was incorrect, illegible, or    !!02907
* missing from the image.                                             !!02908
*                position       data                                  !!02909
*                   1         account number                          !!02910
*                   2         purchase date                           !!02911
*                   3         transaction amount                      !!02912
*                   4         expiration date                         !!02913
*                   5         merchant name/location                  !!02914
*                   6         signature                               !!02915
*                   7         other errors                            !!02916
*                                                                     !!02917
      04  err-flds-flag                   pic x(7).                    !02918
*                                                                     !!02919
* Dispute return reason code, must contain zeros when submitted by    !!02920
* the acquirer.  For dispute rulings from VISA, will may contain the  !!02921
* following codes:                                                    !!02922
*                  01  request ID not found                           !!02923
*                  03  dispute pending                                !!02924
*                  04  dispute resolved                               !!02925
*                  05  the account number in the dispute does not     !!02926
*                        match with the original retrieval id.        !!02927
*                  06  the transaction id in the dispute does not     !!02928
*                        match with the original retrieval id.        !!02929
*                  07  No fulfillment found for retrieval id.         !!02930
*                                                                     !!02931
      04  dspt-rtrn-rsn-cde               pic x(2).                    !02932
*                                                                     !!02933
* Ruling reason code, entered by VISA.  Valid values are:             !!02934
*                  01 dispute ruled in favor of acquirer              !!02935
*                  02 dispute ruled in favor of issuer                !!02936
*                                                                     !!02937
      04  ruling-rsn-cde                  pic x(2).                    !02938
*                                                                     !!02939
* Contact name, the person to contact at the issuer site concerning   !!02940
* the dispute.                                                        !!02941
*                                                                     !!02942
      04  contact-nam                     pic x(30).                   !02943
*                                                                     !!02944
* Contact phone, the telephone number the contact name can be reached !!02945
* at.                                                                 !!02946
      04  contact-phone                   pic x(16).                   !02947
*                                                                     !!02948
* Dispute request date (yddd), supplied by issuer for a dispute,      !!02949
* supplied by VISA for a dipute ruling.                               !!02950
*                                                                     !!02951
      04  dspt-rqst-dat                   pic x(4).                    !02952
      04  reserved                        pic x(164).                  !02953
                                                                       !02953G00
*                                                                      !02953G01
* additional data ( this is a redefinition of field 48 ) usage 31      !02953G02
* for FRS-Supplied Error and Warning Data for the 9620/9630 message    !02953G03
* destined to acquirers from V.I.P.                                    !02953G04
*                                                                      !02953G05
  02  adnl-frs-data redefines addl-data.                               !02953G06
      04  lgth                            pic 999.                     !02953G07
      04  fld-id                          pic x.                       !02953G08
*                                                                      !02953G09
* Fraud Response Code - Identifies the type of response contained in   !02953G0A
* the transaction. Valid values:                                       !02953G0B
*                   TR - Transaction rejected                          !02953G0C
*                   TW - Transaction warning                           !02953G0D
*                   TC - Transaction confirmed                         !02953G0E
*                   MC - Transaction confirmed (merchant prospective)  !02953G0F
*                                                                      !02953G0G
      04  fraud-resp-cde                  pic x(2).                    !02953G0H
*                                                                      !02953G0I
* Duplicate Sequence Number - If warning reason indicates transaction  !02953G0J
* would result in a partial duplicate, this field will contain         !02953G0K
* sequence number of the matching transaction previously added to the  !02953G0L
* fraud master file.                                                   !02953G0M
*                                                                      !02953G0N
      04  dup-seq-num                     pic x(4).                    !02953G0O
*                                                                      !02953G0P
* Error codes - up to 10 reject or warning codes FRS detected when     !02953G0Q
* processing the transaction.                                          !02953G0R
*                                                                      !02953G0S
      04  error-1                         pic x(3).                    !02953G0T
      04  error-2                         pic x(3).                    !02953G0U
      04  error-3                         pic x(3).                    !02953G0V
      04  error-4                         pic x(3).                    !02953G0W
      04  error-5                         pic x(3).                    !02953G0X
      04  error-6                         pic x(3).                    !02953G0Y
      04  error-7                         pic x(3).                    !02953G0Z
      04  error-8                         pic x(3).                    !02953G10
      04  error-9                         pic x(3).                    !02953G11
      04  error-10                        pic x(3).                    !02953G12
      04  reserved                        pic x(218).                  !02953G13
                                                                       !02953Y00
*                                                                      !02953Y01
* Lgth is the length of the data that follows.                         !02953Y02
* Value and amount fields have a "C" or "D" at the beginning, followed !02953Y03
* by 8 (amount fields) or 12 digits.  Currency is in the settlement    !02953Y04
* currency.  Decimal places are assumed based on currency.             !02953Y05
*                                                                      !02953Y06
  02  addl-vss-data redefines addl-data.                               !02953Y07
      04  lgth                            pic 999.                     !02953Y08
      04  acq-ttl.                                                     !02953Y09
          08  cnt                         pic x(8).                    !02953Y0A
          08  val                         pic x(13).                   !02953Y0B
          08  reimb-fee-amt               pic x(9).                    !02953Y0C
          08  visa-chrg-amt               pic x(9).                    !02953Y0D
      04  iss-ttl.                                                     !02953Y0E
          08  cnt                         pic x(8).                    !02953Y0F
          08  val                         pic x(13).                   !02953Y0G
          08  reimb-fee-amt               pic x(9).                    !02953Y0H
          08  visa-chrg-amt               pic x(9).                    !02953Y0I
      04  othr-ttl.                                                    !02953Y0J
          08  cnt                         pic x(8).                    !02953Y0K
          08  val                         pic x(13).                   !02953Y0L
          08  reimb-fee-amt               pic x(9).                    !02953Y0M
          08  visa-chrg-amt               pic x(9).                    !02953Y0N
      04  net-fund-xfer.                                               !02953Y0O
          08  amt                         pic x(13).                   !02953Y0P
          08  sre                         pic x(10).                   !02953Y0Q
          08  vss-cde                     pic x(3).                    !02953Y0R
      04  filler                          pic x(112).                  !02953Y0S
                                                                      !02953G14
                                                                       !02953Y0V
                                                                       !02953Y0W
                                                                       !02953Y0X
*                                                                     !!02954
* transaction currency code                                           !!02955
* bit map position = 49                                               !!02956
* 4-bit BCD (unsigned packed) in transmission                         !!02957
* VDCS admin messages only.                                           !!02958
*                                                                     !!02959
  02  crncy-cde                           pic 9(3).                    !02960
*                                                                     !!02961
* Currency Code, Cardholder Billing                                   !!02962
* bit map position = 51                                               !!02963
*                                                                     !!02964
  02  crd-crncy-cde                       pic x(3).                    !02965
*                                                                     !!02966
* National pos geographic data                                        !!02967
* bit map position = 59                                               !!02968
* VISA Debit ISO format messages only                                 !!02969
*                                                                     !!02970
*           one binary byte then 14 digits for the following subfields!!02971
*           lgth is the number of digits in entire field              !!02972
*           st-cde is the ANSI state code                             !!02973
*           cnty-cde is the ANSI county code                          !!02974
*           zip-cde is the normal 5 digit zip code                    !!02975
*           zip-cde-ext is the 4 digit zip code extension             !!02976
*                                                                     !!02977
  02  ntl-pos-data.                                                    !02978
      04  lgth                            pic 99.                      !02979
      04  st-cde                          pic 9(2).                    !02980
      04  cnty-cde                        pic 9(3).                    !02981
      04  zip-cde                         pic 9(5).                    !02982
      04  zip-cde-ext                     pic 9(4).                    !02983
*                                                                     !!02984
* pos entry capability code, private                                  !!02985
* bit map position = 60                                               !!02986
* 4-bit BCD (unsigned packed) in transmission                         !!02987
*                                                                     !!02988
                                                                       !02988A00
*          lgth is the total length of all the data to follow          !02988A01
*          terminal type                                               !02988A02
                                                                       !02988A03
                                                                       !02989A00
                                                                       !02989A01
*              0 - unspecified,                                       !!02990
*              2 - unattended terminal (customer operated)            !!02991
*              4 - electronic cash register,                          !!02992
*              7 - telephone device (dial terminal)                   !!02993
                                                                       !02993A00
*          terminal entry capability                                   !02993A01
                                                                       !02993A02
                                                                       !02994A00
                                                                       !02994A01
*              0 - unknown,                                           !!02995
*              1 - terminal not used,                                 !!02996
*              2 - magnetic stripe read capability,                   !!02997
*              3 - bar code read capability,                          !!02998
*              4 - ocr read capability,                               !!02999
                                                                       !02999G00
*              5 - chip card reading capability,                       !02999G01
                                                                       !02999G02
*              9 - terminal does not read card data                   !!03000
                                                                       !03000A00
*          chip condition code                                         !03000A01
                                                                       !03000G00
*              0 - Service code does not begin with 2 or 6 or fill for !03000G01
*                      subsequent positions                            !03000G02
                                                                       !03000L00
*              1 - Last EMV read successful, or was not a chip trans-  !03000L01
                                                                       !03000L02
*                      action, or unknown                              !03000G04
*              2 - Last transaction at the chip capable terminal was   !03000G05
*                      an unsuccessful chip read                       !03000G06
*          service developement field                                  !03000G07
*              0 - default value                                       !03000G08
*              1 - electronic service transaction, security met        !03000G09
*              2 - electronic service transaction, security not met    !03000G0A
*          merchant group id                                           !03000G0B
*              future use                                              !03000G0C
                                                                       !03000L03
*          emv tran indicator                                          !03000L04
*              0 - Non EMV                                             !03000L05
*              1 - EMV                                                 !03000L06
                                                                       !03000L07
                                                                       !03000L08
                                                                       !03000L09
                                                                       !03000L0A
*          crd auth rel ind                                            !03000G0G
*              0 - Not used                                            !03000G0H
*              1 - Card authentication unreliable                      !03000G0I
*              2 - Acquirer inactive for card authentication           !03000G0J
*              3 - Issuer inactive for card authentication             !03000G0K
                                                                       !03000G0L
                                                                       !03000G0M
                                                                       !03000M00
*          Mail/Telephone or Electronic Commerce Flag                  !03000M01
*              00 - Not Applicable                                     !03000M02
*              01 - Single transaction for Mail/Telephone order        !03000M03
*              02 - Recurring transaction                              !03000M04
*              03 - Installment payment                                !03000M05
*              04 - Unknown classification/other mail order            !03000M06
*              05 - Secure Electronic Transaction (SET) with           !03000M07
*                          cardholder certificate                      !03000M08
*              06 - Non-authenticated Security Transaction with        !03000M09
*                          merchant certificate                        !03000M0A
*              07 - Non-authenticated Security Transaction without     !03000M0B
*                          merchant certificate                        !03000M0C
                                                                       !03000M0D
                                                                       !03000M0E
                                                                       !03000M0F
                                                                       !03000M0G
                                                                       !03007
  02  pos-entry.                                                       !03008
                                                                       !03008A00
      04  lgth                            pic 99.                      !03008A01
      04  term-typ                        pic x.                       !03008A02
      04  term-ent-cap                    pic x.                       !03008A03
      04  chip-cond-cde                   pic 9.                       !03008A04
                                                                       !03008L00
      04  xstng-dbt-ind                   pic 9.                       !03008L01
                                                                       !03008L02
                                                                       !03008O00
                                                                       !03008O01
      04  mrch-grp-id                     pic 9(2).                    !03008A06
                                                                       !03008L03
      04  emv-tran-ind                    pic 9.                       !03008L04
                                                                       !03008L05
      04  crd-auth-rel-ind                pic 9.                       !03008A08
      04  e-com                           pic 99.                      !03008A09
                                                                       !03008A0A
*                                                                      !03008A0B
* amount, other                                                        !03008A0C
* bit map position = 61                                                !03008A0D
* 4-bit BCD (unsigned packed) in transmission                          !03008A0E
*                                                                      !03008A0F
*          lgth is the number of digits in amount                      !03008A0G
*          amt is the transaction amount                               !03008A0H
*          bill-amnt is the cardholder billing amount                  !03008A0I
*          repl-amnt is the replacement billing amount                 !03008A0J
*                                                                      !03008A0K
  02  other-amt.                                                       !03008A0L
      04  lgth                            pic 99.                      !03008A0M
      04  amt                             pic 9(12).                   !03008A0N
      04  bill-amnt                       pic 9(12).                   !03008A0O
      04  repl-amnt                       pic 9(12).                   !03008A0P
                                                                       !03008A0Q
                                                                       !03009A00
                                                                       !03009A01
                                                                       !03009A02
                                                                       !03013A00
*                                                                     !
                                                                       !03013A03
* Payment Service Field                                               !!03014
* bit map position = 62                                               !!03015
*                                                                     !!03016
  02  payment-srv-fld.                                                 !03017
      04  lgth                            pic 99.                      !03018
      04  bit-map                         pic x(8).                    !03019
*                                                                     !!03020
*             A code used to provide additional information           !!03021
*             regarding the disposition of the transaction.           !!03022
*             Valid values are:                                       !!03023
*                                                                     !!03024
*             N = Transaction downgraded for PS2000                   !!03025
*             Y = Transaction submitted for PS2000                    !!03026
*             A = Meets Custom Payment Service requirements           !!03027
*             I = Incremental authorization to a previously           !!03028
*                 approved transaction.                               !!03029
*             P = Preferred Customer                                  !!03030
*             E = Meets card-present requirements and merchant        !!03031
*                 name and location are present                       !!03032
*             V = Meets address verification requirements             !!03033
*             C = Meets cardholder activated terminal                 !!03034
*                 requirements                                        !!03035
*                                                                     !!03036
*             Subfield 1                                              !!03037
*                                                                     !!03038
      04  payment-srv-ind                 pic x.                       !03039
*                                                                     !!03040
*             A code assigned by Visa to a transaction which          !!03041
*             has met Payment Service 2000 edits. This field will     !!03042
*             remain with a transaction throughout it's life          !!03043
*             cycle.                                                  !!03044
*                                                                     !!03045
*             Subfield 2                                              !!03046
*                                                                     !!03047
      04  tran-id                         pic 9(15).                   !03048
*                                                                     !!03049
*             Identifies a specific BASE II clearing transaction      !!03050
*             record when multiple clearing records are submitted     !!03051
*             for a single authorization.                             !!03052
*                                                                     !!03053
*             Subfield 11                                             !!03054
*                                                                     !!03055
      04  mult-clrng-seq-num              pic 9(2).                    !03056
*                                                                     !!03057
*             Indicates the specific custom payment service           !!03058
*             that the acquirer requested.  Valid values are;         !!03059
*                                                                     !!03060
*             A = Retail                                              !!03061
*             1 = Passenger Transport 1                               !!03062
*             2 = Passenger Transport 2                               !!03063
*             3 = Hotel 1                                             !!03064
*             4 = Hotel 2                                             !!03065
*             5 = Auto Rental 1                                       !!03066
*             6 = Auto Rental 2                                       !!03067
*             7 = Direct Marketing                                    !!03068
*             8 = Automated Fuel Dispenser                            !!03069
*                                                                     !!03070
*             Subfield 15                                             !!03071
*                                                                     !!03072
      04  rqstd-pymnt-srvc                pic x.                       !03073
                                                                       !03073G00
*                                                                      !03073G01
*             Excluded Transaction Identifier Reason - A code          !03073G02
*             indicating that a Transaction Identifier is not included !03073G03
*             in the transaction. May be any alphanumeric value.       !03073G04
* Excluded Transaction Identifier Reason - May be a space or A. A      !03073G05
* means the Transaction ID is not available or not cleared through     !03073G06
* VisaNet.                                                             !03073G07
*                                                                      !03073G08
*             Subfield 18                                              !03073G09
*                                                                      !03073G0A
      04  exclud-tran-id-rsn            pic x.                         !03073G0B
                                                                       !03073G0C
*                                                                     !!03074
* vdcs private                                                        !!03075
* bit map position = 63                                               !!03076
* 4-bit BCD (unsigned packed) in transmission                         !!03077
* VDCS admin messages only.                                           !!03078
*                                                                     !!03079
*            len is the number of bytes after bit-map, after packing  !!03080
*            map is a bit map indicating which code is present        !!03081
*                1st bit on - Network id code                         !!03082
*                2nd bit on - time limit                              !!03083
*                3rd bit on - MIS/CAS reason code                     !!03084
*                4th bit on - Visa reason code                        !!03085
*                5th bit on - PMC-ID                                  !!03086
*                6th bit on - Chargeback Reduction/BASE II Flags      !!03087
*                7th bit on - Network Participation Flags (8 bytes)   !!03088
*                8th bit on - VISA Acquirer's Business ID (8 digits)  !!03089
*                9th bit on - Fraud Reporting Data                    !!03090
*               10th bit on - Special Program Flag                    !!03091
*               11th bit on - Reimbursement att                       !!03092
*                                                                     !!03093
  02  vdcs-private.                                                    !03094
      04  lgth                            pic 99.                      !03095
      04  bit-map                         pic x(3).                    !03096
      04  ntwk-id-cde                     pic x(4).                    !03097
      04  tim-hold                        pic x(4).                    !03098
      04  mis-cas-cde                     pic x(4).                    !03099
      04  stip-cde                        pic x(4).                    !03100
                                                                       !03101r00
                                                                       !03101r01
      04  chgbk-bii-flags                 pic x(7).                    !03102
      04  ntwk-part-flags                 pic x(8).                    !03103
      04  acq-bus-id                      pic x(8).                    !03104
      04  fraud-rept-data.                                             !03105
          08  fraud-typ                   pic x.                       !03106
          08  fraud-ntfy-cde              pic x.                       !03107
          08  reserved                    pic x(12).                   !03108
      04  spcl-prgm-flg                   pic x(2).                    !03109
      04  reimb-att                       pic x.                       !03110
                                                                       !03110S00
*                                                                      !03110S01
* Settlement Institution Country Code                                  !03110S02
* bit map position = 69                                                !03110S03
* 4-bit BCD (unsigned packed)                                          !03110S04
*                                                                      !03110S05
  02  setl-cntry-cde                      pic 9(3).                    !03110S06
                                                                       !03110S07
*                                                                     !!03111
* network management information code                                 !!03112
* bit map position = 70                                               !!03113
* 4-bit BCD (unsigned packed) in transmission                         !!03114
* VDCS admin messages only.                                           !!03115
*                                                                     !!03116
*            172 - cardholder risk identification service (CRIS)      !!03117
*                  alerts                                             !!03118
*            290 - funds transfer totals                              !!03119
*            880 - request for original                               !!03120
*            881 - request for copy                                   !!03121
*            882 - confirmation of copy                               !!03122
                                                                       !03122X00
*            883 - text message                                        !03122X01
                                                                       !03122X02
*            884 - copy request results notification                  !!03123
*            885 - VCRFS nonfulfillment/mail fulfillment              !!03124
*            886 - VCRFS dispute                                      !!03125
*            887 - VCRFS dispute ruling for Issuers                   !!03126
*            888 - VCRFS dispute ruling for Acquirers                 !!03127
                                                                       !03127X00
*            942 - acquirer generated fraud advice                     !03127X01
*            943 - issuer generated fraud advice                       !03127X02
*            944 - fraud advice to acquirer                            !03127X03
*            945 - fraud advice to issuer                              !03127X04
                                                                       !03127X05
*                                                                     !!03128
  02  nmm-info-cde                        pic 9(3).                    !03129
*                                                                     !!03130
* original data elements                                              !!03131
* bit map position = 90                                               !!03132
* 4-bit BCD (unsigned packed) in transmission                         !!03133
*                                                                     !!03134
  02  orig.                                                            !03135
      04  msg-typ                         pic 9(4).                    !03136
      04  base.                                                        !03137
          06  trace-num                   pic 9(6).                    !03138
          06  dat-tim                     pic 9(10).                   !03139
          06  acq-inst-id                 pic x(11).                   !03140
          06  fwd-inst-id                 pic x(11).                   !03141
*                                                                     !!03142
* settlement institution identification code                          !!03143
* bit map position = 99                                               !!03144
* 4-bit BCD (unsigned packed)                                         !!03145
* present only in funds transfers messages                            !!03146
*                                                                     !!03147
*            len is the number of digits in cde                       !!03148
*            cde is the Visa BIN assigned to the institution          !!03149
*                for which the totals are being provided              !!03150
*                                                                     !!03151
  02  setl-inst-id.                                                    !03152
      04  lgth                            pic 99.                      !03153
      04  cde                             pic x(11).                   !03154
*                                                                     !!03155
* receiving institution identification code                           !!03156
* bit map position = 100                                              !!03157
* 4-bit BCD (unsigned packed)                                         !!03158
*                                                                     !!03159
*            len is the number of digits in cde                       !!03160
*            cde is the Visa assigned BIN                             !!03161
*                                                                     !!03162
  02  rcv-inst.                                                        !03163
      04  lgth                            pic 99.                      !03164
      04  cde                             pic x(11).                   !03165
                                                                       !03165G00
                                                                       !03165$00
*                                                                      !03165$01
* Transaction Specific Data                                            !03165$02
* bit map position = 104                                               !03165$03
* EBCDIC in transmission                                               !03165$04
*                                                                      !03165$05
  02  txn-spcf-data.                                                   !03165$06
      04  lgth                            pic x.                       !03165$07
      04  info                            pic x(255).                  !03165$08
                                                                       !03165$09
*                                                                      !03165G01
* Additional Trace Data                                                !03165G02
* bit map position = 115                                               !03165G03
* Used in 9620 fraud advice messages                                   !03165G04
*                                                                      !03165G05
  02  adnl-trace-data.                                                 !03165G06
      04  lgth                            pic 99.                      !03165G07
      04  trc-data                        pic x(24).                   !03165G08
                                                                       !03165G09
*                                                                     !!03166
* supporting information                                              !!03167
* bit map position = 125                                              !!03168
* 1 byte binary + up to 255 bytes variable                            !!03169
* This field only used in Interlink copy requests/confirmations.      !!03170
*                                                                     !!03171
  02  supp-info.                                                       !03172
      04  len                             pic 999.                     !03173
      04  crc-data.                                                    !03174
*           EBCDIC                                                    !!03175
          08  contact-nam                 pic x(15).                   !03176
*           BCD                                                       !!03177
          08  contact-phone-num           pic x(10).                   !03178
*           BCD                                                       !!03179
          08  dat-sent                    pic x(6).                    !03180
*           BCD                                                       !!03181
          08  del-meth                    pic x(4).                    !03182
*           BCD                                                       !!03183
          08  orig-data.                                               !03184
              16  msg-typ                 pic x(4).                    !03185
              16  trace-num               pic x(6).                    !03186
              16  tran-dat-tim            pic x(10).                   !03187
*           EBCDIC                                                    !!03188
          08  txt                         pic x(220).                  !03189
*                                                                     !!03190
* For SMS Fraud Transaction Notification                              !!03191
*                                                                     !!03192
                                                                       !03192G00
      04  adnl-fraud-data redefines crc-data.                          !03192G01
          08  fraud-typ-ntfy              pic x(2).                    !03192G02
          08  crdhldr-zip-cde             pic x(10).                   !03192G03
          08  crdhldr-lastname            pic x(25).                   !03192G04
          08  crdhldr-firstname           pic x(15).                   !03192G05
          08  crdhldr-mi                  pic x.                       !03192G06
          08  crdhldr-addr-1              pic x(21).                   !03192G07
          08  crdhldr-addr-2              pic x(23).                   !03192G08
          08  crdhldr-city                pic x(14).                   !03192G09
          08  crdhldr-st                  pic x(2).                    !03192G0A
          08  crdhldr-phn                 pic x(10).                   !03192G0B
          08  crdhldr-ssi-num             pic x(9).                    !03192G0C
          08  crd-zip-cde                 pic x(9).                    !03192G0D
          08  crd-valid-dat               pic x(4).                    !03192G0E
          08  crd-mail-dat                pic x(6).                    !03192G0F
          08  crd-mail-city               pic x(28).                   !03192G0G
          08  crd-mail-st                 pic x(2).                    !03192G0H
          08  crd-market-seg              pic x.                       !03192G0I
          08  crd-locator-num             pic x(11).                   !03192G0J
          08  case-num                    pic x(7).                    !03192G0K
          08  arrest-cde                  pic x.                       !03192G0L
          08  iss-gen-auth                pic x.                       !03192G0M
          08  acct-seq-num                pic x(4).                    !03192G0N
          08  invest-stat                 pic x(2).                    !03192G0O
          08  cashback                    pic x.                       !03192G0P
          08  crd-cap                     pic x.                       !03192G0Q
          08  trav-agncy-id               pic x(8).                    !03192G0R
          08  crdhldr-id-method           pic x(1).                    !03192G0S
          08  user-fld                    pic x(56).                   !03192G0T
                                                                       !03192G0U
                                                                       !03193G00
                                                                       !03193G01
                                                                       !03193G02
*                                                                     !!03243
* used for optional text messages associated with a Nonfulfillment/   !!03244
* mail fulfillment, Dispute or Dispute ruling message.                !!03245
*                                                                     !!03246
      04 opt-text redefines crc-data.                                  !03247
          08  txt                         pic x(163).                  !03248
          08  filler                      pic x(112).                  !03249
                                                                       !03249N00
                                                                       !03249N01
*                                                                      !03249N02
* Used for Check Service Request for Copy.                             !03249N03
*                                                                      !03249N04
      04 chk redefines crc-data.                                       !03249N05
                                                                       !03249N06
*     Field indentifier - $V                                           !03249N07
                                                                       !03249N08
          06  fld-id                      pic x(2).                    !03249N09
                                                                       !03249N0A
*     Contains MICR data for check authorization transactions.         !03249N0B
                                                                       !03249N0C
          06  micr.                                                    !03249N0D
                                                                       !03249N0E
*     Route and Transit information.                                   !03249N0F
                                                                       !03249N0G
              08  rttn.                                                !03249N0H
                                                                       !03249N0I
*     Field indetifier - "AB".                                         !03249N0J
                                                                       !03249N0K
                  10  fld-id              pic x(2).                    !03249N0L
                                                                       !03249N0M
*     Length of Route and Transit information.  Must be "009".         !03249N0N
                                                                       !03249N0O
                  10  len                 pic 999.                     !03249N0P
                                                                       !03249N0Q
*     Route and Transit number.                                        !03249N0R
                                                                       !03249N0S
                  10  txt                 pic x(9).                    !03249N0T
                                                                       !03249N0U
*     Acount Number information.                                       !03249N0V
                                                                       !03249N0W
              08  acct-num.                                            !03249N0X
                                                                       !03249N0Y
*     Field indetifier - "AN".                                         !03249N0Z
                                                                       !03249N10
                  10  fld-id              pic x(2).                    !03249N11
                                                                       !03249N12
*     Length of account number.                                        !03249N13
                                                                       !03249N14
                  10  len                 pic 999.                     !03249N15
                                                                       !03249N16
*     Account Number.                                                  !03249N17
                                                                       !03249N18
                  10  txt                 pic x(19).                   !03249N19
                                                                       !03249N1A
*     Check Serial Number information.                                 !03249N1B
                                                                       !03249N1C
              08  chk-serial-num.                                      !03249N1D
                                                                       !03249N1E
*     Field indetifier - "CK".                                         !03249N1F
                                                                       !03249N1G
                  10  fld-id              pic x(2).                    !03249N1H
                                                                       !03249N1I
*     Length of check serial number.                                   !03249N1J
                                                                       !03249N1K
                  10  len                 pic 999.                     !03249N1L
                                                                       !03249N1M
*     Check serial number.                                             !03249N1N
                                                                       !03249N1O
                  10  txt                 pic x(15).                   !03249N1P
                                                                       !03249N1Q
*     Filler.                                                          !03249N1R
                                                                       !03249N1S
          06  filler                      pic x(215).                  !03249N1T
                                                                       !03249N1U
                                                                       !03249C00
*                                                                      !03249C01
* For Cardholder Risk Identification Service                           !03249C02
*                                                                      !03249C03
  02  cris-data redefines supp-info.                                   !03249C04
      04  lgth                            pic 999.                     !03249C05
      04  fld-id                          pic x.  !c!                  !03249C06
      04  merch-location                  pic x(20).                   !03249C07
      04  track-indication                pic x.                       !03249C08
      04  track-lgth                      pic xx.                      !03249C09
      04  track-data                      pic x(76).                   !03249C0A
      04  reserved                        pic x(175).                  !03249C0B
                                                                       !03249%00
*                                                                      !03249%01
* Field 125, Usage 2 - TLV Format                                      !03249%02
*                                                                      !03249%03
  02  supp-info-tlv redefines supp-info.                               !03249%04
      04  lgth                            pic x.                       !03249%05
      04  txt                             pic x(255).                  !03249%06
      04  user-fld-aci                    pic x(22).                   !03249%07
                                                                       !03249%08
                                                                       !03249C0C
*                                                                     !!03250
* message authentication code                                         !!03251
* bit map position = 128                                              !!03252
*                                                                     !!03253
  02  smac                                pic x(8).                    !03254
                                                                       !03255
                                                                       !03255Y00
*                                                                      !03255Y01
* This field was placed here instead of after bit 49 to prevent the    !03255Y02
* need for a conversion for admin messages in the ILF.                 !03255Y03
*                                                                      !03255Y04
* settlement currency code                                             !03255Y05
* bit map position = 50                                                !03255Y06
* 4-bit BCD (unsigned packed) in transmission                          !03255Y07
*                                                                      !03255Y08
*                                                                      !03255Y09
  02  sttl-crncy-cde                      pic x(3).                    !03255Y0A
                                                                       !03255Y0B
end                                                                    !03256
                                                                       !03257
?section pct-visa
?page "Visa process control table"
def     pct-visa.                                                      !03262
    02  ln                      pic x(4).                              !03263
    02  fiid                    pic x(4).                              !03264
    02  inst-id                 pic x(15).                             !03265
    02  swi-id                  pic x(15).                             !03266
    02  swi-term-id             pic x(16).                             !03267
    02  dflt-sic                pic x(4).                              !03268
    02  bal-display             pic x.                                 !03269
                                                                       !03270C00
                                                                       !03270C01
    02  cntry-cde               pic x(3).                              !03271
    02  crncy-cde               pic x(3).                              !03272
    02  t-o-max                 type binary 16.                        !03273
    02  trace-num               type binary 32.                        !03274
    02  auth-cde                type binary 32.                        !03275
    02  conv-rate               type binary 64, 0.                     !03276
    02  scale                   type binary 16.                        !03277
    02  gmt-adjust              type binary 16.                        !03278
    02  auth-only               type binary 16.                        !03279
    02  auto-advice-signon      type binary 16.                        !03280
    02  retry-enabled           type binary 16.                        !03281
                                                                       !03281P00
    02  file-open-frmt          type binary 16.                        !03281P01
                                                                       !03281P02
    02  station                 occurs 16 times.                       !03282
        04  snd                 pic x(16).                             !03283
        04  rcv                 pic x(16).                             !03284
        04  visa.                                                      !03285
                                                                       !03286C00
                                                                       !03286C01
            08  acq-id          pic x(6).                              !03287
            08  iss-id          pic x(6).                              !03288
        04  acq                 type binary 16.                        !03289
        04  snd-up              type binary 16. ! 95xx and failed     !!03290
        04  rcv-up              type binary 16. ! 95xx and failed     !!03291
                                                                       !03292
        04  logon-acq           type binary 16.                        !03293
        04  logon-iss           type binary 16.                        !03294
                                                                       !03295
        04  avlog-acq           type binary 16.                        !03296
        04  avlog-iss           type binary 16.                        !03297
                                                                       !03298
        04  traffic             type binary 16.                        !03299
        04  t-o-ctr             type binary 16.                        !03300
                                                                       !03301
        04  si-mode             type binary 16.                        !03302
        04  advice-acq          type binary 16.                        !03303
        04  advice-iss          type binary 16.                        !03304
                                                                       !03305i00
        04  down-by-shutdown    type binary 16.                        !03305i01
                                                                       !03305i02
    02  secure.                                                        !03306
        04  clear-key           pic x(16).                             !03307
        04  encrypt-key         pic x(16).                             !03308
        04  out-key-index       type binary 16.                        !03309
                                                                       !03310
        04  in-key-index        type binary 16.                        !03311
                                                                       !03312
                                                                       !03313P00
                                                                       !03313P01
        04  awk1                pic x(32).                             !03313P02
        04  iwk1                pic x(32).                             !03313P03
        04  awk2                pic x(32).                             !03313P04
        04  iwk2                pic x(32).                             !03313P05
                                                                       !03313P06
                                                                       !03317
                                                                       !03318P00
                                                                       !03318P01
        04  old-iwk1            pic x(32).                             !03318P02
        04  old-iwk2            pic x(32).                             !03318P03
        04  exchng-key          pic x(32).                             !03318P04
        04  pin-key-lgth        type binary 16.                        !03318P05
                                                                       !03318P06
                                                                       !03318P07
        04  in-key-tran-cnt     type binary 32.                        !03323
        04  out-key-tran-cnt    type binary 32.                        !03324
        04  pin-key-tran-cnt    type binary 32.                        !03325
        04  old-key-timer-lmt   type binary 32.                        !03326
        04  pin-key-timer-lmt   type binary 32.                        !03327
        04  variant             type binary 16.                        !03328
                                                                       !03329
        04  out-typ             pic x.                                 !03330
        04  in-typ              pic x.                                 !03331
        04  out-blk             pic x.                                 !03332
        04  in-blk              pic x.                                 !03333
        04  out-pan             pic x.                                 !03334
        04  in-pan              pic x.                                 !03335
        04  out-pad             pic x.                                 !03336
        04  in-pad              pic x.                                 !03337
                                                                       !03338
    02  rqst.                                                          !03339
        04  out-max             type binary 16.                        !03340
        04  out-ctr             type binary 16.                        !03341
        04  in-max              type binary 16.                        !03342
        04  in-ctr              type binary 16.                        !03343
                                                                       !03344
    02  timers.                                                        !03345
        04  nmm                 type binary 32.                        !03346
        04  xnmm                type binary 32.                        !03347
        04  wft                 type binary 32.                        !03348
        04  perf                type binary 32.                        !03349
                                                                       !03350
    02  setl.                                                          !03351
        04  swi-tim             type binary 16.                        !03352
        04  b24-atm-tim         type binary 16.                        !03353
        04  b24-pos-tim         type binary 16.                        !03354
        04  swi-dat             pic 9(6).                              !03355
        04  b24-atm-dat         pic 9(6).                              !03356
        04  b24-pos-dat         pic 9(6).                              !03357
        04  rpt-tim             type binary 16.                        !03358
        04  rpt-pri             type binary 16.                        !03359
        04  rpt-cpu             type binary 16.                        !03360
                                                                       !03361
    02  ilf.                                                           !03362
        04  curr-fcb            type fcb.                              !03363
                                                                       !03364z00
        04  old-fcb             type fcb occurs 3 times.               !03364z01
                                                                       !03364z02
        04  ctr                 type binary 32.                        !03365
        04  percent             type binary 16.                        !03366
        04  ferror              type binary 16.                        !03367
                                                                       !03367M00
    02  rsaf.                                                          !03367M01
        04  fcb                 type fcb.                              !03367M02
        04  ctr                 type binary 32.                        !03367M03
        04  iss-unavail-ctr     type binary 32.                        !03367M04
        04  ferror              type binary 16.                        !03367M05
        04  pending             type binary 16.                        !03367M06
                                                                       !03367M07
                                                                       !03368
    02  saf.                                                           !03369
        04  fcb                 type fcb.                              !03370
        04  ctr                 type binary 32.                        !03371
        04  addr                type binary 32.                        !03372
        04  percent             type binary 16.                        !03373
        04  ferror              type binary 16.                        !03374
        04  pending             type binary 16.                        !03375
        04  retry-max           type binary 16.                        !03376
        04  retry-ctr           type binary 16.                        !03377
                                                                       !03378
    02  sdf.                                                           !03379
        04  fcb                 type fcb.                              !03380
        04  ctr                 type binary 32.                        !03381
        04  addr                type binary 32.                        !03382
        04  pending             type binary 16.                        !03383
        04  waiting             type binary 16.                        !03384
                                                                       !03385
    02  atm.                                                           !03386
        04  present             type binary 16.                        !03387
        04  dest                pic x(16).                             !03388
        04  dflt-rtg-grp        type id-num.                           !03389
                                                                       !03389K00
        04  acq-txn-prfl        pic x(16).                             !03389K01
        04  iss-txn-prfl        pic x(16).                             !03389K02
                                                                       !03389K03
        04  sharing             pic x occurs 24 times.                 !03390
        04  not-on-us           pic x(16).                             !03391
        04  trans-allowed       pic x(16).                             !03392
        04  user-fld1           pic x.                                 !03393
        04  timers.                                                    !03394
            06  saf             type binary 32.                        !03395
            06  outbound        type binary 32.                        !03396
            06  inbound         type binary 32.                        !03397
            06  compl           type binary 32.                        !03398
            06  out-repeat      type binary 32.                        !03399
        04  perform occurs 5 times.                                    !03400
            06  out-rqst.                                              !03401
                08  count       type binary 32.                        !03402
                08  timeouts    type binary 32.                        !03403
                08  ttl-tim     type binary 64.                        !03404
            06  in-rqst.                                               !03405
                08  count       type binary 32.                        !03406
                08  timeouts    type binary 32.                        !03407
                08  ttl-tim     type binary 64.                        !03408
                                                                       !03408B00
        04  ncd.                                                       !03408B01
            06  not-on-us       pic x(16).                             !03408B02
            06  trans-allowed   pic x(16).                             !03408B03
            06  dflt-merch-typ  pic x(4).                              !03408B04
                                                                       !03408B05
                                                                       !03409B00
                                                                       !03409B01
    02  pos.                                                           !03410
        04  present             type binary 16.                        !03411
        04  dest                pic x(16).                             !03412
        04  dflt-retl-id        pic x(19).                             !03413
                                                                       !03413K00
        04  adj-flg             pic x.                                 !03413K01
        04  chrgbck-flg         pic x.                                 !03413K02
        04  acq-txn-prfl        pic x(16).                             !03413K03
        04  iss-txn-prfl        pic x(16).                             !03413K04
                                                                       !03413K05
        04  timeout-flag        pic x.                                 !03414
        04  apprv-cde-lgth      pic x.                                 !03415
        04  draft-capture       pic x.                                 !03416
        04  prod-id             pic x(2).                              !03417
        04  rfrl-phone          type phone-num.                        !03418
        04  dflt-pre-auth-hld   type binary 16.                        !03419
        04  dflt-pre-auth-amt   type binary 32.                        !03420
        04  trans-allowed.                                             !03421
            06  purchase           pic x.                              !03422
            06  pre-auth           pic x.                              !03423
            06  pre-auth-comp      pic x.                              !03424
            06  mail-phone         pic x.                              !03425
            06  purchase-return    pic x.                              !03426
            06  cash-advance       pic x.                              !03427
            06  card-verify        pic x.                              !03428
            06  inquiry            pic x.                              !03429
            06  cash-back          pic x.                              !03430
            06  chk-verify         pic x.                              !03431
            06  chk-guarantee      pic x.                              !03432
            06  adj-purchase       pic x.                              !03433
            06  adj-cash-back      pic x.                              !03434
            06  adj-return         pic x.                              !03435
            06  adj-cash-advance   pic x.                              !03436
                                                                       !03436J00
            06  adj-amt2-grtr-amt1 pic x.                              !03436J01
                                                                       !03436J02
            06  sales-draft        pic x.                              !03437
            06  representation     pic x.                              !03438
            06  chargeback         pic x.                              !03439
                                                                       !03440J00
                                                                       !03440J01
            06  filler             pic x(3).                           !03441
                                                                       !03442
        04  timers.                                                    !03443
            06  saf             type binary 32.                        !03444
            06  outbound        type binary 32.                        !03445
            06  inbound         type binary 32.                        !03446
            06  compl           type binary 32.                        !03447
            06  out-repeat      type binary 32.                        !03448
                                                                       !03449
        04  num-services        type binary 16.                        !03450
        04  allowed-srvcs       occurs 30 times.                       !03451
            06  service         pic x(2).                              !03452
                                                                       !03453
        04  perform occurs 5 times.                                    !03454
            06  out-rqst.                                              !03455
                08  count       type binary 32.                        !03456
                08  timeouts    type binary 32.                        !03457
                08  ttl-tim     type binary 64.                        !03458
            06  in-rqst.                                               !03459
                08  count       type binary 32.                        !03460
                08  timeouts    type binary 32.                        !03461
                08  ttl-tim     type binary 64.                        !03462
                                                                       !03463
    02  blk-bin-tbl.                                                   !03464
        04  addr                type binary 32.                        !03465
        04  ctr                 type binary 16.                        !03466
                                                                       !03467
    02  fi-tbl.                                                        !03468
        04  addr                type binary 32.                        !03469
        04  ctr                 type binary 16.                        !03470
                                                                       !03471
    02  visf-tbl.                                                      !03472
        04  addr                type binary 32.                        !03473
                                                                       !03474
    02  frlf.                                                          !03475
        04  fcb                 type fcb.                              !03476
        04  ctr                 type binary 32.                        !03477
        04  percent             type binary 16.                        !03478
        04  ferror              type binary 16.                        !03479
                                                                       !03480
    02  visa-sharing-id         pic x.                                 !03481
    02  entree-sharing-id       pic x.                                 !03482
    02  plus-sharing-id         pic x.                                 !03483
    02  user-fld                pic x.                                 !03484
                                                                       !03485
end                                                                    !03486
                                                                       !03487
?section icf-visa
?page "icf-visa"
def  icf-visa.                                                         !03492
                                                                       !03493
    02  iss-stations              pic x(16)  occurs 3 times.           !03494
    02  visa-stations.                                                 !03495
        04  iss                              occurs 3 times.           !03496
            06  sys               pic x(2).                            !03497
            06  id                pic x(6).                            !03498
        04  acq                              occurs 2 times.           !03499
            06  id                pic x(6).                            !03500
    02  vbbf-name                 pic x(34).                           !03501
    02  viif-name                 pic x(34).                           !03502
    02  conversion-rate           pic 9(8).                            !03503
*                                                                     !!03504
*     If "Y" then all transactions sent to the switch will be for     !!03505
*     authorization inquiries only.                                   !!03506
*                                                                     !!03507
    02  auth-only                 pic x.                               !03508
*                                                                     !!03509
*     If "Y" then all transactions sent to VisaNet which do not       !!03510
*     receive a response in the time allowed will be resent once.     !!03511
*                                                                     !!03512
    02  retry-enabled             pic x.                               !03513
*                                                                     !!03514
*     This is the iso country code of the acquiring institution or    !!03515
*     processor.                                                      !!03516
*                                                                     !!03517
    02  iso-cntry-cde             pic x(3).                            !03518
*                                                                     !!03519
*     The greenwich mean time adjustment is used to adjust the        !!03520
*     current time to GMT and is based upon how many minutes          !!03521
*     difference.                                                     !!03522
*                                                                     !!03523
    02  gmt-adjust                pic s999.                            !03524
    02  visa-sharing-id           pic x.                               !03525
    02  entree-sharing-id         pic x.                               !03526
    02  plus-sharing-id           pic x.                               !03527
*                                                                     !!03528
*     The protocol type used between the BASE24 Visanet Interface     !!03529
*     and the Visanet Switch.  This field is used in order to         !!03530
*     determine if protocol characters are required to be appended    !!03531
*     to the front of the text message on an outbound request to      !!03532
*     Visanet and/or stripped off on receipt of an inbound request    !!03533
*     from Visanet. 0 - Multipoint, 1 - Point-to-Point.  The default  !!03534
*     is 0.                                                           !!03535
*                                                                     !!03536
    02  protocol                  pic x.                               !03537
*                                                                     !!03538
*     If "Y" then all transactions sent to the switch will be for     !!03539
*     atm processing only.                                            !!03540
*                                                                     !!03541
    02  atm-proc                  pic x.                               !03542
*                                                                     !!03543
*     If "Y" then all transactions sent to the switch will be for     !!03544
*     pos processing only.                                            !!03545
*                                                                     !!03546
    02  pos-proc                  pic x.                               !03547
                                                                       !03548
*     The interface sends an advice logon to visa depending on the    !!03549
*     value of this field upon initialization.                        !!03550
                                                                       !03551
    02  auto-advice-signon        pic x.                               !03552
                                                                       !03553
end                                                                    !03554
                                                                       !03555
?section path-rqst
?page "path-rqst"
def  path-rqst.                                                        !03560
*                                                                     !!03561
*   Value is "PATH"                                                   !!03562
*                                                                     !!03563
    02  typ                       pic x(4).                            !03564
*                                                                     !!03565
*                  "SN"  "SF"   - signon/signoff                      !!03566
*                  "AN"  "AF"   - advice recovery signon/signoff      !!03567
*                  "SI"  "BI"   - enter/exit suppress inquiry mode    !!03568
*                  "GA"  "GI"   - request for current GIV totals      !!03569
*                  "CO"  "CY"  "CF"       - copy request/confirmation !!03570
*                  "DP"  "MF"  "NF"       - dispute/mail fulfillment/ !!03571
*                                           nonfulfillment            !!03572
*                  "BA"  "BC"  "BD"  "BR" - BASE exception file trans !!03573
*                  "VA"  "VC"  "VD"  "VR" - VDCS exception file trans !!03574
                                                                       !03574r00
*                  "XA"  "XC"  "XD"  "XR" - BASE and VDCS exception    !03574r01
*                                           files tran                 !03574r02
                                                                       !03574r03
                                                                       !03574u00
*                  "PF"  "PC"  "PD"  "PR" - BASE pvv file trans        !03574u01
                                                                       !03574u02
                                                                       !03575u00
                                                                       !03575u01
*                  "CA"  "CC"  "CD"  "CR" - VDCS cv file trans        !!03576
                                                                       !03576s00
*                  "CL"                   - Visa Collection-Only txn   !03576s01
                                                                       !03576s02
*                  "CN"          - card capture notification          !!03577
*                  "CT"          - free text                          !!03578
                                                                       !03578V00
*                  "SA"  "SC"  "SD"  "SR" - Stop recurring/installment !03578V01
*                                           payment file BASE I        !03578V02
*                  "TA"  "TC"  "TD"  "TR" - Stop recurring/installment !03578V03
*                                           payment file SMS (VDCS)    !03578V04
                                                                       !03578V05
                                                                       !03578u00
*                  "AA"  "AC"  "AD"  "AR" - BASE address file trans    !03578u01
*                  "DA"  "DC"  "DD"  "DR" - VDCS address file trans    !03578u02
                                                                       !03578u03
*                                                                     !!03579
    02  tran-cde                  pic x(2).                            !03580
*                                                                     !!03581
*   Field is the account number for exception file trans              !!03582
*                                                                     !!03583
    02  acct-num                  pic x(28).                           !03584
*                                                                     !!03585
*   Field is the VisaNet assigned station id for the station which    !!03586
*   will be used to send the command or request.  For commands, an id !!03587
*   of spaces will mean to send to it all applicable station ids pro- !!03588
*   cessed by the interface.                                          !!03589
*                                                                     !!03590
    02  station  redefines acct-num.                                   !03591
        04  id                    pic x(6).                            !03592
        04  filler                pic x(22).                           !03593
*                                                                     !!03594
*   Field is the financial institution for which the current totals   !!03595
*   are being requested with a "GT" command.                          !!03596
*                                                                     !!03597
    02  inst     redefines acct-num.                                   !03598
        04  fi-id                 pic x(4).                            !03599
        04  filler                pic x(2).                            !03600
        04  setl-inst-id          pic x(11).                           !03601
        04  filler                pic x(11).                           !03602
*                                                                     !!03603
*   Field is the ISO code of the country for the account number.      !!03604
*   It is only needed if the account number begins with a "59" or     !!03605
*   has more than 19 digits, or this is an add or update to a VDCS    !!03606
*   exception or verification file.                                   !!03607
*                                                                     !!03608
    02  cntry-cde             pic 9(3).                                !03609
*                                                                     !!03610
*   Field is the id of the operator who entered this transaction.     !!03611
*                                                                     !!03612
    02  op-id                 pic x(2).                                !03613
*                                                                     !!03614
*   Field is the date the record is to be purged from the file,       !!03615
                                                                       !03616
*       (YYMMDD).                                                     !!03617
*                                                                     !!03618
    02  purge-dat             pic x(6).                                !03619
*                                                                     !!03620
*   Section is the data needed for an administration copy             !!03621
*   request or confirmation of a copy sent.                           !!03622
*                                                                     !!03623
    02  admin.                                                         !03624
*                                                                     !!03625
*       Field is the amount of the original transaction, if           !!03626
*       known.                                                        !!03627
*                                                                     !!03628
        04  orig-amt              pic 9(10)V99.                        !03629
                                                                       !03629C00
*                                                                      !03629C01
*       Process code field                                             !03629C02
*                                                                      !03629C03
        04  proc-cde              pic x(6).                            !03629C04
                                                                       !03629C05
*                                                                     !!03630
*       Field is the BIN of the original acquiring institution        !!03631
*       from the ACQ-INST.CDE field of the original transaction.      !!03632
*                                                                     !!03633
        04  orig-acq              pic x(11).                           !03634
*                                                                     !!03635
*       Field is the original retrieval reference number from         !!03636
*       the REF-NUM field of the original transaction.                !!03637
*                                                                     !!03638
        04  orig-ref-num          pic 9(12).                           !03639
*                                                                     !!03640
*       Field is the currency code of the original transaction        !!03641
*       from the TRAN-CURR-CDE.                                       !!03642
*                                                                     !!03643
        04  orig-crncy-cde        pic 9(3).                            !03644
*                                                                     !!03645
*       Field is the reason this request is being made.               !!03646
*                                                                     !!03647
        04  rsn-cde               pic 9(4).                            !03648
*                                                                     !!03649
*       Field is the local date of original request.                  !!03650
*                                                                     !!03651
        04  local-dat             pic 9(4).                            !03652
*                                                                     !!03653
*       Field is the network id code of original request.             !!03654
*                                                                     !!03655
        04  ntwk-id               pic 9(4).                            !03656
*                                                                     !!03657
*       Field is expiration date for PLUS message.                    !!03658
*                                                                     !!03659
        04  exp-dat               pic 9(4).                            !03660
*                                                                     !!03661
*       Field is the merchant type code of original request.          !!03662
*                                                                     !!03663
        04  merch-typ             pic 9(4).                            !03664
*                                                                     !!03665
*       Field is the issuer control number from a BASE II copy        !!03666
*       request, needed in the copy confirmation.                     !!03667
*                                                                     !!03668
        04  iss-cntl-num          pic 9(9).                            !03669
                                                                       !03670
*       Field is the card sequence number of original request.        !!03671
*                                                                     !!03672
        04  crd-seq-num           pic x(3).                            !03673
                                                                       !03674
*       Field is the Visa-assigned Business ID of the acquirer that   !!03675
*       signed the merchant for a purchase or mail/phone order        !!03676
*       transaction of original request.                              !!03677
*                                                                     !!03678
        04  acq-bus-id            pic x(8).                            !03679
*                                                                     !!03680
*       The following are the name, city, and country of the          !!03681
*       card acceptor or financial institution.                       !!03682
*                                                                     !!03683
        04  inst-nam              pic x(25).                           !03684
        04  inst-city             pic x(13).                           !03685
        04  inst-cntry            pic x(2).                            !03686
*                                                                     !!03687
*       The following are the state, county and zip of the            !!03688
*       terminal.                                                     !!03689
*                                                                     !!03690
        04  term-st               pic 9(2).                            !03691
        04  term-cnty             pic 9(3).                            !03692
        04  term-zip              pic x(9).                            !03693
*                                                                     !!03694
*       The following are for messages sent to PLUS.                  !!03695
*                                                                     !!03696
        04  dest-inst             pic x(11).                           !03697
                                                                       !03698r00
                                                                       !03698r01
        04  free-text             pic x(255).                          !03699
                                                                       !03699N00
*                                                                      !03699N01
*       Field is the Route and Transit Number from MICR, if appl.      !03699N02
*                                                                      !03699N03
        04  micr-rttn             pic x(9).                            !03699N04
*                                                                      !03699N05
*       Field is the Check Serial Number from MICR, if appl.           !03699N06
*                                                                      !03699N07
        04  chk-num               pic x(15).                           !03699N08
                                                                       !03699N09
*                                                                     !!03700
* For SMS NRI/ICS Fraud Transaction Notification                      !!03701
*                                                                     !!03702
        04  nri-ics-fraud.                                             !03703
            08  cardholder-zip-code        pic x(10).                  !03704
            08  cardholder-lastname        pic x(25).                  !03705
            08  cardholder-firstname       pic x(15).                  !03706
            08  cardholder-mi              pic x.                      !03707
            08  cardholder-address-1       pic x(21).                  !03708
            08  cardholder-address-2       pic x(23).                  !03709
            08  cardholder-city            pic x(14).                  !03710
            08  cardholder-state           pic x(2).                   !03711
            08  cardholder-phone           pic x(10).                  !03712
                                                                       !03712G00
            08  crdhldr-id-method          pic x.                      !03712G01
                                                                       !03712G02
            08  card-zip-code              pic x(9).                   !03713
            08  card-valid-date            pic x(4).                   !03714
            08  card-mail-date             pic x(6).                   !03715
            08  card-mail-city             pic x(28).                  !03716
            08  card-mail-state            pic x(2).                   !03717
            08  card-market-segment        pic x.                      !03718
            08  card-locator-num           pic x(11).                  !03719
            08  cardholder-ssi-num         pic x(9).                   !03720
            08  case-num                   pic x(7).                   !03721
            08  arrest-cde                 pic x.                      !03722
                                                                       !03723
* the following was added for the SMS interface for the VCRF service  !!03724
        04  vcrfs.                                                     !03725
            06 fax-num                     pic x(16).                  !03726
            06 iss-rqst-meth               pic x.                      !03727
            06 acq-est-meth                pic x.                      !03728
            06 workstation-addr            pic x(6).                   !03729
            06 sub-addr                    pic x(6).                   !03730
            06 dest-sub-addr               pic x(7).                   !03731
            06 srce-sub-addr               pic x(7).                   !03732
            06 reason-code                 pic x(2).                   !03733
            06 orgl-rqst-rsn-cde           pic x(2).                   !03734
            06 prchs-dat                   pic x(4).                   !03735
            06 contact-name                pic x(30).                  !03736
            06 contact-phone               pic x(16).                  !03737
            06 err-flds.                                               !03738
               08 acct-number              pic x.                      !03739
               08 prchs-date               pic x.                      !03740
               08 tran-amt                 pic x.                      !03741
               08 exp-date                 pic x.                      !03742
               08 mrch-nam-loc             pic x.                      !03743
               08 signature                pic x.                      !03744
               08 other-err                pic x.                      !03745
                                                                       !03746
*       The following fields are for messages sent to VISA.           !!03747
                                                                       !03748
        04  visa.                                                      !03749
            06  payment-srv-fld.                                       !03750
                08 ind            pic x.                               !03751
                08 tran-id        pic 9(15).                           !03752
                08 mult-clrng-seq-num pic 9(2).                        !03753
                08 rqstd-pymnt-srv pic x.                              !03754
            06  vdcs-private.                                          !03755
                08 reimb-att      pic x.                               !03756
                                                                       !03756M00
                08 spcl-cond-merch pic x.                              !03756M01
                                                                       !03756M02
*                                                                     !!03757
*       The following 06 level fields are for fraud notification      !!03758
*       messages to VISA.                                             !!03759
*                                                                     !!03760
*       Signifies if this is an acquirer or issuer terminal.          !!03761
*                                                                     !!03762
            06  acq-iss           pic x.                               !03763
*                                                                     !!03764
*       forwarding institution identification code                    !!03765
*       cde must be the Visa assigned BIN                             !!03766
*                                                                     !!03767
            06  iss-inst-id       pic x(11).                           !03768
*                                                                     !!03769
*       Field is expiration date for fraud messages.                  !!03770
*                                                                     !!03771
            06  visa-exp-dat      pic 9(4).                            !03772
*                                                                     !!03773
*       Systems trace audit number from the original transaction.     !!03774
*                                                                     !!03775
            06  trc-num           pic 9(6).                            !03776
                                                                       !03777G00
                                                                       !03777G01
                                                                       !03777G02
*                                                                     !!03781
*       Optional, must match authorization code on draft transaction  !!03782
*       if present.                                                   !!03783
*                                                                     !!03784
            06  auth-id-resp      pic 9(6).                            !03785
*                                                                     !!03786
*       Terminal type.                                                !!03787
*                                                                     !!03788
            06  term-typ          pic 9.                               !03789
*                                                                     !!03790
*       Optional, card acceptor terminal identification from the      !!03791
*       original transaction.                                         !!03792
*                                                                     !!03793
            06  crd-acpt-term-id  pic x(8).                            !03794
*                                                                     !!03795
*       Terminal capability.                                          !!03796
*                                                                     !!03797
            06  term-cap          pic 9.                               !03798
*                                                                     !!03799
*       Optional, must match card acceptor identification from the    !!03800
*       original transaction if present.                              !!03801
*                                                                     !!03802
            06  crd-acpt-id-cde   pic x(15).                           !03803
*                                                                     !!03804
*       Accout sequence number.                                       !!03805
*                                                                     !!03806
            06  acct-seq-num      pic 9(4).                            !03807
                                                                       !03808G00
                                                                       !03808G01
                                                                       !03808G02
*                                                                     !!03812
*       Fraud type.                                                   !!03813
*                                                                     !!03814
            06  fraud-typ         pic 9.                               !03815
*                                                                     !!03816
*       Notification code.                                            !!03817
*                                                                     !!03818
            06  fraud-ntfy-cde    pic 9.                               !03819
*                                                                     !!03820
*       Optional, pos entry mode.  Must match original transaction    !!03821
*       if present.                                                   !!03822
*                                                                     !!03823
            06  pos-entry-mde     pic 99.                              !03824
                                                                       !03824G00
*                                                                      !03824G01
*       PIN entry capability                                           !03824G02
*                                                                      !03824G03
            06  pin-entry-cap     pic 9.                               !03824G04
                                                                       !03824G05
*                                                                     !!03825
*       Issuer-generated authorization.                               !!03826
*                                                                     !!03827
            06  iss-gen-auth      pic x.                               !03828
*                                                                     !!03829
*       Excluded Transaction Identifier Reason.                       !!03830
*                                                                     !!03831
                                                                       !03832G00
            06  exclud-tran-id-rsn pic x.                              !03832G01
                                                                       !03832G02
*                                                                     !!03833
*       Fraud investigative status; spaces or member assigned.        !!03834
*                                                                     !!03835
            06  invest-stat       pic xx.                              !03836
                                                                       !03836A00
*                                                                      !03836A01
*       Cashback Indicator; Y inidcates cashback was part of original  !03836A02
*       transaction.                                                   !03836A03
*                                                                      !03836A04
            06  cashback          pic x.                               !03836A05
                                                                       !03836A06
*                                                                      !03836A07
*       Card Capability; C, M or V.                                    !03836A08
*                                                                      !03836A09
            06  card-cap          pic x.                               !03836A0A
                                                                       !03836A0B
*                                                                      !03836A0C
*       Cashback amount; two decimal places assumed.                   !03836A0D
*                                                                      !03836A0E
            06  cashback-amt      pic x(12).                           !03836A0F
                                                                       !03836A0G
*                                                                      !03836A0H
*       Mail/Telepone or Electronic Commerce Indicator; space or 1-8.  !03836A0I
*                                                                      !03836A0J
            06  mtec-ind          pic x.                               !03836A0K
                                                                       !03836G00
*                                                                      !03836G01
*       Travel Agency ID                                               !03836G02
*                                                                      !03836G03
            06  trav-agncy-id     pic x(8).                            !03836G04
*                                                                      !03836G05
*       Additional Trace Data                                          !03836G06
*                                                                      !03836G07
            06  adnl-trc-data     pic x(24).                           !03836G08
                                                                       !03836G09
                                                                       !03836A0L
                                                                       !03837A00
                                                                       !03837A01
                                                                       !03837A02
                                                                       !03839
        04  piso.                                                      !03840
            06  capt-stat         pic x(2).                            !03841
            06  inst-name         pic x(40).                           !03842
            06  card-name         pic x(19).                           !03843
            06  addl-data         pic x(14).                           !03844
            06  contact-info      pic x(25).                           !03845
                                                                       !03846
        04  link.                                                      !03847
            06  acpt-id-cde       pic x(15).                           !03848
            06  msg-typ           pic 9(4).                            !03849
            06  trace-number      pic 9(6).                            !03850
            06  date-time         pic 9(10).                           !03851
            06  fwd-inst-id       pic 9(11).                           !03852
            06  contact-nam       pic x(15).                           !03853
            06  contact-phone-num pic 9(10).                           !03854
            06  dat-sent          pic 9(6).                            !03855
            06  del-meth          pic 9(2).                            !03856
            06  msg-type-2        pic 9(4).                            !03857
            06  trace-number-2    pic 9(6).                            !03858
            06  date-time-2       pic 9(10).                           !03859
*                                                                     !!03860
*   Section is the data needed for an exception file trans,           !!03861
*   except "xR".                                                      !!03862
*                                                                     !!03863
    02  except redefines admin.                                        !03864
*                                                                     !!03865
*       Field is the action code for the exception file               !!03866
*       Valid Values: "  "                                            !!03867
*                     "01" - refer to issuer                          !!03868
*                     "04" - pick up card                             !!03869
*                     "05" - do not honor                             !!03870
*                     "07" - pick up card, special condition          !!03871
*                     "11" - approval for VIP                         !!03872
*                     "41" - lost card, pick up                       !!03873
*                     "43" - stolen card, pick up                     !!03874
*                     "XA" - forward to issuer, default to "00"       !!03875
*                     "XD" - forward to issuer, default to "05"       !!03876
*                                                                     !!03877
        04  action-cde            pic x(2).                            !03878
*                                                                     !!03879
*       Field is the region code for "BA" and "BC" tran codes.        !!03880
*                                                                     !!03881
        04  region-cde            pic x(9).                            !03882
*                                                                     !!03883
*       Field is the cardholder daily spending amount and count       !!03884
*       limits for "VA" and "VC" trans.  The resp-cde field must      !!03885
*       be "  " or "11", if these fields are > 0.                     !!03886
*                                                                     !!03887
        04  spending-cnt          pic 99.                              !03888
        04  spending-amt          pic 9(6).                            !03889
*                                                                     !!03890
*       Field is the factor placed in the exception file that is      !!03891
*       multiplied by the issuer's Activity File parameters to        !!03892
*       determine the parameters for this cardholder account.         !!03893
*                                                                     !!03894
        04  proc-cntl-cde         pic 9(3).                            !03895
*                                                                    !!!03896
*   Field is the netword id needed to process exeption file messages.!!!03897
*                                                                    !!!03898
        04  network-id            pic 9(4).                            !03899
                                                                       !03900A00
                                                                       !03900C00
                                                                       !03900G00
                                                                       !03900M00
                                                                       !03900N00
                                                                       !03900r00
        04  filler                pic x(1040).                         !03900r01
                                                                       !03900r02
                                                                       !03900N02
                                                                       !03900M02
                                                                       !03900G02
                                                                       !03900C02
                                                                       !03900A02
*                                                                     !!03901
*   Section is the data needed for a pvv or cv file trans,            !!03902
*   except "xR".                                                      !!03903
*                                                                     !!03904
    02  verify redefines admin.                                        !03905
*                                                                     !!03906
*       Field is the code that specifies the customer verification    !!03907
*       algorithm used by the issuer to generate the customer         !!03908
*       identification value (e.g., a PVV ) in this record.           !!03909
*       "01" = Visa PVS is currently the only valid value.            !!03910
*                                                                     !!03911
        04  cva-cde               pic xx.                              !03912
*                                                                     !!03913
*       Field is the value between "1" and "6" indicating which of    !!03914
*       the possible pairs of PIN Verification Keys was used by the   !!03915
*       card issuer to generate the PVV for this cardholder account   !!03916
*       number.  "0" means the PVV is not verified by the Visa stand- !!03917
*       in processing.                                                !!03918
*                                                                     !!03919
        04  pvki                  pic x.                               !03920
*                                                                     !!03921
*       Field is the Pin Verification Value (PVV).                    !!03922
*                                                                     !!03923
        04  pvv                   pic x(4).                            !03924
*                                                                     !!03925
*         Contains up to 9 digits of cardholder's zip                 !!03926
*         code, left-justified and blank-filled.                      !!03927
*                                                                     !!03928
        04  zip-cde               pic x(9).                            !03929
*                                                                     !!03930
*         Contains first 5 numeric characters of                      !!03931
*         cardholder's address, left-justified and blank-filled.      !!03932
*                                                                     !!03933
        04  avv                   pic x(5).                            !03934
                                                                       !03935A00
                                                                       !03935C00
                                                                       !03935G00
                                                                       !03935M00
                                                                       !03935N00
                                                                       !03935r00
        04  filler                pic x(1045).                         !03935r01
                                                                       !03935r02
                                                                       !03935V00
    02  stp-recur-pmnt redefines admin.                                !03935V01
        04  tran-amt              pic 9(12).                           !03935V02
        04  acq-cntry-cde         pic 9(3).                            !03935V03
        04  pan-cntry-cde         pic 9(3).                            !03935V04
        04  crd-acpt-id           pic x(15).                           !03935V05
        04  crd-acpt.                                                  !03935V06
            06  reg-e-loc         pic x(25).                           !03935V07
            06  city              pic x(13).                           !03935V08
            06  cntry             pic x(2).                            !03935V09
        04  payment-srv-fld.                                           !03935V0A
            06  tran-id           pic 9(15).                           !03935V0B
            06  mrch-vrfcn-val    pic x(10).                           !03935V0C
        04  vdcs-private.                                              !03935V0D
            06  ntwk-id-cde       pic x(4).                            !03935V0E
        04  acct-id1              pic x(28).                           !03935V0F
        04  acct-id2              pic x(28).                           !03935V0G
        04  stp-ordr-typ          pic x(2).                            !03935V0H
        04  crdhldr-nam           pic x(23).                           !03935V0I
        04  mrch-acct-num         pic x(27).                           !03935V0J
                                                                       !03935l00
        04  mrch-typ              pic x(4).                            !03935l01
                                                                       !03935r03
        04  filler                pic x(852).                          !03935r04
                                                                       !03935r05
                                                                       !03935s00
*                                                                      !03935s01
*   The coll-only redefine of admin is used for Visa collection-only   !03935s02
*   transactions.                                                      !03935s03
*                                                                      !03935s04
    02  coll-only                 redefines admin.                     !03935s05
                                                                       !03935s06
*                                                                      !03935s07
*       Processing code                                                !03935s08
*       Field 3                                                        !03935s09
*                                                                      !03935s0A
        04  proc-cde              pic x(6).                            !03935s0B
                                                                       !03935s0C
*                                                                      !03935s0D
*       Transaction amount                                             !03935s0E
*       Field 4                                                        !03935s0F
*                                                                      !03935s0G
        04  tran-amt              pic 9(12).                           !03935s0H
                                                                       !03935s0I
*                                                                      !03935s0J
*       Transmission date and time                                     !03935s0K
*       Field 7                                                        !03935s0L
*                                                                      !03935s0M
        04  tran-dat-tim          pic 9(10).                           !03935s0N
                                                                       !03935s0O
*                                                                      !03935s0P
*       System trace audit number                                      !03935s0Q
*       Field 11                                                       !03935s0R
*                                                                      !03935s0S
        04  trace-num             pic 9(6).                            !03935s0T
                                                                       !03935s0U
*                                                                      !03935s0V
*       Local transaction time                                         !03935s0W
*       Field 12                                                       !03935s0X
*                                                                      !03935s0Y
        04  local-tim             pic 9(6).                            !03935s0Z
                                                                       !03935s0a
*                                                                      !03935s0b
*       Local transaction date                                         !03935s0c
*       Field 13                                                       !03935s0d
*                                                                      !03935s0e
        04  local-dat             pic 9(4).                            !03935s0f
                                                                       !03935s0g
*                                                                      !03935s0h
*       Merchant type                                                  !03935s0i
*       Field 18                                                       !03935s0j
*                                                                      !03935s0k
        04  merch-typ             pic 9(4).                            !03935s0l
                                                                       !03935s0m
*                                                                      !03935s0n
*       Acquiring institution country code                             !03935s0o
*       Field 19                                                       !03935s0p
*                                                                      !03935s0q
        04  acq-cntry-cde         pic 9(3).                            !03935s0r
                                                                       !03935s0s
*                                                                      !03935s0t
*       Point-of-service entry mode code, PAN entry mode               !03935s0u
*       Field 22, positions 1 and 2                                    !03935s0v
*                                                                      !03935s0w
        04  pan-entry-mde         pic 9(2).                            !03935s0x
                                                                       !03935s0y
*                                                                      !03935s0z
*       Point-of-service entry mode code, PIN entry capability         !03935s10
*       Field 22, position 3                                           !03935s11
*                                                                      !03935s12
        04  pin-entry-cap         pic 9.                               !03935s13
                                                                       !03935s14
*                                                                      !03935s15
*       Point-of-Service condition code                                !03935s16
*       Field 25                                                       !03935s17
*                                                                      !03935s18
        04  pos-cond-cde          pic 9(2).                            !03935s19
                                                                       !03935s1A
*                                                                      !03935s1B
*       Acquiring Institution Identification Code                      !03935s1C
*       Field 32                                                       !03935s1D
*                                                                      !03935s1E
        04  acq-inst              pic x(11).                           !03935s1F
                                                                       !03935s1G
*                                                                      !03935s1H
*       Forwarding Institution Identification Code                     !03935s1I
*       Field 33                                                       !03935s1J
*                                                                      !03935s1K
        04  fwd-inst              pic x(11).                           !03935s1L
                                                                       !03935s1M
*                                                                      !03935s1N
*       Retrieval reference number                                     !03935s1O
*       Field 37                                                       !03935s1P
*                                                                      !03935s1Q
        04  ref-num               pic x(12).                           !03935s1R
                                                                       !03935s1S
*                                                                      !03935s1T
*       Response code                                                  !03935s1U
*       Field 39                                                       !03935s1V
*                                                                      !03935s1W
        04  resp-cde              pic x(2).                            !03935s1X
                                                                       !03935s1Y
*                                                                      !03935s1Z
*       Card acceptor name/location, name                              !03935s1a
*       Field 43, positions 1-25                                       !03935s1b
*                                                                      !03935s1c
        04  name                  pic x(25).                           !03935s1d
                                                                       !03935s1e
*                                                                      !03935s1f
*       Card acceptor name/location, city                              !03935s1g
*       Field 43, positions 28-38                                      !03935s1h
*                                                                      !03935s1i
        04  city                  pic x(13).                           !03935s1j
                                                                       !03935s1k
*                                                                      !03935s1l
*       Card acceptor name/location, country                           !03935s1m
*       Field 43, positions 39-40                                      !03935s1n
*                                                                      !03935s1o
        04  cntry                 pic x(2).                            !03935s1p
                                                                       !03935s1q
*                                                                      !03935s1r
*       Transaction currency code                                      !03935s1s
*       Field 49                                                       !03935s1t
*                                                                      !03935s1u
        04  tran-crncy-cde        pic 9(3).                            !03935s1v
                                                                       !03935s1w
*                                                                      !03935s1x
*       Network identification code                                    !03935s1y
*       Field 63.1                                                     !03935s1z
*                                                                      !03935s20
        04  ntwk-id-cde           pic 9(4).                            !03935s21
                                                                       !03935s22
*                                                                      !03935s23
*       Message reason code                                            !03935s24
*       Field 63.3                                                     !03935s25
*                                                                      !03935s26
        04  msg-rsn-cde           pic 9(4).                            !03935s27
                                                                       !03935s28
*                                                                      !03935s29
*       Mail/Phone/Electronic commerce indicator                       !03935s2A
*       Field 63.6, position 4                                         !03935s2B
*                                                                      !03935s2C
        04  moto-ecomm-ind        pic x.                               !03935s2D
                                                                       !03935s2E
*                                                                      !03935s2F
*       Special condition indicator, risk identification               !03935s2G
*       Field 63.6, position 6                                         !03935s2H
*                                                                      !03935s2I
        04  spcl-cond-ind-ris     pic x.                               !03935s2J
                                                                       !03935s2K
*                                                                      !03935s2L
*       Special condition indicator, merchant transaction              !03935s2M
*       Field 63.6, position 7                                         !03935s2N
*                                                                      !03935s2O
        04  spcl-cond-ind-mrch    pic x.                               !03935s2P
                                                                       !03935s2Q
*                                                                      !03935s2R
*       Visa acquirer's business ID                                    !03935s2S
*       Field 63.8                                                     !03935s2T
*                                                                      !03935s2U
        04  acq-bus-id            pic x(8).                            !03935s2V
                                                                       !03935s2W
                                                                       !03935t00
*                                                                      !03935t01
*       Original message type                                          !03935t02
*       Field 90.1                                                     !03935t03
*                                                                      !03935t04
        04  orig-msg-typ          pic 9(4).                            !03935t05
                                                                       !03935t06
*                                                                      !03935s2X
*       Reserved by ACI for future use                                 !03935s2Y
*                                                                      !03935s2Z
                                                                       !03935t07
        04  user-fld-aci          pic x(908).                          !03935t08
                                                                       !03935t09
                                                                       !03935s2b
                                                                       !03935l03
                                                                       !03935V0L
                                                                       !03935N02
                                                                       !03935M02
                                                                       !03935G02
                                                                       !03935C02
                                                                       !03935A02
                                                                       !03936
end                                                                    !03937
                                                                       !03938
?section vpath-rqst
?page "vpath-rqst"
*                                                                     !!03943
*   This defination defines the format of a pathway request message   !!03944
*   and response between the RLF, VCRC, and VNMC requesters and       !!03945
*   server-vpath.                                                     !!03946
*                                                                     !!03947
def  vpath-rqst.                                                       !03948
                                                                       !03949
*   Reply code which the pathway requester uses to determine its      !!03950
*   next action.                                                      !!03951
*                  0 -  Response from interface                       !!03952
*                                                                     !!03953
    02  reply-code                type binary 16.                      !03954
*                                                                     !!03955
*   Process number identifies the BASE24 process number to which      !!03956
*   the BASE24 Pathway interface will route the request.              !!03957
*                                                                     !!03958
    02  process-number            type binary 16.                      !03959
*                                                                     !!03960
*   Used by the BASE24 Pathway interface to respond to the correct    !!03961
*   requester.                                                        !!03962
*                                                                     !!03963
    02  reply-tag                 type binary 32.                      !03964
*                                                                     !!03965
*   Response text to be displayed on the requester's screen.          !!03966
*                                                                     !!03967
    02  reply-text                pic x(40).                           !03968
                                                                       !03969
*                                                                     !!03970
*   Redefines reply-text and is used by the BASE24 Pathway            !!03971
*   requester to hold the requesting logical network before           !!03972
*   sending the request.                                              !!03973
*                                                                     !!03974
    02  request-data              redefines reply-text.                !03975
        04  logical-net           pic x(4).                            !03976
        04  filler                pic x(36).                           !03977
*                                                                     !!03978
*   Contains the actual request.                                      !!03979
*                                                                     !!03980
    02  path-rqst                 type *.                              !03981
                                                                       !03982
end                                                                    !03983
                                                                       !03983a00
?section sd-msg
?page "sd-msg"
def sd-msg.                                                            !03983a05
*                                                                      !03983a06
*    message identifier                                                !03983a07
*    Value is SD - shutdown.                                           !03983a08
*                                                                      !03983a09
  02 msg-id                      pic x(2).                             !03983a0A
*                                                                      !03983a0B
*    originator id                                                     !03983a0C
*    ID of originator                                                  !03983a0D
*    Valid values:                                                     !03983a0E
*        Visa will send either a sequence number or all zeroes.        !03983a0F
*        The interface can send any non-zero number or station-id.     !03983a0G
*                                                                      !03983a0H
  02 org-id                      pic x(8).                             !03983a0I
*                                                                      !03983a0J
*    Transaction date and time - only used in shutdown message.        !03983a0K
*                                                                      !03983a0L
  02 tran-dat-time               pic 9(10).                            !03983a0M
*                                                                      !03983a0N
*    originator data                                                   !03983a0O
*        Variable length data that VISA or the interface wants to see  !03983a0P
*        in the response.                                              !03983a0Q
*                                                                      !03983a0R
  02 orig-data                   pic x(10).                            !03983a0S
end                                                                    !03983a0T
                                                                       !03983a0U
?section hb-msg
?page "hb-msg"
def hb-msg.                                                            !03983a0Z
*                                                                      !03983a0a
*    message identifier                                                !03983a0b
*    Value is HB - heartbeat.                                          !03983a0c
*                                                                      !03983a0d
  02 msg-id                      pic x(2).                             !03983a0e
*                                                                      !03983a0f
*    originator id                                                     !03983a0g
*    ID of originator                                                  !03983a0h
*    Valid values:                                                     !03983a0i
*        Visa will send either a sequence number or all zeroes.        !03983a0j
*        The interface can send any non-zero number or station-id.     !03983a0k
*                                                                      !03983a0l
  02 org-id                      pic x(8).                             !03983a0m
*                                                                      !03983a0n
*    originator data                                                   !03983a0o
*        Variable length data that VISA or the interface wants to see  !03983a0p
*        in the response.                                              !03983a0q
*                                                                      !03983a0r
  02 orig-data                   pic x(10).                            !03983a0s
end                                                                    !03983a0t
                                                                       !03983a0u
                                                                       !03984
?section frlf
?page "frlf"
RECORD FRLF.                     FILE IS "FRLF" key-sequenced.         !03989
                                                                       !03990
  02 hdr                                     keytag 0.                 !03991
                                                                       !03992
*           This field contains switch date this record was logged.   !!03993
                                                                       !03994
     04 dat                       pic x(6).                            !03995
     04 dat-r redefines dat.                                           !03996
        06 yy                     pic 9(2).                            !03997
        06 month                  pic 9(2).                            !03998
        06 dd                     pic 9(2).                            !03999
                                                                       !04000
*           This field contains the time this record was logged.      !!04001
*           Format HHMMSS.SS                                          !!04002
                                                                       !04003
     04 tim                       pic x(8).                            !04004
     04 tim-r redefines tim.                                           !04005
        06 hh                     pic 9(2).                            !04006
        06 mm                     pic 9(2).                            !04007
        06 ss                     pic 9(2).                            !04008
        06 tt                     pic 9(2).                            !04009
                                                                       !04010
    02  typ                       type binary 16.                      !04011
    02  oper-id                   pic x(2).                            !04012
    02  file-updt-cde             pic x.                               !04013
    02  resp-cde                  pic x(2).                            !04014
    02  error-cde                 pic x(4).                            !04015
    02  pan                       pic x(28)           KEYTAG "PA".     !04016
    02  pan-cntry-cde             pic 9(3).                            !04017
    02  purge-dat                 pic x(6).                            !04018
    02  action-cde                pic xx.                              !04019
    02  region-cde                pic x(9).                            !04020
    02  spending-limit  redefines  region-cde.                         !04021
      04  cnt                     pic 99.                              !04022
      04  amount                  pic 9(6).                            !04023
      04  filler                  pic x.                               !04024
    02  proc-cntl-cde             pic 999.                             !04025
    02  pvki                      pic 9.                               !04026
    02  pvv                       pic 9(4).                            !04027
    02  zip-cde                   pic x(9).                            !04028
    02  avv                       pic x(5).                            !04029
    02  iss-inst-id               pic x(11).                           !04030
                                                                       !04030R00
    02  ntwk-id                   pic 9(4).                            !04030R01
                                                                       !04030V00
    02  tran-amt                  pic 9(12).                           !04030V01
    02  acq-cntry-cde             pic 9(3).                            !04030V02
    02  crd-acpt-id-cde           pic x(15).                           !04030V03
    02  crd-acpt.                                                      !04030V04
      04  reg-e-loc               pic x(25).                           !04030V05
      04  city                    pic x(13).                           !04030V06
      04  cntry                   pic x(2).                            !04030V07
    02  payment-srv-fld.                                               !04030V08
      04  tran-id                 pic 9(15).                           !04030V09
      04  mrch-vrfcn-val          pic x(10).                           !04030V0A
    02  acct-id1                  pic x(28).                           !04030V0B
    02  acct-id2                  pic x(28).                           !04030V0C
    02  stp-recur-pymnt-typ       pic x(2).                            !04030V0D
    02  crdhldr-nam               pic x(23).                           !04030V0E
    02  mrch-acct-num             pic x(27).                           !04030V0F
                                                                       !04030V0G
    02  filler                    pic x(18).                           !04030R02
                                                                       !04030R03
                                                                       !04031
end                                                                    !04032
                                                                       !04033
                                                                       !04033M00
?section vrsaf
?page "Resubmission Store-and-Forward file definition"
record  vrsaf.  FILE IS "VRSAF" key-sequenced.                         !04033M05
                                                                       !04033M06
    02 prikey                                       keytag 0.          !04033M07
                                                                       !04033a00
       04 timestamp               type binary 64.                      !04033a01
    02 rvsl-prikey                                  keytag "IL".       !04033a02
       04 acq-inst-id-cde         type id-num.                         !04033a03
       04 pan                     pic x(19).                           !04033a04
       04 seq-num                 pic x(12).                           !04033a05
       04 month                   pic x(2).                            !04033a06
       04 tim                     type *.                              !04033a07
                                                                       !04033a08
                                                                       !04033M09
    02 typ                        pic x.                               !04033M0A
    02 add-dat                    pic x(8).                            !04033M0B
    02 last-resp-cde              pic x(2).                            !04033M0C
    02 last-date-attempted        type dat.                            !04033M0D
                                                                       !04033a09
    02 user-fld                   pic x.                               !04033a0A
                                                                       !04033a0B
    02 resub-ctr                  type binary 16.                      !04033M0E
    02 extrn-msg-lgth             pic 9(4).                            !04033M0F
    02 extrn-msg.                                                      !04033M0G
       04 savearea                pic x occurs 500 times.              !04033M0H
    02 intrn-msg-lgth             pic 9(4).                            !04033M0I
    02 intrn-msg.                                                      !04033M0J
                                                                       !04033a0C
       04 savearea                pic x occurs 3472 times.             !04033a0D
                                                                       !04033a0E
                                                                       !04033M0L
end                                                                    !04033M0M
?section saf
?page "Store-and-Forward file definition"
                                                                       !04033M0R
record  saf.  file is "VSAF" relative.                                 !04038
                                                                       !04039
    02 saf-len                    type binary 16.                      !04040
    02 saf-rec                    type character 500.                  !04041
    02 orig-key                   type character 12.                   !04042
end                                                                    !04043
                                                                       !04044
?section viif
?page "viif"
*                                                                     !!04049
*  VisaNet Institution Identification File                            !!04050
*  Identification                                                     !!04051
*                                                                     !!04052
*      The VisaNet Institution Identification File (VIIF) contains    !!04053
*      one record for every financial institutin affiliated with this !!04054
*      VisaNet VDCS/BASE Interface.                                   !!04055
*                                                                     !!04056
*      The record contains VisaNet identification data:  the BIN to   !!04057
*      use for this Financial Institution in a request to VISA, and   !!04058
*      the prefixes this FI has used in its VISA card base.  It also  !!04059
*      contains information about options that this FI has chosen     !!04060
*      with respect to its participation in the VisaNet system.       !!04061
*                                                                     !!04062
*  Security                                                           !!04063
*                                                                     !!04064
*      The VIIF is secured under Tandem's group level security so     !!04065
*      that only authorized network operators may access (or start    !!04066
*      programs which will access) the file.                          !!04067
*                                                                     !!04068
*      USER ID         = <Base24 node name>.*                         !!04069
*      FILE CODE       = 0                                            !!04070
*      ACCESS SECURITY = GGGG                                         !!04071
*                                                                     !!04072
*  Usage                                                              !!04073
*                                                                     !!04074
*       VISA I'face  input        SEQ                  shared         !!04075
*       File maint   i/o          RAND (  )    r       shared         !!04076
*                                                                     !!04077
record viif.       file is "VIIF" key-sequenced.                       !04078
                                                                       !04079
  02 inst                                      keytag 0.               !04080
*                                                                     !!04081
*           This field contains the four-character identifier for     !!04082
*           the financial institution.                                !!04083
*                                                                     !!04084
     04 fi-id                     pic x(4).                            !04085
*                                                                     !!04086
*           This field contains the VisaNet system this VIIF record   !!04087
*           is for, for this institution.  An institution will have   !!04088
*           two VIIF records if it is an issuer of VDCS cards and     !!04089
*           BASE I system cards, or if it is an issuer of one system  !!04090
*           and sends acquirer messages to the other VisaNet system.  !!04091
*            "0" - BASE   "1" - VDCS                                  !!04092
*                                                                     !!04093
     04 syst                      pic x.                               !04094
                                                                       !04094E00
                                                                       !04094E01
*           Moves to an even byte boundary for subsequent fields.      !04094E02
*                                                                      !04094E03
  02 user-fld1                    pic x.                               !04094E04
                                                                       !04094E05
*           Information about the last file maintenance performed.     !04094E06
*                                                                      !04094E07
  02 last-fm.                                                          !04094E08
    04  fm-timestamp              type binary occurs 3 times.          !04094E09
    04  fm-user-group             type binary.                         !04094E0A
    04  fm-user-number            type binary 32.                      !04094E0B
    04  update-type               pic x.                               !04094E0C
    04  sta-no                    pic x(4).                            !04094E0D
                                                                       !04094E0E
                                                                       !04095
*           These are the BIN's assigned to this institution by Visa. !!04096
*                                                                     !!04097
  02 bin-number.                                                       !04098
                                                                       !04099
     04 acq                       pic x(11).                           !04100
     04 iss                       pic x(11).                           !04101
                                                                       !04102
*           The Visa-assigned Business ID of the acquirer that signed !!04103
*           the merchant for a purchase or mail/phone order           !!04104
*           transaction.                                              !!04105
*                                                                     !!04106
  02 acq-bus-id                   pic x(8).                            !04107
                                                                       !04108
                                                                       !04109r00
*           Reserved by ACI for future use                            !!04109r01
                                                                       !04109r02
*                                                                     !!04110
                                                                       !04111r00
  02 user-fld-aci                 pic 9(3).                            !04111r01
                                                                       !04111r02
                                                                       !04111N00
*                                                                      !04111N01
*           Acquiring Institution Country Code - this field is used by !04111N02
*           processors that have merchants in another country.         !04111N03
*                                                                      !04111N04
  02 acq-cntry-cde                pic x(3).                            !04111N05
*                                                                      !04111N06
*           Moves to an even byte boundary for subsequent fields.      !04111N07
*                                                                      !04111N08
  02 user-fld2                    pic x.                               !04111N09
                                                                       !04111N0A
                                                                       !04112
*           The purpose of this field is to tell whether or not       !!04113
*           this acquirer wants to retain cards at its ATMs           !!04114
*           if instructed to do so in inquiry responses from VISA.    !!04115
*                0 = no                                               !!04116
*                1 = (default) yes                                    !!04117
                                                                       !04118
  02 retain-cards                 type  binary 16.                     !04119
  02 issuer-prefix-count          type binary 16.                      !04120
                                                                       !04121E00
  02 visa-issuer                  occurs 60 times.                     !04121E01
                                                                       !04121E02
                                                                       !04122
*           For each issuer prefix (room has been allocated for       !!04123
*           10 per fi-id) there is a range of two-digit sub-prefixes. !!04124
*           When a request is received from VisaNet this table will   !!04125
*           be searched to ascertain the options chosen by the issuer.!!04126
*           A match is found when the first four digits of card-      !!04127
*           number equal PREFIX and the next two digits are within    !!04128
*           SUB-PREFIX range.                                         !!04129
                                                                       !04130
    04 prefix                     pic 9(4).                            !04131
    04 sub-prefix-range-low       pic 9(2).                            !04132
    04 sub-prefix-range-high      pic 9(2).                            !04133
                                                                       !04134
*           This will be used by the VisaNet VDCS/BASE Interface to   !!04135
*           tell BASE24 auth whether or not to verify the PIN, since  !!04136
*           the values represent the 3 options given to an issuer     !!04137
*           by VisaNet                                                !!04138
*                   0 = (default) verify at issuer's processing center!!04139
*                   1 = verify at VisaNet                             !!04140
*                   2 = authorize without PIN                         !!04141
                                                                       !04142
    04 pin-verify-option          type binary 16.                      !04143
                                                                       !04144
*           This tells which from-acct type to use in the transaction !!04145
*           code for BASE I inquiries on this issuer, when not spec-  !!04146
*           ified in the request.                                     !!04147
*                  "31" = (default) credit card                       !!04148
*                  "01" = DDA                                         !!04149
*                  "11" = savings                                     !!04150
                                                                       !04151
    04 from-acct-typ              pic x(2).                            !04152
                                                                       !04153
*           This tells which to-acct type to use in the transaction   !!04154
*           code for VDCS transfers on this issuer, when not spec-    !!04155
*           ified in the request.                                     !!04156
*                  "31" = (default) credit card                       !!04157
*                  "01" = DDA                                         !!04158
*                  "11" = savings                                     !!04159
                                                                       !04160
    04 to-acct-typ                pic x(2).                            !04161
                                                                       !04162E00
                                                                       !04162E01
                                                                       !04162E02
end                                                                    !04169
                                                                       !04170
?page "vbbf"
?section vbbf
*                                                                     !!04175
*      The VisaNet BLocked BIN File (VBBF) contains one record        !!04176
*      for every terminal affiliated with VISA transactions.          !!04177
*      For each terminal up to 20 BIN ranges can be blocked           !!04178
*      from accessing the VisaNet system.                             !!04179
*                                                                     !!04180
*      Security                                                       !!04181
*                                                                     !!04182
*      The VBBF is secured under Tandem's group level security so     !!04183
*      that only authorized network operators may access (or start    !!04184
*      programs which will access) the file.                          !!04185
*                                                                     !!04186
*      USER ID         = <Base24 node name>.*                         !!04187
*      FILE CODE       = 0                                            !!04188
*      ACCESS SECURITY = GGGG                                         !!04189
*                                                                     !!04190
*      Usage                                                          !!04191
*                                                                     !!04192
*       VISA I'face  input        SEQ                  shared         !!04193
*       File maint   i/o          RAND (  )    r       shared         !!04194
*                                                                     !!04195
record vbbf.        file is "VBBF" key-sequenced.                      !04196
                                                                       !04197
*           This field contains a 16-character identifier for the     !!04198
*           terminal.                                                 !!04199
                                                                       !04200
  02 terminal-id                  pic x(16)    keytag 0.               !04201
  02 bin-count                    type binary 16.                      !04202
  02 bin-to-block                 occurs 20 times.                     !04203
                                                                       !04204
*           PREFIX is the first four characters of the BIN.           !!04205
                                                                       !04206
    04 prefix                     pic 9(4).                            !04207
                                                                       !04208
*           SUB-PREFIX-RANGE-LOW is the lowest 2 digit number         !!04209
*           in the range of numbers that can be appended to           !!04210
*           PREFIX to make a complete BIN.                            !!04211
                                                                       !04212
    04 sub-prefix-range-low       pic 9(2).                            !04213
                                                                       !04214
*           SUB-PREFIX-RANGE-HIGH is the highest 2 digit number       !!04215
*           in the range of numbers that can be appended to           !!04216
*           PREFIX to make a complete BIN.                            !!04217
                                                                       !04218
    04 sub-prefix-range-high      pic 9(2).                            !04219
                                                                       !04220
  02 last-fm.                                                          !04221
    04  fm-timestamp              type binary occurs 3 times.          !04222
    04  fm-user-group             type binary.                         !04223
    04  fm-user-number            type binary 32.                      !04224
    04  update-type               pic x(1).                            !04225
    04  sta-no                    pic x(4).                            !04226
end                                                                    !04227
?section suspvisa
?page "Suspense Record definition"
definition suspvisa.                                                   !04232
*                                                                     !!04233
*       SUSP key for atm records.                                     !!04234
*                                                                     !!04235
    02  prikey                      pic x(55).                         !04236
    02  atm-prikey redefines prikey.                                   !04237
        04  acq-inst                pic x(11).                         !04238
        04  pan                     pic x(19).                         !04239
        04  filler                  pic x(13).                         !04240
        04  ref-auth-num            pic x(12).                         !04241
*                                                                     !!04242
*       SUSP key for pos records.                                     !!04243
*                                                                     !!04244
    02  pos-prikey redefines prikey.                                   !04245
        04  acq-inst                pic x(11).                         !04246
        04  pan                     pic x(19).                         !04247
        04  pre-auth-seq-num        pic x(12).                         !04248
                                                                       !04248f00
                                                                       !04248f01
                                                                       !04248f02
        04  sdf-typ                 pic x(1).                          !04249
        04  ref-auth-num            pic x(12).                         !04250
    02  user-fld1                   pic x.                             !04251
*!                                                                    !!04252
*   If request is from local BASE24, this is the process to!          !!04253
*   which the reply is to be sent.!                                   !!04254
*!                                                                    !!04255
    02  orig-net-pro.                                                  !04256
        04  word                    type binary 16                     !04257
                                    occurs 8 times.                    !04258
    02 extrn-msg.                                                      !04259
                                                                       !04260s00
                                                                       !04260s01
                                                                       !04260s02
                                                                       !04260s03
       03 savearea                  pic x(4265).                       !04260s04
                                                                       !04260s05
                                                                       !04260s06
                                                                       !04260s07
                                                                       !04260s08
    02 sem                          type xsem redefines extrn-msg.     !04261
    02 intrn-msg-lgth               type binary.                       !04262
    02 intrn-msg.                                                      !04263
       03 savearea                  pic x(3980).                       !04264
    02 pstm                         type * redefines intrn-msg.        !04265
    02 stm                          type * redefines intrn-msg.        !04266
END.                                                                   !04267
                                                                       !04268
?section visf
record visf.        file is "VISF" key-sequenced.                      !04271
                                                                       !04272
*      The VisaNet Interlink Services File contains the services      !!04273
*      allowed for interlink.                                         !!04274
                                                                       !04275
  02 prikey                                    keytag 0.               !04276
                                                                       !04276C00
     04  fiid                       type *.                            !04276C01
     04  sym-name                   type *.                            !04276C02
                                                                       !04276C03
                                                                       !04276G00
  02 crd-typ                        occurs 4 times.                    !04276G01
                                                                       !04276G02
     04  sys.                                                          !04276C05
         06  atm                    pic x.                             !04276C06
         06  pos                    pic x.                             !04276C07
     04  service                    pic x(2) occurs 30 times.          !04276C08
                                                                       !04276C09
                                                                       !04276C0A
                                                                       !04277C00
                                                                       !04277C01
                                                                       !04277C02
  02 last-fm.                                                          !04279
     04 fm-timestamp                type binary occurs 3 times.        !04280
     04 fm-user-group               type binary.                       !04281
     04 fm-user-number              type binary 32.                    !04282
     04 update-type                 pic x.                             !04283
     04 sta-no                      pic x(4).                          !04284
END.                                                                   !04285
                                                                       !04285F00
?section visa-swi-tkn-data
definition visa-swi-tkn-data.                                          !04285F03
*                                                                      !04285F04
*          Visa specific data to be used in the Switch Token.          !04285F05
*                                                                      !04285F06
  02 ver-id                         pic x(2).                          !04285F07
  02 ntwk-id-cde                    pic x(4).                          !04285F08
  02 iss-inst-id-cde                pic x(11).                         !04285F09
  02 setl-dat                       pic 9(4).                          !04285F0A
  02 fwd-inst-cde                   pic x(11).                         !04285F0B
  02 pos-entry-mde                  pic 9(4).                          !04285F0C
  02 resp-cde                       pic x(2).                          !04285F0D
  02 pmc-id                         pic x(6).                          !04285F0E
                                                                       !04285r00
  02 user-apr08-fld     redefines pmc-id.                              !04285r01
     04 data                        pic x(6).                          !04285r02
                                                                       !04285r03
                                                                       !04285G00
  02 mrch-vol-ind                   pic x(2).                          !04285G01
                                                                       !04285G02
                                                                       !04285a00
  02 intrntl-srv-asmnt              pic x.                             !04285a01
                                                                       !04285a02
  02 crd-rslts                      pic x(2).                          !04285a03
                                                                       !04285a04
                                                                       !04285a05
                                                                       !04285a06
                                                                       !04285a07
                                                                       !04285S06
                                                                       !04285a08
                                                                       !04285a09
                                                                       !04285a0A
                                                                       !04285S0G
                                                                       !04285e00
*                                                                      !04285e01
*          Bit map position = 48, Usage 16 and 34.                     !04285e02
*          The Visa CCDR (Commercial Card Data Repository) Indicator   !04285e03
*          indicates whether CCDR data is included in the Visa         !04285e04
*          Commerce transaction.                                       !04285e05
*                                                                      !04285e06
*          Valid values are:                                           !04285e07
*              0 - Enhanced Data not included in CCDR                  !04285e08
*              1 - Enhanced Data included in CCDR                      !04285e09
*                                                                      !04285e0A
  02 ccdr-ind                       pic x.                             !04285e0B
                                                                       !04285e0C
                                                                       !04285e0D
                                                                       !04285e0E
                                                                       !04285S0H
                                                                       !04285e0F
                                                                       !04285e0G
                                                                       !04285e0H
                                                                       !04285S0K
  02 fee-pgm-ind                    pic x(3).                          !04285M03
  02 stip-cde                       pic x(4).                          !04285M04
  02 msg-typ                        pic 9(4).                          !04285M05
  02 def-bill-ind                   pic x.                             !04285M06
                                                                       !04285S0L
  02 user-oct02-fld5    redefines def-bill-ind.                        !04285S0M
     04 data                        pic x.                             !04285S0N
                                                                       !04285S0O
  02 proc-cde                       pic x(6).                          !04285M07
  02 reimb-attr                     pic x.                             !04285M08
                                                                       !04285N00
                                                                       !04285S0P
                                                                       !04285S0Q
  02 ecomm-gds-ind                  pic x(2).                          !04285N02
                                                                       !04285S0R
  02 user-oct02-fld6    redefines ecomm-gds-ind.                       !04285S0S
     04 data                        pic x(2).                          !04285S0T
                                                                       !04285S0U
  02 cavv-rslt-cde                  pic x.                             !04285N03
                                                                       !04285S0V
  02 user-oct02-fld7    redefines cavv-rslt-cde.                       !04285S0W
     04 data                        pic x.                             !04285S0X
  02 mrch-vrfcn-val                 pic x(10).                         !04285S0Y
                                                                       !04285U00
  02 trace-num                      pic x(6).                          !04285U01
  02 ref-num                        pic x(12).                         !04285U02
                                                                       !04285V00
*                                                                      !04285V01
*          Bit map position = 126.12                                   !04285V02
*          Off premise indicator                                       !04285V03
*              "Y" - Off premise transaction                           !04285V04
*              " " - Not an off premise transaction                    !04285V05
*                                                                      !04285V06
  02    off-premise             pic x.                                 !04285V07
                                                                       !04285V08
                                                                       !04285X00
*                                                                      !04285X01
*          Bit map position = 62.21                                    !04285X02
*          Risk score/reason codes - supplied by Visa on request and   !04285X03
*          advices to the issuer.                                      !04285X04
*                                                                      !04285X05
  02    rsk.                                                           !04285X06
     04 score                       pic x(2).                          !04285X07
     04 rsn-cde                     pic x(2).                          !04285X08
                                                                       !04285X09
*                                                                      !04285X0A
*          Bit map position 62.22                                      !04285X0B
*          Condition codes - supplied by Visa on request and advices   !04285X0C
*          to the issuer                                               !04285X0D
*                                                                      !04285X0E
  02    cond.                                                          !04285X0F
     04 cde1                        pic x(2).                          !04285X0G
                                                                       !04285m00
     04 cer-num                     pic x(2).                          !04285m01
                                                                       !04285m02
     04 cde3                        pic x(2).                          !04285X0I
                                                                       !04285X0J
*                                                                      !04285X0K
*          Bit map position 63.13                                      !04285X0L
*          Visa Currency Precision Indicator consists of three-two     !04285X0M
*          byte fields that indicate how many decimal places apply     !04285X0N
*          to the minor unit of currency.                              !04285X0O
*                                                                      !04285X0P
  02    dec-posn-ind                pic x(6).                          !04285X0Q
                                                                       !04285X0R
*                                                                      !04285V09
*          This user field was added to keep the entire switch token   !04285V0A
*          structure even.                                             !04285V0B
*                                                                      !04285V0C
                                                                       !04285a0B
*          Bit map position = 46                                       !04285a0C
*          Optional Issuer ISA Amount.  Only valid in the LAC region   !04285a0D
*                                                                      !04285a0E
*                                                                      !04285a0F
  02    isa-amt.                                                       !04285a0G
         04 amt-fees.                                                  !04285a0H
             06 fee-typ         pic 9(2).                              !04285a0I
             06 crncy-cde       pic 9(3).                              !04285a0J
             06 minor-unit      pic 9.                                 !04285a0K
             06 amt-sign        pic 9.                                 !04285a0L
             06 amt             pic 9(8).                              !04285a0M
                                                                       !04285i00
                                                                       !04285i01
*                                                                      !04285i02
*          Bit map position = 60, subfield 6                           !04285i03
*          Chip Transaction Indicator                                  !04285i04
*                                                                      !04285i05
  02  chip-txn-ind                  pic x.                             !04285i06
                                                                       !04285l00
*                                                                      !04285l01
*          Bit map position 44.1                                       !04285l02
*          Response Source/Reason Code - identifies the source of      !04285l03
*          the field 39 response decision.                             !04285l04
*                                                                      !04285l05
  02  resp-src-rsn-cde              pic x.                             !04285l06
                                                                       !04285l07
*                                                                      !04285l08
*          Bit map position 62.16                                      !04285l09
*          Chargeback Rights Indicator - supplied by Visa on request   !04285l0A
*          and response for ATM Transactions.                          !04285l0B
*                                                                      !04285l0C
  02  chrgbck-rghts-ind             pic x(2).                          !04285l0D
                                                                       !04285p00
*                                                                      !04285p01
*          Bit map position 63.3                                       !04285p02
*          Message Reason Code - contains a code explaining the        !04285p03
*          reason for sending the message.                             !04285p04
*                                                                      !04285p05
  02  mis-cas-cde                   pic x(4).                          !04285p06
                                                                       !04285r04
*                                                                      !04285r05
*          Bit map position = 60.10                                    !04285r06
*          Partial Authrization Indicator - a value "1" in this field  !04285r07
*          indicates that the terminal will accept partial amount      !04285r08
*          approvals.                                                  !04285r09
*                                                                      !04285r0A
  02  prtl-auth-ind                 pic x.                             !04285r0B
                                                                       !04285t00
*                                                                      !04285t01
*          Bit map position = 28                                       !04285t02
*          Transaction fee                                             !04285t03
*          Ind is a C (credit) or D (debit)                            !04285t04
*                                                                      !04285t05
  02 tran-fee.                                                         !04285t06
     04  ind                        pic x.                             !04285t07
     04  amt                        pic 9(8).                          !04285t08
                                                                       !04285t09
*                                                                      !04285t0A
*          Bit map position = 49                                       !04285t0B
*          Transaction currency code                                   !04285t0C
*                                                                      !04285t0D
  02  tran-crncy-cde                pic x(3).                          !04285t0E
                                                                       !04285v00
*                                                                      !04285v01
*          Bit map position = 48, Usage 37                             !04285v02
*          Visa Money Transfer Data                                    !04285v03
*                                                                      !04285v04
  02  visa-money-xfer-data.                                            !04285v05
      04  watch-list-mgmt-valid-cde pic x(4).                          !04285v06
      04  watch-list-mgmt-rslt-cde  pic x(3).                          !04285v07
      04  actvty-chk-rslt           pic x.                             !04285v08
                                                                       !04285v09
                                                                       !04285w00
*                                                                      !04285w01
*          Bit map position 44.11                                      !04285w02
*          Original Response Code - contains the value of field 39 in  !04285w03
*          the original response message, when a transaction is        !04285w04
*          declined as a duplicate.                                    !04285w05
*                                                                      !04285w06
  02  orig-resp-cde                 pic x(2).                          !04285w07
                                                                       !04285w08
*                                                                      !04285w09
*          Bit map position 54                                         !04285w0A
*          Additional amount - contains Amount Type 95.                !04285w0B
*                                                                      !04285w0C
  02  addl-amt.                                                        !04285w0D
      04 acct-typ                   pic x(2).                          !04285w0E
      04 amt-typ                    pic x(2).                          !04285w0F
      04 crncy-cde                  pic x(3).                          !04285w0G
      04 amt-sign                   pic x.                             !04285w0H
      04 amt                        pic x(12).                         !04285w0I
                                                                       !04285w0J
*                                                                      !04285w0K
*          Bit map position 102                                        !04285w0L
*          Account Identification 1 - contains a number identifying    !04285w0M
*          an account or customer relationship.                        !04285w0N
*                                                                      !04285w0O
  02  acct-id1                      pic x(28).                         !04285w0P
                                                                       !04285w0Q
                                                                       !04285x00
*                                                                      !04285x01
*          Bit map position = 60.1                                     !04285x02
*          Terminal Type - contains a 1-digit code to identify the     !04285x03
*          basic POS electronic terminal category.                     !04285x04
*                                                                      !04285x05
  02  term-typ                      pic x.                             !04285x06
                                                                       !04285y00
*                                                                      !04285y01
*          Bit map position = 48, Usage 5, Position 1                  !04285y02
*          Fee Collections/Funds Disbursements Funds Source Indicator  !04285y03
*                                                                      !04285y04
  02  fee-fund-msg-fund-src-ind     pic x.                             !04285y05
                                                                       !04285y06
*                                                                      !04285y07
*          Allows the token to end on a word boundary                  !04285y08
*                                                                      !04285y09
  02  user-fld-aci                  pic x.                             !04285y0A
                                                                       !04285y0B
                                                                       !04285x07
                                                                       !04285x08
                                                                       !04285x09
                                                                       !04285x0A
END.                                                                   !04285F0H
                                                                       !04285F0I
